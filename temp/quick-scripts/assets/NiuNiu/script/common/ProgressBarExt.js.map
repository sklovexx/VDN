{"version":3,"sources":["ProgressBarExt.js"],"names":["ProcessType","cc","Enum","NULL","INCREASE","DECREASE","ProgressBarExt","Class","extends","ProgressBar","properties","_processType","_targetProgress","_progressDiff","targetProgress","tooltip","min","max","get","set","value","progress","_onProgressComplete","_changeTime","changeTime","range","Number","MAX_VALUE","start","update","dt","delta","runProgressComplete","_updateBarStatus","setTargetProgress","onProgressComplete","isImmediate","module","exports"],"mappings":"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","file":"ProgressBarExt.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\common","sourcesContent":["/**\n * Created by edisonjiang on 2018/4/4.\n * 扩展系统的ProgressBar组件，支持设置进度值时的过度动画，\n * 并支持达到某进度值时回调函数的设置\n */\n\n\"use strict\";\n\n// 改变进度值的过度方式(为无时不需要添加过度动画)\nlet ProcessType = cc.Enum({\n    NULL: 0,           // 无\n    INCREASE: 1,       // 增加\n    DECREASE: 2,       // 减少\n});\n\nlet ProgressBarExt = cc.Class({\n    extends: cc.ProgressBar,\n\n    properties: {\n        _processType: ProcessType.NULL, // 是否在改变进度值的过度中\n\n        _targetProgress: 0,\n        _progressDiff: 0,\n        targetProgress: {\n            tooltip: '目标进度值',\n            min: 0,\n            max: 1,\n            get () {\n                return this._targetProgress;\n            },\n            set (value) {\n                this._targetProgress = value;\n\n                this._progressDiff = (this._targetProgress - this.progress);\n                if (this._progressDiff > 0) {\n                    this._processType = ProcessType.INCREASE;\n                } else if (this._progressDiff < 0) {\n                    this._processType = ProcessType.DECREASE;\n                } else {\n                    this._processType = ProcessType.NULL;\n                }\n            }\n        },\n        _onProgressComplete: null, //进度达到目标进度值时执行的回调函数\n\n        _changeTime: 0,\n        changeTime: {\n            tooltip: '过度动画执行的时间(单位秒)',\n            range: [0, Number.MAX_VALUE],\n            get () {\n                return this._changeTime;\n            },\n            set (value) {\n                this._changeTime = value;\n            }\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n    },\n\n    update (dt) {\n        if (this._processType == ProcessType.NULL) {\n            return;\n        }\n\n        let delta = this._progressDiff;\n        if (this._changeTime > 0) {\n            delta = (this._progressDiff / this._changeTime);\n            delta *= dt;\n        }\n        if (this._processType == ProcessType.INCREASE) {\n            if (this._targetProgress > this.progress) {\n                this.progress += delta;\n            } else {\n                this.progress = this._targetProgress;\n                this.runProgressComplete();\n\n                this._processType = ProcessType.NULL;\n            }\n            this._updateBarStatus();\n        } else if (this._processType == ProcessType.DECREASE) {\n            if (this._targetProgress < this.progress) {\n                this.progress += delta;\n            } else {\n                this.progress = this._targetProgress;\n                this.runProgressComplete();\n\n                this._processType = ProcessType.NULL;\n            }\n            this._updateBarStatus();\n        }\n    },\n\n    setTargetProgress (progress, onProgressComplete, isImmediate) {\n        this.targetProgress = progress;\n        this._onProgressComplete = onProgressComplete;\n\n        if (isImmediate) {\n            this._processType = ProcessType.NULL;\n\n            this.progress = this._targetProgress;\n            this.runProgressComplete();\n            this._updateBarStatus();\n        }\n    },\n\n    runProgressComplete () {\n        if (this._onProgressComplete) {\n            this._onProgressComplete();\n            this._onProgressComplete = null;\n        }\n    }\n});\n\nmodule.exports = ProgressBarExt;\n"]}