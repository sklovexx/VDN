{"version":3,"sources":["ButtonSafe.js"],"names":["cc","Class","extends","Component","properties","safeTime","default","tooltip","start","button","getComponent","Button","clickEvents","node","on","scheduleOnce","dt"],"mappings":";;;;AAAA;;;;AAIA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAAU;AACNC,qBAAS,GADH;AAENC,qBAAS;AAFH;AADF,KAHP;;AAULC,SAVK,mBAUE;AAAA;;AACH,YAAIC,SAAS,KAAKC,YAAL,CAAkBV,GAAGW,MAArB,CAAb;AACA,YAAI,CAACF,MAAL,EAAY;AACR;AACH;;AAED,aAAKG,WAAL,GAAmBH,OAAOG,WAA1B;;AAEA,aAAKC,IAAL,CAAUC,EAAV,CAAa,OAAb,EAAsB,YAAI;AACtBL,mBAAOG,WAAP,GAAqB,EAArB;AACA,kBAAKG,YAAL,CAAkB,UAACC,EAAD,EAAM;AACpBP,uBAAOG,WAAP,GAAqB,MAAKA,WAA1B;AACH,aAFD,EAEG,MAAKP,QAFR;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,SAdD,EAcG,IAdH;AAeH;AAjCI,CAAT","file":"ButtonSafe.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\common","sourcesContent":["/**\r\n * Created by skyxu on 2018/9/12.\r\n */\r\n\r\n\"use strict\";\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        safeTime: {\r\n            default: 0.5,\r\n            tooltip: \"按钮保护时间，指定间隔内只能点击一次.\"\r\n        }\r\n    },\r\n\r\n    start(){\r\n        let button = this.getComponent(cc.Button);\r\n        if (!button){\r\n            return;\r\n        }\r\n\r\n        this.clickEvents = button.clickEvents;\r\n\r\n        this.node.on('click', ()=>{\r\n            button.clickEvents = [];\r\n            this.scheduleOnce((dt)=>{\r\n                button.clickEvents = this.clickEvents;\r\n            }, this.safeTime);\r\n\r\n            // mark: 这种方式会导致快速点击按钮时触摸穿透（按钮禁用时不再接受触摸事件）\r\n            // let autoGrey = button.enableAutoGrayEffect;\r\n            // button.enableAutoGrayEffect = false;\r\n            // button.interactable = false;\r\n            // this.scheduleOnce((dt)=>{\r\n            //     button.enableAutoGrayEffect = autoGrey;\r\n            //     button.interactable = true;\r\n            // }, this.safeTime);\r\n        }, this);\r\n    }\r\n});\r\n"]}