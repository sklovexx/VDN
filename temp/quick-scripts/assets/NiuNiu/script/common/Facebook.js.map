{"version":3,"sources":["Facebook.js"],"names":["Facebook","cc","Class","init","listener","facebookId","sdkbox","log","_facebookId","PluginFacebook","setListener","isLoggedIn","login","arr","logout","test","requestReadPermissions","requestPublishPermissions","getUserID","getPermissionList","getAccessToken","shareLink","link","title","text","image","info","Object","type","share","dialogLink","dialog","inviteFriends","imageUrl","inviteFriendsWithInviteIds","fetchFriends","requestInvitableFriends","params","fields","limit","api","requestUserPicture","redirect","requestUserName","path","method","tag","getInstallFriends","getFriends","module","exports"],"mappings":"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","file":"Facebook.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\common","sourcesContent":["/**\n * Created by skyxu on 2018/3/13.\n */\n\n\"use strict\";\n\n//sdk 配置说明 http://docs.sdkbox.com/zh/plugins/facebook/v3-js/\n\n/**\n * info.plist 添加\n * <key>FacebookAppID</key>\n <array>\n <string>2312312312</string>\n </array>\n\n <key>LSApplicationQueriesSchemes</key>\n <array>\n <string>fbauth2</string>\n </array>\n\n <key>URL types</key>\n <array>\n <dictionary>\n <array>URL Schemes\n <string>fb2312312312</string>\n </array>\n </dictionary>\n </array>\n */\n\nlet Facebook = cc.Class({\n\n    /**\n     * @param {object} listener\n     * @param {string} facebookId\n     * @returns {boolean}\n     */\n    init: function (listener, facebookId) {\n        if(typeof sdkbox === \"undefined\"){\n            cc.log(\"sdkbox: undefined\");\n            return false;\n        }\n\n        this._facebookId = facebookId;\n        sdkbox.PluginFacebook.setListener(listener);\n        sdkbox.PluginFacebook.init();\n        cc.log(\"sdkbox: init\");\n\n        return true;\n    },\n\n    isLoggedIn: function () {\n        return (sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn());\n    },\n\n    login: function (arr) {\n        if(sdkbox.PluginFacebook && !sdkbox.PluginFacebook.isLoggedIn()){\n            sdkbox.PluginFacebook.login(arr);\n        }\n    },\n\n    logout: function () {\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\n            sdkbox.PluginFacebook.logout();\n        }\n    },\n\n    test: function () {\n        sdkbox.PluginFacebook.requestReadPermissions([\"public_profile\", \"email\", \"user_friends\", \"publish_actions\"]);\n        sdkbox.PluginFacebook.requestPublishPermissions([\"publish_actions\"]);\n    },\n\n    /**\n     * @returns {string}\n     */\n    getUserID: function () {\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\n            return sdkbox.PluginFacebook.getUserID();\n        }\n        return \"\";\n    },\n\n    /**\n     * @returns {Array}\n     */\n    getPermissionList: function () {\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\n            return sdkbox.PluginFacebook.getPermissionList();\n        }\n        return null;\n    },\n\n    getAccessToken: function () {\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\n            return sdkbox.PluginFacebook.getAccessToken();\n        }\n        return null;\n    },\n\n    /**\n     * @param {string} link\n     * @param {string} title\n     * @param {string} text\n     * @param {string} image\n     */\n    shareLink: function (link, title, text, image) {\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\n            let info = new Object();\n            info.type  = \"link\";\n            info.link  = link;\n            info.title = title;\n            info.text  = text;\n            info.image = image;\n            sdkbox.PluginFacebook.share(info);\n        }\n    },\n\n    /**\n     * @param {string} link\n     * @param {string} title\n     * @param {string} text\n     * @param {string} image\n     */\n    dialogLink: function (link, title, text, image) {\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\n            let info = new Object();\n            info.type  = \"link\";\n            info.link  = link;\n            info.title = title;\n            info.text  = text;\n            info.image = image;\n            sdkbox.PluginFacebook.dialog(info);\n        }\n    },\n\n    /**\n     * @param {string} imageUrl\n     */\n    inviteFriends: function (imageUrl) {\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\n            sdkbox.PluginFacebook.inviteFriends(\"https://fb.me/\" + this._facebookId, imageUrl);\n        }\n    },\n\n    /**\n     * @param {Array} arr\n     * @param {string} title\n     * @param {string} text\n     */\n    inviteFriendsWithInviteIds: function (arr, title, text) {\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\n            sdkbox.PluginFacebook.inviteFriendsWithInviteIds(arr, title, text);\n        }\n    },\n\n    /**\n     * 获取安装游戏的好友，数据在Listener onFetchFriends方法返回\n     */\n    fetchFriends: function () {\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\n            sdkbox.PluginFacebook.fetchFriends();\n        }\n    },\n\n    /**\n     * 获取邀请安装好友，数据在Listener onRequestInvitableFriends方法返回\n     */\n    requestInvitableFriends: function () {\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\n            let params = new Object();\n            params.fields = \"id,name\";\n            params.limit = 100;\n            //sdkbox.PluginFacebook.requestInvitableFriends(params);\n            sdkbox.PluginFacebook.api(\"/me/invitable_friends\", \"GET\", params, \"invitable_friends\");\n        }\n    },\n\n    /**\n     * 获取头像\n     */\n    requestUserPicture: function () {\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\n            let params = new Object();\n            params.redirect = \"false\";\n            params.type = \"large\";\n            // cache_key 可以用作缓存图片使用，头像改变时会变化\n            sdkbox.PluginFacebook.api(\"/me/picture?fields=cache_key,url\", \"GET\", params, \"request_picture\");\n        }\n    },\n\n    /**\n     *  获取name\n     */\n    requestUserName: function () {\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\n            let params = new Object();\n            params.fields = \"name\";\n            sdkbox.PluginFacebook.api(\"/me\", \"GET\", params, \"request_name\");\n        }\n    },\n\n    /**\n     * @param {string} path\n     * @param {string} method\n     * @param {object} params\n     * @param {string} tag\n     * 数据在Listener onAPI\n     */\n    api: function (path, method, params, tag) {\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\n            sdkbox.PluginFacebook.api(path, tag, params, tag);\n        }\n    },\n\n    /**\n     * @returns {Array}\n     */\n    getInstallFriends: function () {\n        return sdkbox.PluginFacebook.getFriends();\n    },\n\n    requestReadPermissions: function (arr) {\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\n            sdkbox.PluginFacebook.requestReadPermissions(arr);\n        }\n    },\n\n    requestPublishPermissions: function () {\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\n            sdkbox.PluginFacebook.requestPublishPermissions(arr);\n        }\n    }\n});\n\nmodule.exports = Facebook;"]}