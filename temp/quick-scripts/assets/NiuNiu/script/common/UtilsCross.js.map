{"version":3,"sources":["UtilsCross.js"],"names":["UtilsCross","pushLocalNotification","title","message","delay","loop","key","cc","sys","isNative","log","undefined","ret","platform","IPHONE","IPAD","jsb","reflection","callStaticMethod","ANDROID","getAppVersion","v","loadServerTime","getUID","Date","toUTCString","rmAndroidSplash","share","extraText","trackEvent","eventType","jsonStr","trackEvent_FB","loadAdRewardVideo","isAdRewardVideoLoaded","showAdRewardVideo","loadAdInterstitial","isAdInterstitialLoaded","showAdInterstitial","showAdBanner","hideAdBanner","closeAdRewardVideo","isPlayCompleted","GlobalNiuNiu","eventMgr","emit","config","EVENT_CLOSE_AD_REWARD_VIDEO","adRewardVideoLoaded","EVENT_AD_REWARD_VIDEO_LOADED","module","exports"],"mappings":"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","file":"UtilsCross.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\common","sourcesContent":["/**\r\n * Created by skyxu on 2018/5/7.\r\n *\r\n * 平台工具，调用原生平台方法\r\n */\r\n\r\n\"use strict\";\r\n\r\nlet UtilsCross = UtilsCross || {};\r\n\r\n/**\r\n *\r\n * @param title {String}\r\n * @param message {String}\r\n * @param delay {Number} 多长时间后提醒（单位秒)\r\n * @param loop {Boolean} 是否重复提醒\r\n * @param key {String} 唯一key\r\n */\r\nUtilsCross.pushLocalNotification = function (title, message, delay, loop, key) {\r\n    if (!cc.sys.isNative) {\r\n        cc.log(\"only native can use iap.\");\r\n        return;\r\n    }\r\n    \r\n    if (loop === undefined){\r\n        loop = false;\r\n    }\r\n\r\n    let ret = \"\";\r\n    if (cc.sys.platform === cc.sys.IPHONE || cc.sys.platform === cc.sys.IPAD) {\r\n        ret = jsb.reflection.callStaticMethod(\"HKLocalNotification\",\"pushLocalNoti:message:withSecond:repeats:key:\", title, message, delay, loop, key);\r\n    } else if (cc.sys.platform == cc.sys.ANDROID) {\r\n        ret = jsb.reflection.callStaticMethod(\"com/hawk/utils/UtilNotification\", \"s_postNotification\", \"(Ljava/lang/String;Ljava/lang/String;IZLjava/lang/String;)V\", title, message, delay, loop, key);\r\n    }\r\n\r\n    return ret;\r\n};\r\n\r\nUtilsCross.getAppVersion = function () {\r\n    let v = \"V\";\r\n    let ret = \"\";\r\n    if (cc.sys.platform === cc.sys.IPHONE || cc.sys.platform === cc.sys.IPAD) {\r\n        ret = jsb.reflection.callStaticMethod(\"UtilsNative\",\"getAppVersion\");\r\n    } else if (cc.sys.platform == cc.sys.ANDROID){\r\n        ret = jsb.reflection.callStaticMethod(\"com/hawk/utils/ConfigManager\", \"getPackageVersionStatic\", \"()Ljava/lang/String;\");\r\n    } else {\r\n        // web\r\n        ret = \"1.0.0\";\r\n    }\r\n    v += ret;\r\n\r\n    return v;\r\n};\r\n\r\n/**\r\n * 读取服务器时间\r\n */\r\nUtilsCross.loadServerTime = function () {\r\n    if (cc.sys.platform === cc.sys.IPHONE || cc.sys.platform === cc.sys.IPAD) {\r\n        // do nothing\r\n    } else if (cc.sys.platform == cc.sys.ANDROID){\r\n        jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"loadServerTime\", \"()V\");\r\n    }\r\n};\r\n\r\nUtilsCross.getUID = function () {\r\n    let ret = \"\";\r\n    if (cc.sys.platform === cc.sys.ANDROID) {\r\n        ret = jsb.reflection.callStaticMethod(\"com/hawk/utils/ConfigManager\", \"getDeviceIDStatic\", \"()Ljava/lang/String;\");\r\n    } else {\r\n        ret = (new Date()).toUTCString();\r\n    }\r\n    cc.log(\"uid: \" + ret);\r\n    return ret;\r\n};\r\n\r\n\r\n/**\r\n * 移除Andorid SplashView\r\n */\r\nUtilsCross.rmAndroidSplash = function () {\r\n    let ret = \"\";\r\n    if (cc.sys.platform === cc.sys.ANDROID) {\r\n        ret = jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\",\"rmSplashView\", \"()V\");\r\n    }\r\n\r\n    return ret;\r\n};\r\n\r\n/**\r\n * 分享\r\n */\r\nUtilsCross.share = function (title, extraText) {\r\n    let ret = \"\";\r\n    if (cc.sys.platform === cc.sys.ANDROID) {\r\n        ret = jsb.reflection.callStaticMethod(\"com/hawk/utils/ConfigManager\", \"share\", \"(Ljava/lang/String;Ljava/lang/String;)V\", title, extraText);\r\n    }\r\n\r\n    return ret;\r\n};\r\n\r\n/**\r\n * 追踪事件\r\n */\r\nUtilsCross.trackEvent = function (eventType, jsonStr) {\r\n    if (!cc.sys.isNative) {\r\n        cc.log(\"only native can trackEvent.\");\r\n        return;\r\n    }\r\n    \r\n    if (cc.sys.platform === cc.sys.ANDROID) {\r\n        jsb.reflection.callStaticMethod(\"com/hawk/utils/ConfigManager\", \"trackEvent\", \"(Ljava/lang/String;Ljava/lang/String;)V\", eventType, jsonStr);\r\n    }\r\n};\r\n\r\n/**\r\n * 追踪事件(Firebase平台)\r\n */\r\nUtilsCross.trackEvent_FB = function (eventType, jsonStr) {\r\n    if (!cc.sys.isNative) {\r\n        cc.log(\"only native can trackEvent_FB.\");\r\n        return;\r\n    }\r\n\r\n    if (cc.sys.platform === cc.sys.ANDROID) {\r\n        jsb.reflection.callStaticMethod(\"com/hawk/utils/ConfigManager\", \"trackEvent_FB\", \"(Ljava/lang/String;Ljava/lang/String;)V\", eventType, jsonStr);\r\n    }\r\n};\r\n\r\n//------------Ads start------------\r\nUtilsCross.loadAdRewardVideo = function () {\r\n    if (!cc.sys.isNative) {\r\n        cc.log(\"only native can loadAdRewardVideo.\");\r\n        return;\r\n    }\r\n\r\n    if (cc.sys.platform === cc.sys.ANDROID) {\r\n        jsb.reflection.callStaticMethod(\"com/hawk/utils/AdRewardVideoMgr\",\"loadAdStatic\", \"()V\");\r\n    }\r\n};\r\nUtilsCross.isAdRewardVideoLoaded = function () {\r\n    if (!cc.sys.isNative) {\r\n        cc.log(\"only native can isAdRewardVideoLoaded.\");\r\n        return false;\r\n    }\r\n\r\n    if (cc.sys.platform === cc.sys.ANDROID) {\r\n        return jsb.reflection.callStaticMethod(\"com/hawk/utils/AdRewardVideoMgr\",\"isAdLoadedStatic\", \"()Z\");\r\n    } else {\r\n        return false;\r\n    }\r\n};\r\nUtilsCross.showAdRewardVideo = function () {\r\n    if (!cc.sys.isNative) {\r\n        cc.log(\"only native can showAdRewardVideo.\");\r\n        return;\r\n    }\r\n\r\n    if (cc.sys.platform === cc.sys.ANDROID) {\r\n        jsb.reflection.callStaticMethod(\"com/hawk/utils/AdRewardVideoMgr\",\"showStatic\", \"()V\");\r\n    }\r\n};\r\n\r\nUtilsCross.loadAdInterstitial = function () {\r\n    if (!cc.sys.isNative) {\r\n        cc.log(\"only native can loadAdInterstitial.\");\r\n        return;\r\n    }\r\n\r\n    if (cc.sys.platform === cc.sys.ANDROID) {\r\n        jsb.reflection.callStaticMethod(\"com/hawk/utils/AdInterstitialMgr\",\"loadAdStatic\", \"()V\");\r\n    }\r\n};\r\nUtilsCross.isAdInterstitialLoaded = function () {\r\n    if (!cc.sys.isNative) {\r\n        cc.log(\"only native can isAdInterstitialLoaded.\");\r\n        return false;\r\n    }\r\n\r\n    if (cc.sys.platform === cc.sys.ANDROID) {\r\n        return jsb.reflection.callStaticMethod(\"com/hawk/utils/AdInterstitialMgr\",\"isAdLoadedStatic\", \"()Z\");\r\n    } else {\r\n        return false;\r\n    }\r\n};\r\nUtilsCross.showAdInterstitial = function () {\r\n    if (!cc.sys.isNative) {\r\n        cc.log(\"only native can showAdInterstitial.\");\r\n        return;\r\n    }\r\n\r\n    if (cc.sys.platform === cc.sys.ANDROID) {\r\n        jsb.reflection.callStaticMethod(\"com/hawk/utils/AdInterstitialMgr\",\"showStatic\", \"()V\");\r\n    }\r\n};\r\n\r\nUtilsCross.showAdBanner = function () {\r\n    if (!cc.sys.isNative) {\r\n        cc.log(\"only native can showAdBanner.\");\r\n        return;\r\n    }\r\n\r\n    if (cc.sys.platform === cc.sys.ANDROID) {\r\n        jsb.reflection.callStaticMethod(\"com/hawk/utils/AdBannerMgr\",\"showStatic\", \"()V\");\r\n    }\r\n};\r\nUtilsCross.hideAdBanner = function () {\r\n    if (!cc.sys.isNative) {\r\n        cc.log(\"only native can hideAdBanner.\");\r\n        return;\r\n    }\r\n\r\n    if (cc.sys.platform === cc.sys.ANDROID) {\r\n        jsb.reflection.callStaticMethod(\"com/hawk/utils/AdBannerMgr\",\"hideStatic\", \"()V\");\r\n    }\r\n};\r\n//------------Ads end--------------\r\n\r\n//------------native to js begin------------\r\n// Ads\r\nUtilsCross.closeAdRewardVideo = function (isPlayCompleted) {\r\n    cc.log(\"关闭激励视频广告\");\r\n    GlobalNiuNiu.eventMgr.emit(GlobalNiuNiu.config.EVENT_CLOSE_AD_REWARD_VIDEO, isPlayCompleted);\r\n};\r\nUtilsCross.adRewardVideoLoaded = function () {\r\n    GlobalNiuNiu.eventMgr.emit(GlobalNiuNiu.config.EVENT_AD_REWARD_VIDEO_LOADED);\r\n};\r\n//------------native to js end--------------\r\n\r\nmodule.exports = UtilsCross;"]}