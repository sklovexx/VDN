{"version":3,"sources":["DataObject.js"],"names":["DataObject","cc","Class","properties","parse","data","key","hasOwnProperty","undefined","toString","JSON","stringify","PlayerObject","extends","uid","fbid","fbtoken","fbicon","fbname","fb_cache_key","bid","coins","nickname","rkeys","avatar","ctor","props","js","createMap","lastDailyRewardTime","normalGameTimes","challengeGameTimes","isControlTime","getMaxGunLevel","maxLevel","i","GlobalNiuNiu","config","GUN_COUNTS","Math","max","formatStr","PropObject","type","num","init","IAPObject","hadPay","propRefreshTime","prop1hadBuy","prop2hadBuy","prop3hadBuy","shopProps","showPropTips","vipValid","SettingObject","musicOn","effectOn","musicVol","effectVol","notify","AchieveObject","accCoins","killMonsters","gotFrozens","gotShields","hadDone","ChestObject","oneOnlyNum","starNumCollect","shortOpenTime","longOpenTime","showChestTips","GuideObject","module","exports","IapObject"],"mappings":";;;;AAAA;;;;AAIA;;AAEA;;;;AAGA,IAAIA,aAAaC,GAAGC,KAAH,CAAS;AACtBC,gBAAY,EADU;;AAGtB;;;;;AAKAC,SARsB,iBAQhBC,IARgB,EAQX;AACP,YAAIC,GAAJ;AACA,aAAKA,GAAL,IAAYD,IAAZ,EAAkB;AACd,gBAAI,CAAC,KAAKE,cAAL,CAAoBD,GAApB,CAAL,EAA+B;AAC3B;AACH;;AAED,gBAAID,KAAKC,GAAL,MAAcE,SAAd,IAA2BH,KAAKC,GAAL,MAAc,IAA7C,EAAmD;AAC/C,qBAAKA,GAAL,IAAYD,KAAKC,GAAL,CAAZ;AACH;AACJ;AACJ,KAnBqB;;;AAqBtB;AACAG,YAtBsB,sBAsBZ;AACN,eAAOC,KAAKC,SAAL,CAAe,IAAf,CAAP;AACH;AAxBqB,CAAT,CAAjB;;AA2BA;;;AAGA,IAAIC,eAAeX,GAAGC,KAAH,CAAS;AACxBW,aAASb,UADe;;AAGxBG,gBAAY;AACRW,aAAK,CADG;AAERC,cAAM,CAFE;AAGRC,iBAAS,CAHD;AAIRC,gBAAQ,EAJA;AAKRC,gBAAQ,EALA;AAMRC,sBAAc,EANN,EAMoB;;AAE5BC,aAAK,EARG;AASRC,eAAO,MATC,EASoB;AAC5BC,kBAAU,MAVF;AAWRC,eAAO,EAXC;AAYRC,gBAAQ;;AAZA,KAHY;AAkBxBC,QAlBwB,kBAkBlB;AACF,aAAKC,KAAL,GAAazB,GAAG0B,EAAH,CAAMC,SAAN,EAAb;;AAEA,YAAI,KAAKC,mBAAL,KAA6BrB,SAAjC,EAA4C;AACxC,iBAAKqB,mBAAL,GAA2B,CAA3B;AACH;AACD,YAAI,KAAKC,eAAL,KAAyBtB,SAA7B,EAAwC;AACpC,iBAAKsB,eAAL,GAAuB,CAAvB;AACH;AACD,YAAI,KAAKC,kBAAL,KAA4BvB,SAAhC,EAA2C;AACvC,iBAAKuB,kBAAL,GAA0B,CAA1B;AACH;;AAED;AACA,YAAI,KAAKC,aAAL,KAAuBxB,SAA3B,EAAsC;AAClC,iBAAKwB,aAAL,GAAqB,IAArB;AACH;AACJ,KAnCuB;;;AAqCxB;;;;AAIAC,kBAzCwB,4BAyCR;AACZ,YAAIC,WAAW,CAAf;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,KAAKC,aAAaC,MAAb,CAAoBC,UAAzC,EAAqDH,GAArD,EAA0D;AACtDD,uBAAWK,KAAKC,GAAL,CAASN,QAAT,EAAmB,KAAKjC,GAAG0B,EAAH,CAAMc,SAAN,CAAgB,YAAhB,EAA8BN,CAA9B,CAAL,CAAnB,CAAX;AACH;;AAED,eAAOD,QAAP;AACH;AAhDuB,CAAT,CAAnB;;AAmDA;;;AAGA,IAAIQ,aAAazC,GAAGC,KAAH,CAAS;AACtBW,aAASb,UADa;;AAGtBG,gBAAY;AACRwC,cAAM,CADE,EACC;AACTC,aAAK,CAFG,CAEC;AAFD,KAHU;;AAQtBnB,QARsB,kBAQhB,CACL,CATqB;AAWtBoB,QAXsB,gBAWjBF,IAXiB,EAWXC,GAXW,EAWN;AACZ,aAAKD,IAAL,GAAYA,IAAZ;AACA,aAAKC,GAAL,GAAWA,GAAX;AACH;AAdqB,CAAT,CAAjB;;AAiBA;;;AAGA,IAAIE,YAAY7C,GAAGC,KAAH,CAAS;AACrBW,aAASb,UADY;;AAGrBG,gBAAY;AACR4C,gBAAQ,CADA,EACgB;AACxBC,yBAAiB,CAFT,EAEgB;AACxBC,qBAAa,KAHL;AAIRC,qBAAa,KAJL;AAKRC,qBAAa,KALL;AAMRC,mBAAW,EANH,EAMgB;AACxBC,sBAAc,KAPN,EAOgB;AACxBC,kBAAU,KARF,CAQe;AARf;AAHS,CAAT,CAAhB;;AAeA;;;AAGA,IAAIC,gBAAgBtD,GAAGC,KAAH,CAAS;AACzBW,aAASb,UADgB;;AAGzBG,gBAAY;AACRqD,iBAAS,IADD;AAERC,kBAAU,IAFF;AAGRC,kBAAU,CAHF;AAIRC,mBAAW,CAJH;AAKRC,gBAAQ;AALA;AAHa,CAAT,CAApB;;AAYA,IAAIC,gBAAgB5D,GAAGC,KAAH,CAAS;AACzBW,aAASb,UADgB;;AAGzBG,gBAAW;AACP2D,kBAAU,CADH,EACa;AACpBC,sBAAc,CAFP,EAEa;AACpBC,oBAAY,CAHL,EAGa;AACpBC,oBAAY,CAJL,EAIa;AACpBC,iBAAS,IALF,CAKa;AALb,KAHc;AAUzBzC,QAVyB,kBAUnB;AACF,aAAKyC,OAAL,GAAejE,GAAG0B,EAAH,CAAMC,SAAN,EAAf;AACH;AAZwB,CAAT,CAApB;;AAeA;;;AAGA,IAAIuC,cAAclE,GAAGC,KAAH,CAAS;AACvBW,aAASb,UADc;;AAGvBG,gBAAW;AACPiE,oBAAY,CADL,EACiB;AACxBC,wBAAgB,CAFT,EAEiB;AACxBC,uBAAe,CAHR,EAGiB;AACxBC,sBAAc,CAJP,EAIiB;AACxBC,uBAAe,KALR,CAKiB;AALjB;AAHY,CAAT,CAAlB;;AAYA,IAAIC,cAAcxE,GAAGC,KAAH,CAAS;AACvBW,aAASb,UADc;;AAGvBG,gBAAY;AAHW,CAAT,CAAlB;;AAMAuE,OAAOC,OAAP,GAAiB;AACb3E,gBAAYA,UADC;AAEbY,kBAAcA,YAFD;AAGb8B,gBAAYA,UAHC;AAIbkC,eAAW9B,SAJE;AAKbS,mBAAeA,aALF;AAMbkB,iBAAaA,WANA;AAObN,iBAAaA,WAPA;AAQbN,mBAAeA;AARF,CAAjB","file":"DataObject.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\common","sourcesContent":["/**\r\n * Created by skyxu on 2018/3/23.\r\n */\r\n\r\n\"use strict\";\r\n\r\n/**\r\n * 基础数据对象\r\n */\r\nlet DataObject = cc.Class({\r\n    properties: {},\r\n\r\n    /**\r\n     * 解析数据\r\n     * @param data {Object} JSON Object\r\n     * @returns {DataObject}\r\n     */\r\n    parse(data){\r\n        var key;\r\n        for (key in data) {\r\n            if (!this.hasOwnProperty(key)) {\r\n                continue;\r\n            }\r\n\r\n            if (data[key] !== undefined && data[key] !== null) {\r\n                this[key] = data[key];\r\n            }\r\n        }\r\n    },\r\n\r\n    // 只保留属性字段，不保留function\r\n    toString(){\r\n        return JSON.stringify(this);\r\n    }\r\n});\r\n\r\n/**\r\n * 玩家基础数据\r\n */\r\nlet PlayerObject = cc.Class({\r\n    extends: DataObject,\r\n\r\n    properties: {\r\n        uid: 0,\r\n        fbid: 0,\r\n        fbtoken: 0,\r\n        fbicon: \"\",\r\n        fbname: \"\",\r\n        fb_cache_key: \"\",           // facebook icon cache key\r\n\r\n        bid: \"\",\r\n        coins: 100000,              // 初始金币\r\n        nickname: \"逢赌必赢\",\r\n        rkeys: 10,\r\n        avatar: \"\",\r\n\r\n    },\r\n    ctor(){\r\n        this.props = cc.js.createMap();\r\n\r\n        if (this.lastDailyRewardTime === undefined) {\r\n            this.lastDailyRewardTime = 0;\r\n        }\r\n        if (this.normalGameTimes === undefined) {\r\n            this.normalGameTimes = 0;\r\n        }\r\n        if (this.challengeGameTimes === undefined) {\r\n            this.challengeGameTimes = 0;\r\n        }\r\n\r\n        // 初始化是否开启时间验证\r\n        if (this.isControlTime === undefined) {\r\n            this.isControlTime = true;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 获得所有枪支中最高的等级\r\n     * @returns {number}\r\n     */\r\n    getMaxGunLevel(){\r\n        let maxLevel = 0;\r\n        for (let i = 1; i <= GlobalNiuNiu.config.GUN_COUNTS; i++) {\r\n            maxLevel = Math.max(maxLevel, this[cc.js.formatStr(\"gun%dLevel\", i)]);\r\n        }\r\n\r\n        return maxLevel;\r\n    }\r\n});\r\n\r\n/**\r\n * 道具数据\r\n */\r\nlet PropObject = cc.Class({\r\n    extends: DataObject,\r\n\r\n    properties: {\r\n        type: 0, // 道具类型\r\n        num: 0   // 道具数量\r\n    },\r\n\r\n    ctor(){\r\n    },\r\n\r\n    init(type, num) {\r\n        this.type = type;\r\n        this.num = num;\r\n    }\r\n});\r\n\r\n/**\r\n * 玩家付费数据\r\n */\r\nlet IAPObject = cc.Class({\r\n    extends: DataObject,\r\n\r\n    properties: {\r\n        hadPay: 0,              // 消费总数\r\n        propRefreshTime: 0,     // 道具下次刷新时间\r\n        prop1hadBuy: false,\r\n        prop2hadBuy: false,\r\n        prop3hadBuy: false,\r\n        shopProps: [],          // 商店道具信息\r\n        showPropTips: false,    // 显示道具刷新提示\r\n        vipValid: false,       // vip是否有效\r\n    }\r\n});\r\n\r\n/**\r\n * 游戏设置信息\r\n */\r\nlet SettingObject = cc.Class({\r\n    extends: DataObject,\r\n\r\n    properties: {\r\n        musicOn: true,\r\n        effectOn: true,\r\n        musicVol: 1,\r\n        effectVol: 1,\r\n        notify: true\r\n    }\r\n});\r\n\r\nlet AchieveObject = cc.Class({\r\n    extends: DataObject,\r\n\r\n    properties:{\r\n        accCoins: 0,        // 累计获得的金币\r\n        killMonsters: 0,    // 杀死敌人数量\r\n        gotFrozens: 0,      // 获得冰冻道具数量\r\n        gotShields: 0,      // 获得护盾道具数量\r\n        hadDone: null,      // 标记已经达成的成就 hadDone['id'] = true\r\n    },\r\n    ctor(){\r\n        this.hadDone = cc.js.createMap();\r\n    }\r\n});\r\n\r\n/**\r\n * 宝箱奖励信息\r\n */\r\nlet ChestObject = cc.Class({\r\n    extends: DataObject,\r\n\r\n    properties:{\r\n        oneOnlyNum: 0,          // 只开启一个宝箱的计数,\r\n        starNumCollect: 0,      // 已经收集的星星，获得奖励后清零\r\n        shortOpenTime: 0,       // 短时宝箱开启时间(秒)\r\n        longOpenTime: 0,        // 长时宝箱开启时间(秒)\r\n        showChestTips: false,   // 显示开启宝箱提示\r\n    }\r\n});\r\n\r\nlet GuideObject = cc.Class({\r\n    extends: DataObject,\r\n\r\n    properties: {}\r\n});\r\n\r\nmodule.exports = {\r\n    DataObject: DataObject,\r\n    PlayerObject: PlayerObject,\r\n    PropObject: PropObject,\r\n    IapObject: IAPObject,\r\n    SettingObject: SettingObject,\r\n    GuideObject: GuideObject,\r\n    ChestObject: ChestObject,\r\n    AchieveObject: AchieveObject\r\n};"]}