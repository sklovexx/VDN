{"version":3,"sources":["DailyRewardData.js"],"names":["UtilsOther","require","dataList","DailyRewardData","cc","Class","properties","id","roleMaxLevel","rewardInfos","rewardInfoArr","init","jsonData","clone","Number","splitWithValueType","String","forEach","currentValue","index","array","info","coins","weight","setData","_jsonData","initData","list","v","rewardData","push","getRewardData","count","length","minLevel","maxLevel","i","MAX_VALUE"],"mappings":";;;;AAAA;;;;AAIA;;AAEA,IAAIA,aAAaC,QAAQ,wBAAR,CAAjB;;AAEA,IAAIC,WAAW,EAAf;;AAEA,IAAIC,kBAAkBC,GAAGC,KAAH,CAAS;AAC3BC,gBAAY;AACRC,YAAI,CAAC,CADG;AAERC,sBAAc,CAFN;;AAIRC,qBAAa,EAJL;AAKRC,uBAAe;AALP,KADe;;AAS3BC,QAT2B,gBASrBC,QATqB,EASX;AACZZ,mBAAWa,KAAX,CAAiBD,QAAjB,EAA2B,IAA3B;;AAEA,aAAKL,EAAL,GAAUO,OAAO,KAAKP,EAAZ,CAAV;AACA,aAAKC,YAAL,GAAoBM,OAAO,KAAKN,YAAZ,CAApB;;AAEA,YAAI,KAAKC,WAAL,IAAoB,KAAKA,WAAL,IAAoB,IAA5C,EAAkD;AAC9C,iBAAKC,aAAL,GAAqBV,WAAWe,kBAAX,CAA8B,KAAKN,WAAnC,EAAgDO,MAAhD,EAAwD,GAAxD,CAArB;AACA,iBAAKN,aAAL,CAAmBO,OAAnB,CAA2B,UAAUC,YAAV,EAAwBC,KAAxB,EAA+BC,KAA/B,EAAsC;AAC7D,oBAAIC,OAAOrB,WAAWe,kBAAX,CAA8BG,YAA9B,EAA4CJ,MAA5C,EAAoD,GAApD,CAAX;AACAM,sBAAMD,KAAN,IAAe,EAACG,OAAOD,KAAK,CAAL,CAAR,EAAiBE,QAAQF,KAAK,CAAL,CAAzB,EAAf;AACH,aAHD;AAIH;AACJ;AAtB0B,CAAT,CAAtB;;AAyBAlB,gBAAgBqB,OAAhB,GAA0B,UAAUZ,QAAV,EAAoB;AAC1CT,oBAAgBsB,SAAhB,GAA4Bb,QAA5B;AACH,CAFD;;AAIA;;;;AAIAT,gBAAgBuB,QAAhB,GAA2B,YAAY;AACnC,QAAI,CAACvB,gBAAgBsB,SAArB,EAAgC;AAC5B;AACH;;AAED,QAAIE,OAAOxB,gBAAgBsB,SAA3B;AALmC;AAAA;AAAA;;AAAA;AAMnC,6BAAcE,IAAd,8HAAoB;AAAA,gBAAXC,CAAW;;AAChB,gBAAIC,aAAa,IAAI1B,eAAJ,EAAjB;AACA0B,uBAAWlB,IAAX,CAAgBiB,CAAhB;;AAEA1B,qBAAS4B,IAAT,CAAcD,UAAd;AACH;AAXkC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAanC,WAAO1B,gBAAgBsB,SAAvB;AACAtB,oBAAgBsB,SAAhB,GAA4B,IAA5B;AACH,CAfD;;AAiBA;;;;;AAKAtB,gBAAgB4B,aAAhB,GAAgC,UAAUvB,YAAV,EAAwB;AACpD,QAAIwB,QAAQ9B,SAAS+B,MAArB;AACA,QAAID,SAAS,CAAb,EAAgB;AACZ,eAAO,IAAP;AACH;;AAED,QAAIE,WAAW,CAAf;AAAA,QAAkBC,WAAW,CAA7B;AACA,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIJ,KAApB,EAA2BI,GAA3B,EAAgC;AAC5BF,mBAAWhC,SAASkC,CAAT,EAAY5B,YAAvB;AACA,YAAI4B,IAAI,CAAJ,GAAQJ,KAAZ,EAAmB;AACfG,uBAAWjC,SAASkC,IAAI,CAAb,EAAgB5B,YAA3B;AACH,SAFD,MAEO;AACH2B,uBAAWrB,OAAOuB,SAAlB;AACH;;AAED,YAAI7B,gBAAgB0B,QAAhB,IAA4B1B,eAAe2B,QAA/C,EAAyD;AACrD,mBAAOjC,SAASkC,CAAT,CAAP;AACH;AACJ;;AAED,WAAOlC,SAAS8B,QAAQ,CAAjB,CAAP;AACH,CArBD","file":"DailyRewardData.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\config","sourcesContent":["/**\r\n * Created by edisonjiang on 2018/8/31.\r\n */\r\n\r\n\"use strict\";\r\n\r\nlet UtilsOther = require(\"./../common/UtilsOther\");\r\n\r\nlet dataList = [];\r\n\r\nlet DailyRewardData = cc.Class({\r\n    properties: {\r\n        id: -1,\r\n        roleMaxLevel: 0,\r\n\r\n        rewardInfos: \"\",\r\n        rewardInfoArr: []\r\n    },\r\n\r\n    init (jsonData) {\r\n        UtilsOther.clone(jsonData, this);\r\n\r\n        this.id = Number(this.id);\r\n        this.roleMaxLevel = Number(this.roleMaxLevel);\r\n\r\n        if (this.rewardInfos && this.rewardInfos != \"-1\") {\r\n            this.rewardInfoArr = UtilsOther.splitWithValueType(this.rewardInfos, String, \";\");\r\n            this.rewardInfoArr.forEach(function (currentValue, index, array) {\r\n                let info = UtilsOther.splitWithValueType(currentValue, Number, \",\");\r\n                array[index] = {coins: info[0], weight: info[1]};\r\n            });\r\n        }\r\n    }\r\n});\r\n\r\nDailyRewardData.setData = function (jsonData) {\r\n    DailyRewardData._jsonData = jsonData;\r\n};\r\n\r\n/**\r\n * 初始化数据\r\n * @property {Object} jsonData\r\n */\r\nDailyRewardData.initData = function () {\r\n    if (!DailyRewardData._jsonData) {\r\n        return;\r\n    }\r\n\r\n    let list = DailyRewardData._jsonData;\r\n    for (let v of list) {\r\n        let rewardData = new DailyRewardData();\r\n        rewardData.init(v);\r\n\r\n        dataList.push(rewardData);\r\n    }\r\n\r\n    delete DailyRewardData._jsonData;\r\n    DailyRewardData._jsonData = null;\r\n};\r\n\r\n/**\r\n * 根据角色的最大等级得到数据\r\n * @param {Number} roleMaxLevel\r\n * @returns {DailyRewardData}\r\n */\r\nDailyRewardData.getRewardData = function (roleMaxLevel) {\r\n    let count = dataList.length;\r\n    if (count <= 0) {\r\n        return null;\r\n    }\r\n\r\n    let minLevel = 0, maxLevel = 0;\r\n    for (let i = 0; i < count; i++) {\r\n        minLevel = dataList[i].roleMaxLevel;\r\n        if (i + 1 < count) {\r\n            maxLevel = dataList[i + 1].roleMaxLevel;\r\n        } else {\r\n            maxLevel = Number.MAX_VALUE;\r\n        }\r\n\r\n        if (roleMaxLevel >= minLevel && roleMaxLevel < maxLevel) {\r\n            return dataList[i];\r\n        }\r\n    }\r\n\r\n    return dataList[count - 1];\r\n};\r\n"]}