{"version":3,"sources":["AchievementData.js"],"names":["UtilsOther","require","AchievementData","cc","Class","extends","name","ctor","id","type","order","condition","desc","reward","_jsonData","achieveData","setData","data","initData","splitInfo","pop","split","map","x","parseInt","i","length","startIndex","endIndex","j","aTypeAchieveArr","aTypeAchieveInfo","slice","a","aAchieve","clone","key","hasOwnProperty","toString","push"],"mappings":";;;;AAAA;;;;AAIA;;AAEA,IAAIA,aAAaC,QAAQ,wBAAR,CAAjB;;AAEA,IAAIC,kBAAkBC,GAAGC,KAAH,CAAS;AAC3BC,aAASF,GAAGC,KADe;AAE3BE,UAAM,iBAFqB;;AAI3BC,QAJ2B,kBAIrB;AACF,aAAKC,EAAL,GAAU,CAAC,CAAX;AACA,aAAKC,IAAL,GAAY,CAAC,CAAb;AACA,aAAKC,KAAL,GAAa,CAAC,CAAd;AACA,aAAKC,SAAL,GAAiB,CAAC,CAAlB;AACA,aAAKC,IAAL,GAAY,EAAZ;AACA,aAAKC,MAAL,GAAc,CAAd;AACH;AAX0B,CAAT,CAAtB;;AAcAX,gBAAgBY,SAAhB,GAA4B,IAA5B;AACAZ,gBAAgBa,WAAhB,GAA8B,EAA9B,EAAwC;;AAExCb,gBAAgBc,OAAhB,GAA0B,UAAUC,IAAV,EAAgB;AACtCf,oBAAgBY,SAAhB,GAA4BG,IAA5B;AACH,CAFD;;AAIAf,gBAAgBgB,QAAhB,GAA2B,YAAY;AACnC,QAAI,CAAChB,gBAAgBY,SAArB,EAA+B;AAC3B;AACH;;AAED;AACA,QAAIK,YAAYjB,gBAAgBY,SAAhB,CAA0BM,GAA1B,GAAgCX,IAAhC,CAAqCY,KAArC,CAA2C,GAA3C,EAAgDC,GAAhD,CAAoD,UAACC,CAAD,EAAK;AAAC,eAAOC,SAASD,CAAT,CAAP;AAAoB,KAA9E,CAAhB;;AAEA,SAAK,IAAIE,IAAE,CAAX,EAAcA,IAAEN,UAAUO,MAA1B,EAAkCD,GAAlC,EAAsC;AAClC,YAAIE,aAAa,CAAjB;AACA,YAAIC,WAAW,CAAf;AACA,aAAK,IAAIC,IAAE,CAAX,EAAcA,IAAEJ,CAAhB,EAAmBI,GAAnB,EAAuB;AACnBF,0BAAcR,UAAUU,CAAV,CAAd;AACH;AACDD,mBAAWD,aAAaR,UAAUM,CAAV,CAAxB;;AAEA,YAAIK,kBAAkB,EAAtB;AACA,YAAIC,mBAAmB7B,gBAAgBY,SAAhB,CAA0BkB,KAA1B,CAAgCL,UAAhC,EAA4CC,QAA5C,CAAvB;AATkC;AAAA;AAAA;;AAAA;AAUlC,iCAAcG,gBAAd,8HAA+B;AAAA,oBAAtBE,CAAsB;;AAC3B,oBAAIC,WAAW,IAAIhC,eAAJ,EAAf;AACAF,2BAAWmC,KAAX,CAAiBF,CAAjB,EAAoBC,QAApB;AACA;AACA,qBAAK,IAAIE,GAAT,IAAgBF,QAAhB,EAAyB;AACrB,wBAAI,CAACA,SAASG,cAAT,CAAwBD,GAAxB,CAAL,EAAkC;AAC9B;AACH;AACD,wBAAIA,QAAQ,MAAZ,EAAmB;AACfF,iCAASE,GAAT,IAAgBF,SAASE,GAAT,EAAcE,QAAd,EAAhB;AACH,qBAFD,MAEO;AACHJ,iCAASE,GAAT,IAAgBZ,SAASU,SAASE,GAAT,CAAT,CAAhB;AACH;AACJ;AACDN,gCAAgBS,IAAhB,CAAqBL,QAArB;AACH;AAzBiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA0BlChC,wBAAgBa,WAAhB,CAA4BwB,IAA5B,CAAiCT,eAAjC;AACH;;AAGD,WAAO5B,gBAAgBY,SAAvB;AACA;AACH,CAxCD","file":"AchievementData.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\config","sourcesContent":["/**\r\n * Created by skyxu on 2018/7/27.\r\n */\r\n\r\n\"use strict\";\r\n\r\nlet UtilsOther = require('./../common/UtilsOther');\r\n\r\nlet AchievementData = cc.Class({\r\n    extends: cc.Class,\r\n    name: \"AchievementData\",\r\n\r\n    ctor(){\r\n        this.id = -1;\r\n        this.type = -1;\r\n        this.order = -1;\r\n        this.condition = -1;\r\n        this.desc = \"\";\r\n        this.reward = 0;\r\n    }\r\n});\r\n\r\nAchievementData._jsonData = null;\r\nAchievementData.achieveData = [];       // 所有成就数据(二维数据，成就分类保存)\r\n\r\nAchievementData.setData = function (data) {\r\n    AchievementData._jsonData = data;\r\n};\r\n\r\nAchievementData.initData = function () {\r\n    if (!AchievementData._jsonData){\r\n        return;\r\n    }\r\n\r\n    // 最后一行为切割任务类型说明\r\n    let splitInfo = AchievementData._jsonData.pop().type.split(\",\").map((x)=>{return parseInt(x);});\r\n\r\n    for (let i=0; i<splitInfo.length; i++){\r\n        let startIndex = 0;\r\n        let endIndex = 0;\r\n        for (let j=0; j<i; j++){\r\n            startIndex += splitInfo[j];\r\n        }\r\n        endIndex = startIndex + splitInfo[i];\r\n\r\n        let aTypeAchieveArr = [];\r\n        let aTypeAchieveInfo = AchievementData._jsonData.slice(startIndex, endIndex);\r\n        for (let a of aTypeAchieveInfo){\r\n            let aAchieve = new AchievementData();\r\n            UtilsOther.clone(a, aAchieve);\r\n            // 转换数据类型，以方便使用\r\n            for (let key in aAchieve){\r\n                if (!aAchieve.hasOwnProperty(key)){\r\n                    continue;\r\n                }\r\n                if (key === \"desc\"){\r\n                    aAchieve[key] = aAchieve[key].toString();\r\n                } else {\r\n                    aAchieve[key] = parseInt(aAchieve[key]);\r\n                }\r\n            }\r\n            aTypeAchieveArr.push(aAchieve);\r\n        }\r\n        AchievementData.achieveData.push(aTypeAchieveArr);\r\n    }\r\n\r\n\r\n    delete AchievementData._jsonData;\r\n    // cc.log(JSON.stringify(AchievementData.achieveData));\r\n};\r\n\r\n"]}