{"version":3,"sources":["PageMgr.js"],"names":["cc","Class","extends","Component","properties","state","pages","Node","TipsPage","Prefab","LoadingPage","onLoad","Global","forEach","push","e","name","start","game","addPersistRootNode","node","lateStart","width","view","getFrameSize","window","height","adoptCanvas","canvas","director","getScene","getChildByName","getComponent","Canvas","rateR","designResolution","rateV","fitHeight","fitWidth","closePage","event","customData","onClosePage","parseInt","openPage","onOpenPage","num","tag","find","active","action","scaleTo","moveTo","v2","runAction","isNaN","finish","sequence","callFunc","closeAllPages","element","showTips","showTipPage","text","times","Tips","instantiate","parent","moveBy","fadeOut","setText","showTipPage2","angle","showLoadingPage","load","Label","string","showLoadingPage2","closeLoadingPage","backEcc","loadScene","ResourceMgr","playBgAudio","console","log"],"mappings":"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","file":"PageMgr.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Manager","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        state: 0, //主页页面加载状态\n        pages: [cc.Node],\n        TipsPage:cc.Prefab,\n        LoadingPage:cc.Prefab\n    },\n    // 页面状态\n    // 0 矿池\n\n    onLoad () {\n        if(!Global.pages){\n            Global.pages = []\n        }\n        this.pages.forEach(e=>{\n            Global.pages.push(e.name)\n        })\n    },\n\n    start() {\n        cc.game.addPersistRootNode(this.node)\n        this.lateStart()\n    },\n    lateStart() {\n        this.width = cc.view.getFrameSize().width\n        window.width = this.width\n        this.height = cc.view.getFrameSize().height\n        window.height = this.height\n        // 存为全局变量\n        this.adoptCanvas()\n    },\n    // 适配解决方案\n    adoptCanvas() {\n        let canvas = cc.director.getScene().getChildByName('Canvas').getComponent(cc.Canvas)\n        // 设计分辨率比\n        let rateR = canvas.designResolution.height / canvas.designResolution.width;\n        // 显示分辨率比\n        let rateV = this.height / this.width;\n        if (rateV > rateR) {\n            canvas.fitHeight = false;\n            canvas.fitWidth = true;\n        } else {\n            canvas.fitHeight = true;\n            canvas.fitWidth = false;\n        }\n    },\n    closePage(event,customData){\n        this.onClosePage(parseInt(customData));\n    },\n    openPage(event,customData){\n        this.onOpenPage(parseInt(customData));\n    },\n    onOpenPage(num, tag) {\n        if(Global.pages[num]==\"BaoMingPanel\"){\n            return;\n        }\n        cc.find('Canvas/'+Global.pages[num]).active = true;\n        let action = cc.scaleTo(0.2,1,1)\n        if(tag&&tag==1){\n            action = cc.moveTo(0.2,cc.v2(0,0));\n        }\n        // if(Global.pages[num]==\"ShopPanel\"){\n        //     cc.find(\"Canvas/UserDataPanel\").active = true;\n        // }\n        cc.find('Canvas/'+Global.pages[num]).runAction(action)\n    },\n    onClosePage(num,tag){\n        if(isNaN(num)) return;\n        let finish = function(){\n            cc.find('Canvas/'+Global.pages[num]).active = false;\n        }\n        let action = cc.sequence(cc.scaleTo(0.2,1,0),cc.callFunc(finish,this))\n        if(tag&&tag==1){\n            action = cc.moveTo(0.2,cc.v2(1060,0),cc.callFunc(finish,this));\n        }\n        cc.find('Canvas/'+Global.pages[num]).runAction(action)\n        // cc.find(\"Canvas/UserDataPanel\").active = false;\n    },\n    closeAllPages() {\n        Global.pages.forEach(element => {\n            cc.find('Canvas/'+element).active = false\n        });\n    },\n    showTips(event,customData){\n        this.showTipPage(customData);\n    },\n    //顯示提示-橫屏\n    showTipPage(text,times = 0.1){\n        if(times == null)\n        {\n            times = 0.1;\n        }\n        \n        this.Tips = cc.instantiate(this.TipsPage);\n        this.Tips.parent = cc.find('Canvas');\n        this.Tips.active = true;\n        let action = cc.sequence(cc.moveBy(1,cc.v2(0,30)),cc.fadeOut(times),cc.callFunc(this.closePage,this))\n        this.Tips.runAction(action)\n        this.Tips.getComponent('TipsPage').setText(text)\n    },\n    //顯示提示-豎屏\n    showTipPage2(text){\n        this.Tips = cc.instantiate(this.TipsPage);\n        this.Tips.angle = -90;\n        this.Tips.parent = cc.find('Canvas');\n        this.Tips.active = true;\n        let action = cc.sequence(cc.moveBy(1,cc.v2(30,0)),cc.fadeOut(0.1),cc.callFunc(this.closePage,this))\n        this.Tips.runAction(action)\n        this.Tips.getComponent('TipsPage').setText(text)\n    },\n    //顯示加載提示-橫屏\n    showLoadingPage(text){\n        this.load = cc.instantiate(this.LoadingPage);\n        this.load.parent = cc.find('Canvas');\n        this.load.getChildByName(\"Text\").getComponent(cc.Label).string = text;\n        //用于适配宽度的容器\n        this.load.getChildByName(\"WidthContainer\").getComponent(cc.Label).string = text;\n        this.load.active = true;\n    },\n    //顯示加載提示-豎屏\n    showLoadingPage2(text){\n        this.load = cc.instantiate(this.LoadingPage);\n        this.load.angle = -90;\n        this.load.parent = cc.find('Canvas');\n        this.load.getChildByName(\"Text\").getComponent(cc.Label).string = text;\n        //用于适配宽度的容器\n        this.load.getChildByName(\"WidthContainer\").getComponent(cc.Label).string = text;\n        this.load.active = true;\n    },\n    closeLoadingPage(){\n        this.load.active = false;\n    },\n    backEcc(){\n        cc.director.loadScene('ECC',()=>{\n            Global.ResourceMgr.playBgAudio()\n            console.log('切换场景')\n        })\n    },\n    // update (dt) {},\n});\n"]}