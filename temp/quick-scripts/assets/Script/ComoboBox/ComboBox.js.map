{"version":3,"sources":["ComboBox.js"],"names":["cc","Class","extends","Component","properties","triangle","Node","comboLabel","Label","dropDown","vLayoutNode","contentNode","itemPrefab","Prefab","onLoad","isDropDown","itemArray","initItems","comboboxClicked","rotateTriangle","showHideDropDownBox","rotateAction","rotateTo","easing","easeCubicActionOut","runAction","active","totalHeight","i","length","item","instantiate","children","getComponent","string","initComboBox","addChild","height"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAAUL,GAAGM,IADL,EACoB;AAC5BC,oBAAYP,GAAGQ,KAFP,EAEoB;AAC5BC,kBAAUT,GAAGM,IAHL,EAGoB;AAC5BI,qBAAaV,GAAGM,IAJR,EAIoB;AAC5BK,qBAAaX,GAAGM,IALR,EAKoB;AAC5BM,oBAAYZ,GAAGa,MANP,CAMoB;AANpB,KAHP;;AAYL;;AAEAC,UAdK,oBAcK;AACN;AACA,aAAKC,UAAL,GAAkB,KAAlB;;AAEA;AACA,aAAKC,SAAL,GAAiB,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,CAAjB;AACA,aAAKC,SAAL;AACH,KArBI;AAuBLC,mBAvBK,6BAuBc;AACf;AACA,aAAKC,cAAL;AACA;AACA,aAAKC,mBAAL;AACA;AACA,YAAI,CAAC,KAAKL,UAAV,EACI,KAAKA,UAAL,GAAkB,IAAlB,CADJ,KAGI,KAAKA,UAAL,GAAkB,KAAlB;AACP,KAjCI;AAmCLI,kBAnCK,4BAmCa;AACd;AACA,YAAI,CAAC,KAAKJ,UAAV,EAAsB;AAClB,gBAAIM,eAAerB,GAAGsB,QAAH,CAAY,GAAZ,EAAiB,GAAjB,EAAsBC,MAAtB,CAA6BvB,GAAGwB,kBAAH,EAA7B,CAAnB;AACA,iBAAKnB,QAAL,CAAcoB,SAAd,CAAwBJ,YAAxB;AACH,SAHD,MAIK;AACD,gBAAIA,gBAAerB,GAAGsB,QAAH,CAAY,GAAZ,EAAiB,CAAC,EAAlB,EAAsBC,MAAtB,CAA6BvB,GAAGwB,kBAAH,EAA7B,CAAnB;AACA,iBAAKnB,QAAL,CAAcoB,SAAd,CAAwBJ,aAAxB;AACH;AACJ,KA7CI;AA+CLD,uBA/CK,iCA+CkB;AACnB;AACA,YAAI,CAAC,KAAKL,UAAV,EACI,KAAKN,QAAL,CAAciB,MAAd,GAAuB,IAAvB,CADJ,KAGI,KAAKjB,QAAL,CAAciB,MAAd,GAAuB,KAAvB;AACP,KArDI;AAuDLT,aAvDK,uBAuDQ;AACT;AACA,YAAIU,cAAc,CAAlB;AACA,aAAK,IAAIC,IAAE,CAAX,EAAcA,IAAE,KAAKZ,SAAL,CAAea,MAA/B,EAAuCD,GAAvC,EAA4C;AACxC,gBAAIE,OAAO9B,GAAG+B,WAAH,CAAe,KAAKnB,UAApB,CAAX;AACAkB,iBAAKE,QAAL,CAAc,CAAd,EAAiBC,YAAjB,CAA8BjC,GAAGQ,KAAjC,EAAwC0B,MAAxC,GAAiD,KAAKlB,SAAL,CAAeY,CAAf,CAAjD;AACAE,iBAAKG,YAAL,CAAkB,MAAlB,EAA0BE,YAA1B,CAAuC,IAAvC;AACA,iBAAKzB,WAAL,CAAiB0B,QAAjB,CAA0BN,IAA1B;AACAH,2BAAeG,KAAKO,MAApB;AACH;;AAED;AACA,YAAIV,cAAc,KAAKhB,WAAL,CAAiB0B,MAAnC,EACI,KAAK1B,WAAL,CAAiB0B,MAAjB,GAA0BV,WAA1B;AACP;AACD;;AAtEK,CAAT","file":"ComboBox.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\ComoboBox","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        triangle: cc.Node,          // 下拉按钮右边的小三角形\r\n        comboLabel: cc.Label,       // 下拉按钮上显示的文本\r\n        dropDown: cc.Node,          // 下拉框\r\n        vLayoutNode: cc.Node,       // 垂直布局\r\n        contentNode: cc.Node,       // 滚动视图内容\r\n        itemPrefab: cc.Prefab       // 下拉框选项\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        // 是否已经下拉\r\n        this.isDropDown = false;\r\n\r\n        // 下拉框选项内容\r\n        this.itemArray = ['100', '200', '300'];\r\n        this.initItems();\r\n    },\r\n\r\n    comboboxClicked () {\r\n        // 旋转小三角形\r\n        this.rotateTriangle();\r\n        // 下拉框显示与隐藏\r\n        this.showHideDropDownBox();\r\n        // 改变isDropDown值\r\n        if (!this.isDropDown)\r\n            this.isDropDown = true;\r\n        else \r\n            this.isDropDown = false;\r\n    },\r\n\r\n    rotateTriangle () {\r\n        // 旋转小三角形(正值为逆时针，负值为顺时针)\r\n        if (!this.isDropDown) {\r\n            let rotateAction = cc.rotateTo(0.5, 180).easing(cc.easeCubicActionOut());\r\n            this.triangle.runAction(rotateAction);\r\n        }\r\n        else {\r\n            let rotateAction = cc.rotateTo(0.5, -90).easing(cc.easeCubicActionOut());\r\n            this.triangle.runAction(rotateAction);\r\n        }\r\n    },\r\n\r\n    showHideDropDownBox () {\r\n        // 下拉框显示与隐藏\r\n        if (!this.isDropDown) \r\n            this.dropDown.active = true;\r\n        else \r\n            this.dropDown.active = false;\r\n    },\r\n\r\n    initItems () {\r\n        // 根据数组初始化下拉框中的各个选项内容\r\n        let totalHeight = 0;\r\n        for (let i=0; i<this.itemArray.length; i++) {\r\n            let item = cc.instantiate(this.itemPrefab);\r\n            item.children[0].getComponent(cc.Label).string = this.itemArray[i];\r\n            item.getComponent('Item').initComboBox(this);\r\n            this.vLayoutNode.addChild(item);\r\n            totalHeight += item.height;\r\n        }\r\n\r\n        // 设置content高度\r\n        if (totalHeight > this.contentNode.height) \r\n            this.contentNode.height = totalHeight;\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}