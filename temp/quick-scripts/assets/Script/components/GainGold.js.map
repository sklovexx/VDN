{"version":3,"sources":["GainGold.js"],"names":["cc","Class","extends","Component","properties","coinpre","Prefab","coinNode","Node","createcoin","random1","random2","createTime","standingTime","coinSpeed","onLoad","onPlayCoinAni","callback","tempPlayer","v2","i","pre","instantiate","parent","node","setPosition","rannumx","Math","floor","random","rannumy","runAction","moveBy","scheduleOnce","stopAllActions","finshend","callFunc","destroy","pos","getPosition","coinpos","playTime","sub","mag","sequence","moveTo","x","y","start"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACAC,iBAASL,GAAGM,MAFJ;AAGR;AACAC,kBAAUP,GAAGQ,IAJL;AAKR;AACAC,oBAAY,EANJ;AAOR;AACAC,iBAAQ,CAAC,GARD;AASRC,iBAAQ,GATA;AAUR;AACAC,oBAAY,IAXJ;AAYR;AACAC,sBAAc,GAbN;AAcR;AACAC,mBAAW;AAfH,KAHP;;AAqBL;;AAEAC,UAvBK,oBAuBK,CACT,CAxBI;AAyBLC,iBAzBK,yBAyBSC,QAzBT,EAyBmB;AAAA;;AACpB,YAAIC,aAAalB,GAAGmB,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAjB;;AADoB,mCAEXC,CAFW;AAGhB,gBAAIC,MAAMrB,GAAGsB,WAAH,CAAe,MAAKjB,OAApB,CAAV;AACAgB,gBAAIE,MAAJ,GAAa,MAAKC,IAAlB;AACAH,gBAAII,WAAJ,CAAgBP,UAAhB;AACA,gBAAIQ,UAAUC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,MAAiB,MAAKlB,OAAL,GAAe,MAAKD,OAApB,GAA8B,CAA/C,IAAoD,MAAKA,OAApE,CAAd;AACA,gBAAIoB,UAAUH,KAAKC,KAAL,CAAWD,KAAKE,MAAL,MAAiB,MAAKlB,OAAL,GAAe,MAAKD,OAApB,GAA8B,CAA/C,IAAoD,GAApD,GAA0D,MAAKA,OAAL,GAAe,GAApF,CAAd;AACAW,gBAAIU,SAAJ,CAAc/B,GAAGgC,MAAH,CAAU,MAAKpB,UAAf,EAA2Bc,OAA3B,EAAoCI,OAApC,CAAd;AACA,kBAAKG,YAAL,CAAkB,YAAM;AACpBZ,oBAAIa,cAAJ;AACA,oBAAIC,WAAWnC,GAAGoC,QAAH,CAAY,YAAY;AACnCf,wBAAIgB,OAAJ;AACA;AACA,wBAAIjB,KAAK,KAAKX,UAAL,GAAkB,CAA3B,EAA8B;AAC1B;AACA,6BAAKwB,YAAL,CAAkB,YAAM;AACpBhB;AACH,yBAFD,EAEG,GAFH;AAGH;AACJ,iBATc,QAAf;AAUA,oBAAIqB,MAAMjB,IAAIkB,WAAJ,EAAV;AACA,oBAAIC,UAAU,MAAKjC,QAAL,CAAcgC,WAAd,EAAd;AACA,oBAAIE,WAAWH,IAAII,GAAJ,CAAQF,OAAR,EAAiBG,GAAjB,KAAyB,MAAK7B,SAA7C;AACAO,oBAAIU,SAAJ,CAAc/B,GAAG4C,QAAH,CAAY5C,GAAG6C,MAAH,CAAUJ,QAAV,EAAoBD,QAAQM,CAA5B,EAA+BN,QAAQO,CAAvC,CAAZ,EAAuDZ,QAAvD,CAAd;AACH,aAhBD,EAgBG,MAAKtB,YAAL,GAAoB,MAAKD,UAhB5B;AATgB;;AAEpB,aAAK,IAAIQ,IAAI,CAAb,EAAgBA,IAAI,KAAKX,UAAzB,EAAqCW,GAArC,EAA0C;AAAA,kBAAjCA,CAAiC;AAyBzC;AACJ,KArDI;AAsDL4B,SAtDK,mBAsDI,CAER;AAxDI;;AA0DL;AA1DJ","file":"GainGold.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\components","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        //飞的金币预制\n        coinpre: cc.Prefab,\n        //目标节点\n        coinNode: cc.Node,\n        //生成金币个数\n        createcoin: 20,\n        //随机范围(random1~random2之间)\n        random1:-200,\n        random2:200,\n        //随机范围(random1~random2之间)\n        createTime: 0.15,\n        //停留时间\n        standingTime: 0.2,\n        //金币移动速度\n        coinSpeed: 1000\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n    },\n    onPlayCoinAni(callback) {\n        let tempPlayer = cc.v2(0,0)\n        for (let i = 0; i < this.createcoin; i++) {\n            let pre = cc.instantiate(this.coinpre)\n            pre.parent = this.node\n            pre.setPosition(tempPlayer)\n            let rannumx = Math.floor(Math.random() * (this.random2 - this.random1 + 1) + this.random1)\n            let rannumy = Math.floor(Math.random() * (this.random2 - this.random1 + 1) / 1.5 + this.random1 / 1.5)\n            pre.runAction(cc.moveBy(this.createTime, rannumx, rannumy))\n            this.scheduleOnce(() => {\n                pre.stopAllActions()\n                let finshend = cc.callFunc(function () {\n                    pre.destroy()\n                    // this.coinNode.getComponent(cc.Animation).play()\n                    if (i == this.createcoin - 1) {\n                        //结束\n                        this.scheduleOnce(() => {\n                            callback()\n                        }, 0.5)\n                    }\n                }, this);\n                let pos = pre.getPosition()\n                let coinpos = this.coinNode.getPosition()\n                let playTime = pos.sub(coinpos).mag() / this.coinSpeed\n                pre.runAction(cc.sequence(cc.moveTo(playTime, coinpos.x, coinpos.y), finshend))\n            }, this.standingTime + this.createTime);\n\n        }\n    },\n    start () {\n\n    },\n\n    // update (dt) {},\n});\n"]}