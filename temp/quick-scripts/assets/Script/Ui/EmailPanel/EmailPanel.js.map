{"version":3,"sources":["EmailPanel.js"],"names":["cc","Class","extends","Component","properties","emailItem","Prefab","container_email","Node","start","onEnable","Global","ProtocolMgr","queryEmail","res","console","log","code","data","list","removeAllChildren","i","instantiate","getComponent","setData","on","EventType","TOUCH_END","PageMgr","onOpenPage","pages","state","readEmail","id","res2","showTipPage","message","addChild","length"],"mappings":";;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,mBAAUL,GAAGM,MADL;AAERC,yBAAgBP,GAAGQ;AAFX,KAHP;;AAQL;;AAEA;;AAEAC,SAZK,mBAYI,CAER,CAdI;AAeLC,YAfK,sBAeK;AAAA;;AACNC,eAAOC,WAAP,CAAmBC,UAAnB,CAA8B,UAACC,GAAD,EAAO;AACjCC,oBAAQC,GAAR,CAAYF,GAAZ;AACA,gBAAGA,IAAIG,IAAJ,IAAU,GAAb,EAAiB;AAAA;AACb,wBAAIC,OAAOJ,IAAII,IAAJ,CAASC,IAApB;AACAJ,4BAAQC,GAAR,CAAYE,IAAZ;AACA,0BAAKX,eAAL,CAAqBa,iBAArB;;AAHa,+CAILC,CAJK;AAKT,4BAAIhB,YAAYL,GAAGsB,WAAH,CAAe,MAAKjB,SAApB,CAAhB;AACAA,kCAAUkB,YAAV,CAAuB,WAAvB,EAAoCC,OAApC,CAA4CN,KAAKG,CAAL,CAA5C;AACAhB,kCAAUoB,EAAV,CAAazB,GAAGQ,IAAH,CAAQkB,SAAR,CAAkBC,SAA/B,EAAyC,YAAI;AACzChB,mCAAOiB,OAAP,CAAeC,UAAf,CAA0B,EAA1B;AACAlB,mCAAOiB,OAAP,CAAeE,KAAf,CAAqB,EAArB,EAAyBP,YAAzB,CAAsC,kBAAtC,EAA0DC,OAA1D,CAAkEN,KAAKG,CAAL,CAAlE;AACA,gCAAGH,KAAKG,CAAL,EAAQU,KAAR,IAAe,CAAlB,EAAoB;AAChBpB,uCAAOC,WAAP,CAAmBoB,SAAnB,CAA6Bd,KAAKG,CAAL,EAAQY,EAArC,EAAwC,UAACC,IAAD,EAAQ;AAC5C,wCAAGA,KAAKjB,IAAL,IAAW,GAAd,EAAkB;AACdF,gDAAQC,GAAR,CAAYkB,IAAZ;AACH,qCAFD,MAEK;AACDvB,+CAAOiB,OAAP,CAAeO,WAAf,CAA2BD,KAAKE,OAAhC;AACH;AACJ,iCAND;AAOH;AACJ,yBAZD;AAaA,8BAAK7B,eAAL,CAAqB8B,QAArB,CAA8BhC,SAA9B;AApBS;;AAIb,yBAAI,IAAIgB,IAAI,CAAZ,EAAcA,IAAEH,KAAKoB,MAArB,EAA4BjB,GAA5B,EAAgC;AAAA,8BAAxBA,CAAwB;AAiB/B;AArBY;AAsBhB,aAtBD,MAsBK;AACDV,uBAAOiB,OAAP,CAAeO,WAAf,CAA2BrB,IAAIsB,OAA/B;AACH;AACJ,SA3BD;AA4BH;AACD;;AA7CK,CAAT","file":"EmailPanel.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\EmailPanel","sourcesContent":["\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        emailItem:cc.Prefab,\n        container_email:cc.Node\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n\n    },\n    onEnable(){\n        Global.ProtocolMgr.queryEmail((res)=>{\n            console.log(res)\n            if(res.code==200){\n                let data = res.data.list\n                console.log(data);\n                this.container_email.removeAllChildren();\n                for(let i = 0;i<data.length;i++){\n                    let emailItem = cc.instantiate(this.emailItem);\n                    emailItem.getComponent(\"emailItem\").setData(data[i])\n                    emailItem.on(cc.Node.EventType.TOUCH_END,()=>{\n                        Global.PageMgr.onOpenPage(20);\n                        Global.PageMgr.pages[20].getComponent(\"EmailDetailPanel\").setData(data[i]);\n                        if(data[i].state==0){\n                            Global.ProtocolMgr.readEmail(data[i].id,(res2)=>{\n                                if(res2.code==200){\n                                    console.log(res2);\n                                }else{\n                                    Global.PageMgr.showTipPage(res2.message); \n                                }\n                            })\n                        }\n                    })\n                    this.container_email.addChild(emailItem);\n                }\n            }else{\n                Global.PageMgr.showTipPage(res.message);\n            }\n        })\n    }\n    // update (dt) {},\n});\n"]}