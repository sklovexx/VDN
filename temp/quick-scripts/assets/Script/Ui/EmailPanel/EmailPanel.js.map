{"version":3,"sources":["EmailPanel.js"],"names":["cc","Class","extends","Component","properties","emailItem","Prefab","container_email","Node","start","onEnable","Global","ProtocolMgr","queryEmail","res","console","log","code","data","list","removeAllChildren","i","instantiate","getComponent","setData","on","EventType","TOUCH_END","PageMgr","onOpenPage","pages","state","readEmail","id","res2","showTipPage","message","addChild","length"],"mappings":";;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,mBAAUL,GAAGM,MADL;AAERC,yBAAgBP,GAAGQ;AAFX,KAHP;;AAQL;;AAEA;;AAEAC,SAZK,mBAYI,CAER,CAdI;AAeLC,YAfK,sBAeK;AAAA;;AACNC,eAAOC,WAAP,CAAmBC,UAAnB,CAA8B,UAACC,GAAD,EAAO;AACjCC,oBAAQC,GAAR,CAAYF,GAAZ;AACA,gBAAGA,IAAIG,IAAJ,IAAU,GAAb,EAAiB;AAAA;AACb,wBAAIC,OAAOJ,IAAII,IAAJ,CAASC,IAApB;AACAJ,4BAAQC,GAAR,CAAYE,IAAZ;AACA,0BAAKX,eAAL,CAAqBa,iBAArB;;AAHa,+CAILC,CAJK;AAKT,4BAAIhB,YAAYL,GAAGsB,WAAH,CAAe,MAAKjB,SAApB,CAAhB;AACAA,kCAAUkB,YAAV,CAAuB,WAAvB,EAAoCC,OAApC,CAA4CN,KAAKG,CAAL,CAA5C,EAAoD,CAApD;AACAhB,kCAAUoB,EAAV,CAAazB,GAAGQ,IAAH,CAAQkB,SAAR,CAAkBC,SAA/B,EAAyC,YAAI;AACzChB,mCAAOiB,OAAP,CAAeC,UAAf,CAA0B,EAA1B;AACAlB,mCAAOiB,OAAP,CAAeE,KAAf,CAAqB,EAArB,EAAyBP,YAAzB,CAAsC,kBAAtC,EAA0DC,OAA1D,CAAkEN,KAAKG,CAAL,CAAlE,EAA0E,CAA1E;AACA,gCAAGH,KAAKG,CAAL,EAAQU,KAAR,IAAe,CAAlB,EAAoB;AAChBpB,uCAAOC,WAAP,CAAmBoB,SAAnB,CAA6Bd,KAAKG,CAAL,EAAQY,EAArC,EAAwC,UAACC,IAAD,EAAQ;AAC5C,wCAAGA,KAAKjB,IAAL,IAAW,GAAd,EAAkB;AACdF,gDAAQC,GAAR,CAAYkB,IAAZ;AACH,qCAFD,MAEK;AACDvB,+CAAOiB,OAAP,CAAeO,WAAf,CAA2BD,KAAKE,OAAhC;AACH;AACJ,iCAND;AAOH;AACJ,yBAZD;AAaA,8BAAK7B,eAAL,CAAqB8B,QAArB,CAA8BhC,SAA9B;AApBS;;AAIb,yBAAI,IAAIgB,IAAI,CAAZ,EAAcA,IAAEH,KAAKoB,MAArB,EAA4BjB,GAA5B,EAAgC;AAAA,8BAAxBA,CAAwB;AAiB/B;AArBY;AAsBhB,aAtBD,MAsBK;AACDV,uBAAOiB,OAAP,CAAeO,WAAf,CAA2BrB,IAAIsB,OAA/B;AACH;AACJ,SA3BD;AA4BH;AACD;;AA7CK,CAAT","file":"EmailPanel.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\EmailPanel","sourcesContent":["\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        emailItem:cc.Prefab,\r\n        container_email:cc.Node\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n\r\n    },\r\n    onEnable(){\r\n        Global.ProtocolMgr.queryEmail((res)=>{\r\n            console.log(res)\r\n            if(res.code==200){\r\n                let data = res.data.list\r\n                console.log(data);\r\n                this.container_email.removeAllChildren();\r\n                for(let i = 0;i<data.length;i++){\r\n                    let emailItem = cc.instantiate(this.emailItem);\r\n                    emailItem.getComponent(\"emailItem\").setData(data[i],1)\r\n                    emailItem.on(cc.Node.EventType.TOUCH_END,()=>{\r\n                        Global.PageMgr.onOpenPage(20);\r\n                        Global.PageMgr.pages[20].getComponent(\"EmailDetailPanel\").setData(data[i],1);\r\n                        if(data[i].state==0){\r\n                            Global.ProtocolMgr.readEmail(data[i].id,(res2)=>{\r\n                                if(res2.code==200){\r\n                                    console.log(res2);\r\n                                }else{\r\n                                    Global.PageMgr.showTipPage(res2.message); \r\n                                }\r\n                            })\r\n                        }\r\n                    })\r\n                    this.container_email.addChild(emailItem);\r\n                }\r\n            }else{\r\n                Global.PageMgr.showTipPage(res.message);\r\n            }\r\n        })\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}