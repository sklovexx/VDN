{"version":3,"sources":["DoorBottom.js"],"names":["cc","Class","extends","Component","properties","jumpHeight","jumpDuration","isOpen","audioClip","type","AudioClip","default","DoorTop","Node","startOpen","sys","localStorage","getItem","setItem","jumpDown","sequence","moveBy","v2","easing","easeCubicActionOut","callFunc","startClose","node","runAction","jumpUp","easeCubicActionIn","onLoad","on","EventType","TOUCH_START","t","Global","PageMgr","state","audioEngine","play","GameData","audio","setTimeout","onClosePage","getComponent","showTipPage"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACAC,oBAAY,CAFJ;AAGR;AACAC,sBAAc,CAJN;AAKR;AACAC,gBAAQ,KANA;AAORC,mBAAU;AACNC,kBAAMT,GAAGU,SADH;AAENC,qBAAS;AAFH,SAPF;AAWRC,iBAASZ,GAAGa;AAXJ,KAHP;;AAiBL;AACAC,eAAW,qBAAU;AACjB,YAAI,CAAC,KAAKP,MAAV,EAAkB;AACd;AACA,iBAAKA,MAAL,GAAc,IAAd;AACA,gBAAGP,GAAGe,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,YAA5B,KAA2C,IAA9C,EAAmD;AAC/CjB,mBAAGe,GAAH,CAAOC,YAAP,CAAoBE,OAApB,CAA4B,YAA5B,EAAyC,CAAzC;AACH;AACD,gBAAIC,WAAWnB,GAAGoB,QAAH,CAAYpB,GAAGqB,MAAH,CAAU,KAAKf,YAAf,EAA6BN,GAAGsB,EAAH,CAAM,CAAN,EAAS,CAAC,KAAKjB,UAAf,CAA7B,EAAyDkB,MAAzD,CAAgEvB,GAAGwB,kBAAH,EAAhE,CAAZ,EAAqGxB,GAAGyB,QAAH,CAAY,KAAKC,UAAjB,EAA4B,IAA5B,CAArG,CAAf;AACA,iBAAKC,IAAL,CAAUC,SAAV,CAAoBT,QAApB;AACH;AACJ,KA5BI;;AA8BL;AACAO,gBAAY,sBAAU;AAClB,YAAI,KAAKnB,MAAT,EAAgB;AACZ;AACA,iBAAKA,MAAL,GAAc,KAAd;AACA,gBAAIsB,SAAS7B,GAAGqB,MAAH,CAAU,KAAKf,YAAf,EAA6BN,GAAGsB,EAAH,CAAM,CAAN,EAAS,KAAKjB,UAAd,CAA7B,EAAwDkB,MAAxD,CAA+DvB,GAAG8B,iBAAH,EAA/D,CAAb;AACA,iBAAKH,IAAL,CAAUC,SAAV,CAAoBC,MAApB;AACH;AACJ,KAtCI;;AAwCLE,UAxCK,oBAwCK;AACN;AACA,aAAKJ,IAAL,CAAUK,EAAV,CAAahC,GAAGa,IAAH,CAAQoB,SAAR,CAAkBC,WAA/B,EAA4C,UAASC,CAAT,EAAY;AACpD,gBAAGC,OAAOC,OAAP,CAAeC,KAAf,IAAsB,CAAzB,EAA2B;AACvB,qBAAKxB,SAAL;AACAd,mBAAGuC,WAAH,CAAeC,IAAf,CAAoB,KAAKhC,SAAzB,EAAmC,KAAnC,EAA0CiC,SAASC,KAAT,GAAe,CAAzD;AACAC,2BAAW,YAAI;AACXP,2BAAOC,OAAP,CAAeO,WAAf,CAA2B,CAA3B;AACH,iBAFD,EAEE,KAAKtC,YAAL,GAAkB,IAFpB;AAGA,qBAAKM,OAAL,CAAaiC,YAAb,CAA0B,SAA1B,EAAqC/B,SAArC;AACH,aAPD,MAOK;AACDsB,uBAAOC,OAAP,CAAeS,WAAf,CAA2B,UAA3B;AACH;AACJ,SAXD,EAWE,IAXF;AAYH;AAtDI,CAAT","file":"DoorBottom.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\Kuangchi","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // 主角跳跃高度\r\n        jumpHeight: 0,\r\n        // 主角跳跃持续时间\r\n        jumpDuration: 0,\r\n        // 是否已经打开\r\n        isOpen: false,\r\n        audioClip:{\r\n            type: cc.AudioClip, \r\n            default: null,     \r\n        },\r\n        DoorTop: cc.Node\r\n    },\r\n\r\n    //开门\r\n    startOpen: function(){\r\n        if (!this.isOpen) {\r\n            //门未被打开过\r\n            this.isOpen = true;\r\n            if(cc.sys.localStorage.getItem('backToMain')==null){\r\n                cc.sys.localStorage.setItem('backToMain',1)\r\n            }\r\n            let jumpDown = cc.sequence(cc.moveBy(this.jumpDuration, cc.v2(0, -this.jumpHeight)).easing(cc.easeCubicActionOut()),cc.callFunc(this.startClose,this));\r\n            this.node.runAction(jumpDown);\r\n        }\r\n    },\r\n\r\n    //关门\r\n    startClose: function(){\r\n        if (this.isOpen){\r\n            // 门已经打开 | 可以关门s\r\n            this.isOpen = false;\r\n            let jumpUp = cc.moveBy(this.jumpDuration, cc.v2(0, this.jumpHeight)).easing(cc.easeCubicActionIn());\r\n            this.node.runAction(jumpUp);\r\n        }\r\n    },\r\n\r\n    onLoad () {\r\n        //点击开门\r\n        this.node.on(cc.Node.EventType.TOUCH_START, function(t) {\r\n            if(Global.PageMgr.state==1){\r\n                this.startOpen();\r\n                cc.audioEngine.play(this.audioClip,false,(GameData.audio+0))\r\n                setTimeout(()=>{\r\n                    Global.PageMgr.onClosePage(0)\r\n                },this.jumpDuration*1000)\r\n                this.DoorTop.getComponent('DoorTop').startOpen();\r\n            }else{\r\n                Global.PageMgr.showTipPage('时空转换器开启中')\r\n            }\r\n        },this);\r\n    },\r\n});\r\n"]}