{"version":3,"sources":["DoorTop.js"],"names":["cc","Class","extends","Component","properties","jumpHeight","jumpDuration","audioClip","type","AudioClip","default","isOpen","DoorBottom","Node","startOpen","sys","localStorage","getItem","setItem","jumpUp","sequence","moveBy","v2","easing","easeCubicActionOut","callFunc","startClose","node","runAction","jumpDown","easeCubicActionIn","onLoad","on","EventType","TOUCH_START","t","Global","PageMgr","state","audioEngine","play","GameData","audio","setTimeout","onClosePage","getComponent","showTipPage"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACAC,oBAAY,CAFJ;AAGR;AACAC,sBAAc,CAJN;AAKRC,mBAAU;AACNC,kBAAMR,GAAGS,SADH;AAENC,qBAAS;AAFH,SALF;AASR;AACAC,gBAAQ,KAVA;AAWRC,oBAAYZ,GAAGa;AAXP,KAHP;;AAiBL;AACAC,eAAW,qBAAU;AACjB,YAAI,CAAC,KAAKH,MAAV,EAAkB;AACd;AACA,iBAAKA,MAAL,GAAc,IAAd;AACA,gBAAGX,GAAGe,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,YAA5B,KAA2C,IAA9C,EAAmD;AAC/CjB,mBAAGe,GAAH,CAAOC,YAAP,CAAoBE,OAApB,CAA4B,YAA5B,EAAyC,CAAzC;AACH;AACD,gBAAIC,SAASnB,GAAGoB,QAAH,CAAYpB,GAAGqB,MAAH,CAAU,KAAKf,YAAf,EAA6BN,GAAGsB,EAAH,CAAM,CAAN,EAAS,KAAKjB,UAAd,CAA7B,EAAwDkB,MAAxD,CAA+DvB,GAAGwB,kBAAH,EAA/D,CAAZ,EAAoGxB,GAAGyB,QAAH,CAAY,KAAKC,UAAjB,EAA4B,IAA5B,CAApG,CAAb;AACA,iBAAKC,IAAL,CAAUC,SAAV,CAAoBT,MAApB;AACH;AACJ,KA5BI;;AA8BL;AACAO,gBAAY,sBAAU;AAClB,YAAI,KAAKf,MAAT,EAAiB;AACb;AACA,iBAAKA,MAAL,GAAc,KAAd;AACA,gBAAIkB,WAAW7B,GAAGqB,MAAH,CAAU,KAAKf,YAAf,EAA6BN,GAAGsB,EAAH,CAAM,CAAN,EAAS,CAAC,KAAKjB,UAAf,CAA7B,EAAyDkB,MAAzD,CAAgEvB,GAAG8B,iBAAH,EAAhE,CAAf;AACA,iBAAKH,IAAL,CAAUC,SAAV,CAAoBC,QAApB;AACH;AACJ,KAtCI;AAuCLE,UAvCK,oBAuCK;AACN;AACA,aAAKJ,IAAL,CAAUK,EAAV,CAAahC,GAAGa,IAAH,CAAQoB,SAAR,CAAkBC,WAA/B,EAA4C,UAASC,CAAT,EAAW;AACnD,gBAAGC,OAAOC,OAAP,CAAeC,KAAf,IAAsB,CAAzB,EAA2B;AACvB,qBAAKxB,SAAL;AACAd,mBAAGuC,WAAH,CAAeC,IAAf,CAAoB,KAAKjC,SAAzB,EAAmC,KAAnC,EAA0CkC,SAASC,KAAT,GAAe,CAAzD;AACAC,2BAAW,YAAI;AACXP,2BAAOC,OAAP,CAAeO,WAAf,CAA2B,CAA3B;AACH,iBAFD,EAEE,KAAKtC,YAAL,GAAkB,IAFpB;AAGA,qBAAKM,UAAL,CAAgBiC,YAAhB,CAA6B,YAA7B,EAA2C/B,SAA3C;AACH,aAPD,MAOK;AACDsB,uBAAOC,OAAP,CAAeS,WAAf,CAA2B,UAA3B;AACH;AACJ,SAXD,EAWE,IAXF;AAYH;AArDI,CAAT","file":"DoorTop.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\Kuangchi","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // 主角跳跃高度\r\n        jumpHeight: 0,\r\n        // 主角跳跃持续时间\r\n        jumpDuration: 0,\r\n        audioClip:{\r\n            type: cc.AudioClip, \r\n            default: null,     \r\n        },\r\n        // 是否已经打开\r\n        isOpen: false,\r\n        DoorBottom: cc.Node\r\n    },\r\n    \r\n    //开门\r\n    startOpen: function(){\r\n        if (!this.isOpen) {\r\n            //门未被打开过\r\n            this.isOpen = true;\r\n            if(cc.sys.localStorage.getItem('backToMain')==null){\r\n                cc.sys.localStorage.setItem('backToMain',1)\r\n            }\r\n            let jumpUp = cc.sequence(cc.moveBy(this.jumpDuration, cc.v2(0, this.jumpHeight)).easing(cc.easeCubicActionOut()),cc.callFunc(this.startClose,this));\r\n            this.node.runAction(jumpUp);\r\n        }\r\n    },\r\n\r\n    //关门\r\n    startClose: function(){\r\n        if (this.isOpen) {\r\n            // 门已经打开 | 可以关门\r\n            this.isOpen = false;\r\n            let jumpDown = cc.moveBy(this.jumpDuration, cc.v2(0, -this.jumpHeight)).easing(cc.easeCubicActionIn());\r\n            this.node.runAction(jumpDown);\r\n        }\r\n    },\r\n    onLoad () {\r\n        //点击开门\r\n        this.node.on(cc.Node.EventType.TOUCH_START, function(t){\r\n            if(Global.PageMgr.state==1){\r\n                this.startOpen();\r\n                cc.audioEngine.play(this.audioClip,false,(GameData.audio+0))\r\n                setTimeout(()=>{\r\n                    Global.PageMgr.onClosePage(0)\r\n                },this.jumpDuration*1000)\r\n                this.DoorBottom.getComponent('DoorBottom').startOpen();\r\n            }else{\r\n                Global.PageMgr.showTipPage('时空转换器开启中')\r\n            }\r\n        },this);\r\n    },\r\n});"]}