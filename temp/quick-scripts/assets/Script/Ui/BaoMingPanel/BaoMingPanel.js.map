{"version":3,"sources":["BaoMingPanel.js"],"names":["cc","Class","extends","Component","properties","label_saiqu","Label","editBox_zhandui","EditBox","editBox_name","editBox_card","editBox_phone","editBox_email","selectItem","Prefab","container_saiqu","Node","container_zhandui","scroll_saiqu","Panle","Panle2","Panle3","Panle4","label_email","label_name","label_zhandui","label_saiqu2","label_dianhua","label_zhengjian","label_gamename","game_item","container","scroll_zhandui","start","onEnable","showDivisionRegistrationRanking","active","removeAllChildren","Global","ProtocolMgr","queryGetGameSignRank","res","console","log","code","data","i","length","gameItemNode","instantiate","getComponent","setData","addChild","PageMgr","showTipPage","message","showApplyForTeamInformation","queryGetSignUPInfo","string","email","name","team_name","division_name","id_card_number","phone","showApplyForTeam","did","tid","queryDivisionList","on","EventType","TOUCH_END","id","closeScroll","queryGetGameSignList","game_name","showScroll","event","customData","submit","reqData","toString","game_id","submitBaoMing"],"mappings":"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","file":"BaoMingPanel.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\BaoMingPanel","sourcesContent":["\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        label_saiqu:cc.Label,\r\n        editBox_zhandui:cc.EditBox,\r\n        editBox_name:cc.EditBox,\r\n        editBox_card:cc.EditBox,\r\n        editBox_phone:cc.EditBox,\r\n        editBox_email:cc.EditBox,\r\n        selectItem:cc.Prefab,\r\n        container_saiqu:cc.Node,\r\n        container_zhandui:cc.Node,\r\n        scroll_saiqu:cc.Node,\r\n        Panle:cc.Node,\r\n        Panle2:cc.Node,\r\n        Panle3:cc.Node,\r\n        Panle4:cc.Node,\r\n        label_email:cc.Label,\r\n        label_name:cc.Label,\r\n        label_zhandui:cc.Label,\r\n        label_saiqu2:cc.Label,\r\n        label_dianhua:cc.Label,\r\n        label_zhengjian:cc.Label,\r\n        label_gamename:cc.Label,\r\n        game_item:cc.Prefab,\r\n        container:cc.Node,\r\n        scroll_zhandui:cc.Node\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    onEnable(){\r\n        this.showDivisionRegistrationRanking();\r\n    },\r\n\r\n    //展示赛区报名排行\r\n    showDivisionRegistrationRanking()\r\n    {\r\n        this.Panle.active = false;\r\n        this.Panle2.active = false;\r\n        this.Panle3.active = true;\r\n        this.Panle4.active = false;\r\n        this.container.removeAllChildren();\r\n        Global.ProtocolMgr.queryGetGameSignRank((res)=>{\r\n            console.log(res)\r\n            if(res.code==200){\r\n                let data = res.data;\r\n                for(let i = 0;i < data.length;i++){\r\n                    let gameItemNode = cc.instantiate(this.game_item);\r\n                    gameItemNode.getComponent(\"BaoMing_Item\").setData(data[i]);\r\n                    this.container.addChild(gameItemNode);\r\n                }\r\n            }else{\r\n                Global.PageMgr.showTipPage(res.message);\r\n            }\r\n        })\r\n        // this.showApplyForTeamInformation();\r\n    },\r\n    //展示战队信息\r\n    showApplyForTeamInformation()\r\n    {\r\n        this.Panle.active = false;\r\n        this.Panle2.active = true;\r\n        this.Panle3.active = false;\r\n        Global.ProtocolMgr.queryGetSignUPInfo((res)=>{\r\n            if(res.code==200){\r\n                let data = res.data\r\n                if(data)\r\n                {\r\n                    this.label_email.string = data.email;\r\n                    this.label_name.string = data.name;\r\n                    this.label_zhandui.string = data.team_name;\r\n                    this.label_saiqu2.string = data.division_name;\r\n                    this.label_gamename.string = data.id_card_number;\r\n                    this.label_dianhua.string = data.phone;\r\n                }\r\n            }\r\n            else{\r\n                this.showApplyForTeam();\r\n            }\r\n        })\r\n    },\r\n\r\n    //展示申请战队ui\r\n    showApplyForTeam()\r\n    {\r\n        this.Panle.active = true;\r\n        this.Panle2.active = false;\r\n        this.scroll_saiqu.active = false;\r\n        this.scroll_zhandui.active = false;\r\n        this.container_saiqu.removeAllChildren();\r\n        this.container_zhandui.removeAllChildren();\r\n        this.did = 0;\r\n        this.tid = 0;\r\n        this.label_saiqu.string = '选择赛区';\r\n        this.label_zhengjian.string = '比赛项目';\r\n        this.editBox_name.string = \"\";\r\n        this.editBox_email.string = \"\";\r\n        this.editBox_phone.string = \"\";\r\n        this.editBox_card.string = \"\";\r\n        this.editBox_zhandui.string = \"\";\r\n        Global.ProtocolMgr.queryDivisionList((res)=>{\r\n            if(res.code==200){\r\n                let data = res.data\r\n                console.log(data);\r\n                this.container_saiqu.removeAllChildren();\r\n                for(let i = 0;i<data.length;i++){\r\n                    let selectItem = cc.instantiate(this.selectItem);\r\n                    selectItem.getComponent(cc.Label).string = data[i].division_name;\r\n                    selectItem.on(cc.Node.EventType.TOUCH_END,()=>{\r\n                        this.label_saiqu.string = data[i].division_name;\r\n                        this.did = data[i].id;\r\n                        console.log(this.did);\r\n                        this.closeScroll();\r\n                    })\r\n                    this.container_saiqu.addChild(selectItem);\r\n                }\r\n            }else{\r\n                Global.PageMgr.showTipPage(res.message);\r\n            }\r\n        })\r\n\r\n        Global.ProtocolMgr.queryGetGameSignList((res)=>{\r\n            if(res.code==200){\r\n                let data = res.data\r\n                this.container_zhandui.removeAllChildren();\r\n                for(let i = 0;i<data.length;i++){\r\n                    let selectItem = cc.instantiate(this.selectItem);\r\n                    selectItem.getComponent(cc.Label).string = data[i].game_name;\r\n                    selectItem.on(cc.Node.EventType.TOUCH_END,()=>{\r\n                        this.label_zhengjian.string = data[i].game_name;\r\n                        this.tid = data[i].id;\r\n                        this.closeScroll();\r\n                    })\r\n                    this.container_zhandui.addChild(selectItem);\r\n                }\r\n            }else{\r\n                Global.PageMgr.showTipPage(res.message);\r\n            }\r\n        })\r\n    },\r\n\r\n    showScroll(event,customData){\r\n        switch (customData) {\r\n            case \"saiqu\":\r\n                this.scroll_saiqu.active = true;\r\n                break;\r\n            case \"zhandui\":\r\n                this.scroll_zhandui.active = true;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n\r\n    closeScroll(){\r\n        this.scroll_saiqu.active = false;\r\n        this.scroll_zhandui.active = false;\r\n    },\r\n\r\n    submit(){\r\n        if(this.did==0){\r\n            Global.PageMgr.showTipPage(\"还未选择赛区\");\r\n            return;\r\n        }\r\n        if(this.editBox_zhandui.string==\"\"){\r\n            Global.PageMgr.showTipPage(\"还未填写战队\");\r\n            return;\r\n        }\r\n        if(this.editBox_name.string==\"\"){\r\n            Global.PageMgr.showTipPage(\"还未填写姓名\");\r\n            return;\r\n        }\r\n        if(this.tid==0){\r\n            Global.PageMgr.showTipPage(\"还未选择游戏\");\r\n            return;\r\n        }\r\n        if(this.editBox_phone.string==\"\"){\r\n            Global.PageMgr.showTipPage(\"还未填写手机号\");\r\n            return;\r\n        }\r\n        if(this.editBox_email.string==\"\"){\r\n            Global.PageMgr.showTipPage(\"还未填写邮箱\");\r\n            return;\r\n        }\r\n        let reqData = {\r\n            name:this.editBox_name.string,\r\n            email:this.editBox_email.string,\r\n            phone:this.editBox_phone.string,\r\n            team_name :this.editBox_zhandui.string,\r\n            did:this.did.toString(),\r\n            game_id:this.tid.toString(),\r\n            // id_card_number:this.editBox_card.string,\r\n        }\r\n        console.log(\"选择的游戏是：\"+this.tid.toString());\r\n        console.log(\"选择的赛区是：\"+this.did.toString());\r\n        Global.ProtocolMgr.submitBaoMing(reqData,(res)=>{\r\n            console.log(res)\r\n            if(res.code==200){\r\n                // Global.PageMgr.showTipPage(\"报名成功\");\r\n                // Global.PageMgr.onClosePage(17);\r\n                this.Panle4.active = true;\r\n            }else{\r\n                Global.PageMgr.showTipPage(res.message);\r\n            }\r\n        })\r\n    },\r\n    // //返回界面\r\n    // onClickBack()\r\n    // {\r\n    //     this.Panle.active = false;\r\n    //     this.Panle2.active = false;\r\n    //     this.Panle3.active = true;\r\n    // },\r\n    // update (dt) {},\r\n});\r\n"]}