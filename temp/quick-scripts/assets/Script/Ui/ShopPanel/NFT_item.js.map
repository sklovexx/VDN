{"version":3,"sources":["NFT_item.js"],"names":["cc","Class","extends","Component","properties","icon_pic","Sprite","label_name","Label","label_prop1","label_prop2","label_prop3","label_fee","propId","start","setData","data","types","loader","load","url","icon","type","err","res","spriteFrame","SpriteFrame","e","console","warn","string","name","id","js","formatStr","fightingPower","physicalPower","wakanPower","parseFloat","price","toFixed","combat_value","spirit_value","intellect_value","buy","reqData","Global","ProtocolMgr","queryBuyPetAnimal","code","PageMgr","showTipPage","message"],"mappings":"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","file":"NFT_item.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\ShopPanel","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        icon_pic:cc.Sprite,\r\n        label_name:cc.Label,\r\n        label_prop1:cc.Label,\r\n        label_prop2:cc.Label,\r\n        label_prop3:cc.Label,\r\n        label_fee:cc.Label,\r\n        propId:1\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n    start () {\r\n\r\n    },\r\n    setData(data,types){\r\n        try {\r\n            cc.loader.load({url:data.icon,type:'png'},(err,res)=>{\r\n                this.icon_pic.spriteFrame = new cc.SpriteFrame(res)\r\n            })\r\n            // cc.loader.loadRes(\"imgs/\" + data.icon, cc.SpriteFrame, (err, sf)=>{\r\n            //     if (!err){\r\n            //         this.icon_pic.spriteFrame = sf;\r\n            //     }\r\n            // });\r\n        }catch (e) {\r\n            console.warn(e)\r\n        }\r\n        this.label_name.string = data.name;\r\n        if(types == null)\r\n        {\r\n            this.propId = data.id;\r\n            this.label_prop1.string = cc.js.formatStr(\"战力:%s\",data.fightingPower);\r\n            this.label_prop2.string = cc.js.formatStr(\"体力:%s\",data.physicalPower);\r\n            this.label_prop3.string = cc.js.formatStr(\"灵力:%s\",data.wakanPower);;\r\n            this.label_fee.string = cc.js.formatStr(\"%s\",parseFloat(data.price).toFixed(4));\r\n        }\r\n        else\r\n        {\r\n            this.propId = data.id;\r\n            this.label_prop1.string = cc.js.formatStr(\"战力:%s\",parseFloat(data.combat_value).toFixed(4));\r\n            this.label_prop2.string = cc.js.formatStr(\"体力:%s\",parseFloat(data.spirit_value).toFixed(4));\r\n            this.label_prop3.string = cc.js.formatStr(\"灵力:%s\",parseFloat(data.intellect_value).toFixed(4));\r\n        }\r\n    },\r\n    buy(){\r\n        // Global.PageMgr.pages[15].getComponent(\"BuyPanel\").propId = this.propId;\r\n        // Global.PageMgr.pages[15].getComponent(\"BuyPanel\").type = 1;\r\n        // Global.PageMgr.onOpenPage(15);\r\n        let reqData = {\r\n            id:this.propId,\r\n        }\r\n        Global.ProtocolMgr.queryBuyPetAnimal(reqData,(res)=>{\r\n            if(res.code==200){\r\n                Global.PageMgr.showTipPage(\"购买成功\");\r\n            }else{\r\n                Global.PageMgr.showTipPage(res.message);\r\n            }\r\n        });\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}