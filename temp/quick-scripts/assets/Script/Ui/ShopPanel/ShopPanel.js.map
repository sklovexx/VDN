{"version":3,"sources":["ShopPanel.js"],"names":["app","require","cc","Class","extends","Component","properties","NFT_item","Prefab","XHP_item","container","Node","label_Usdt","Label","btn_item","Sprite","onEnable","getShopList","reqData","Post","res","code","data","string","totalUsdt","event","customData","forEach","e","spriteFrame","loader","loadRes","SpriteFrame","err","sf","parseInt","removeAllChildren","Global","PageMgr","onClosePage","ProtocolMgr","queryNFTList","console","log","i","length","NFTItemNode","instantiate","getComponent","setData","addChild","showTipPage","message","queryXHPList","XHPItemNode","onOpenPage","onDisable","find","pages","active"],"mappings":"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","file":"ShopPanel.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\ShopPanel","sourcesContent":["let app = require('../../Util/appScript')\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        NFT_item:cc.Prefab,\r\n        XHP_item:cc.Prefab,\r\n        container:cc.Node,\r\n        label_Usdt:cc.Label,\r\n        btn_item:[cc.Sprite]\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    onEnable(){\r\n        this.getShopList(null,0);\r\n        let reqData = {};\r\n        app.Post('member/getMemberInfo',reqData,(res)=>{\r\n            if(res.code==200){\r\n                if(res.data)\r\n                    this.label_Usdt.string = res.data.totalUsdt;\r\n            }\r\n        });\r\n        // cc.find(\"Canvas/UserDataPanel\").active = true;\r\n        // lobal.ProtocolMgr.queryUserData();\r\n    },\r\n    getShopList(event,customData){\r\n        this.btn_item.forEach(e=>{\r\n            e.spriteFrame = null;\r\n        })\r\n        cc.loader.loadRes(\"imgs/按钮bg\", cc.SpriteFrame, (err, sf)=>{\r\n            if (!err){\r\n                this.btn_item[parseInt(customData)].spriteFrame = sf;\r\n            }\r\n        });\r\n        this.container.removeAllChildren();\r\n        switch (parseInt(customData)) {\r\n            case 0:\r\n                Global.PageMgr.onClosePage(6);\r\n                // cc.find('Canvas/ShopPanel/UserDataPanel').active = false;\r\n               \r\n                Global.ProtocolMgr.queryNFTList((res)=>{\r\n                    console.log(res)\r\n                    if(res.code==200){\r\n                        let data = res.data;\r\n                        for(let i = 0;i < data.length;i++){\r\n                            let NFTItemNode = cc.instantiate(this.NFT_item);\r\n                            NFTItemNode.getComponent(\"NFT_item\").setData(data[i]);\r\n                            this.container.addChild(NFTItemNode);\r\n                        }\r\n                    }else{\r\n                        Global.PageMgr.showTipPage(res.message);\r\n                    }\r\n                })\r\n                break;\r\n            case 1:\r\n                Global.PageMgr.onClosePage(6);\r\n                Global.ProtocolMgr.queryXHPList((res)=>{\r\n                    console.log(res)\r\n                    if(res.code==200){\r\n                        let data = res.data;\r\n                        for(let i = 0;i < data.length;i++){\r\n                            let XHPItemNode = cc.instantiate(this.XHP_item);\r\n                            XHPItemNode.getComponent(\"XHP_item\").setData(data[i]);\r\n                            this.container.addChild(XHPItemNode);\r\n                        }\r\n                    }else{\r\n                        Global.PageMgr.showTipPage(res.message);\r\n                    }\r\n                })\r\n                break;\r\n            case 2:\r\n                Global.PageMgr.onOpenPage(6);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n    onDisable(){\r\n        cc.find('Canvas/'+Global.pages[6]).active = false;\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}