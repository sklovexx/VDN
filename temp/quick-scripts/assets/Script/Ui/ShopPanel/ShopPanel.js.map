{"version":3,"sources":["ShopPanel.js"],"names":["app","require","cc","Class","extends","Component","properties","NFT_item","Prefab","XHP_item","container","Node","label_Usdt","Label","btn_item","Sprite","onEnable","getShopList","reqData","Post","res","code","data","string","totalUsdt","event","customData","forEach","e","spriteFrame","loader","loadRes","SpriteFrame","err","sf","parseInt","removeAllChildren","Global","PageMgr","onClosePage","ProtocolMgr","queryNFTList","console","log","i","length","NFTItemNode","instantiate","getComponent","setData","addChild","showTipPage","message","queryXHPList","XHPItemNode","onOpenPage","onDisable","find","pages","active"],"mappings":"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","file":"ShopPanel.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\ShopPanel","sourcesContent":["let app = require('../../Util/appScript')\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        NFT_item:cc.Prefab,\n        XHP_item:cc.Prefab,\n        container:cc.Node,\n        label_Usdt:cc.Label,\n        btn_item:[cc.Sprite]\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    onEnable(){\n        this.getShopList(null,0);\n        let reqData = {};\n        app.Post('member/getMemberInfo',reqData,(res)=>{\n            if(res.code==200){\n                if(res.data)\n                    this.label_Usdt.string = res.data.totalUsdt;\n            }\n        });\n        // cc.find(\"Canvas/UserDataPanel\").active = true;\n        // lobal.ProtocolMgr.queryUserData();\n    },\n    getShopList(event,customData){\n        this.btn_item.forEach(e=>{\n            e.spriteFrame = null;\n        })\n        cc.loader.loadRes(\"imgs/按钮bg\", cc.SpriteFrame, (err, sf)=>{\n            if (!err){\n                this.btn_item[parseInt(customData)].spriteFrame = sf;\n            }\n        });\n        this.container.removeAllChildren();\n        switch (parseInt(customData)) {\n            case 0:\n                Global.PageMgr.onClosePage(6);\n                // cc.find('Canvas/ShopPanel/UserDataPanel').active = false;\n               \n                Global.ProtocolMgr.queryNFTList((res)=>{\n                    console.log(res)\n                    if(res.code==200){\n                        let data = res.data;\n                        for(let i = 0;i < data.length;i++){\n                            let NFTItemNode = cc.instantiate(this.NFT_item);\n                            NFTItemNode.getComponent(\"NFT_item\").setData(data[i]);\n                            this.container.addChild(NFTItemNode);\n                        }\n                    }else{\n                        Global.PageMgr.showTipPage(res.message);\n                    }\n                })\n                break;\n            case 1:\n                Global.PageMgr.onClosePage(6);\n                Global.ProtocolMgr.queryXHPList((res)=>{\n                    console.log(res)\n                    if(res.code==200){\n                        let data = res.data;\n                        for(let i = 0;i < data.length;i++){\n                            let XHPItemNode = cc.instantiate(this.XHP_item);\n                            XHPItemNode.getComponent(\"XHP_item\").setData(data[i]);\n                            this.container.addChild(XHPItemNode);\n                        }\n                    }else{\n                        Global.PageMgr.showTipPage(res.message);\n                    }\n                })\n                break;\n            case 2:\n                Global.PageMgr.onOpenPage(6);\n                break;\n            default:\n                break;\n        }\n    },\n    onDisable(){\n        cc.find('Canvas/'+Global.pages[6]).active = false;\n    }\n    // update (dt) {},\n});\n"]}