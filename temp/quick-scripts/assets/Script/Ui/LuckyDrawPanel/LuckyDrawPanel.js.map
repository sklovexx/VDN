{"version":3,"sources":["LuckyDrawPanel.js"],"names":["cc","Class","extends","Component","properties","luckyDraw_item","Prefab","container","Node","Panle","Panle2","btn_item","Sprite","onLoad","onEnable","getGameList","goLuckyDrawUI","removeAllChildren","Global","ProtocolMgr","queryLuckDrawList","res","code","data","list","i","length","gameItemNode","instantiate","getComponent","setData","addChild","PageMgr","showTipPage","message","event","customData","forEach","e","spriteFrame","loader","loadRes","SpriteFrame","err","sf","parseInt","onClickBeganTheDetail","onClickBeganToDraw","index","active"],"mappings":";;;;;;AAAA;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,wBAAeL,GAAGM,MADV;AAERC,mBAAUP,GAAGQ,IAFL;AAGRC,eAAMT,GAAGQ,IAHD;AAIRE,gBAAOV,GAAGQ,IAJF;AAKRG,kBAAS,CAACX,GAAGY,MAAJ;AALD,KAHP;;AAWLC,UAXK,oBAWK,CACT,CAZI;AAcLC,YAdK,sBAcK;AACN,aAAKC,WAAL,CAAiB,IAAjB,EAAsB,CAAtB;AACH,KAhBI;AAkBLC,iBAlBK,2BAkBU;AAAA;;AACX,aAAKT,SAAL,CAAeU,iBAAf;AACAC,eAAOC,WAAP,CAAmBC,iBAAnB,CAAqC,GAArC,EAAyC,CAAzC,EAA2C,UAACC,GAAD,EAAO;AAC9C,gBAAGA,IAAIC,IAAJ,IAAU,GAAb,EAAiB;AACb,oBAAIC,OAAOF,IAAIE,IAAJ,CAASC,IAApB;AACA,qBAAI,IAAIC,IAAI,CAAZ,EAAcA,IAAIF,KAAKG,MAAvB,EAA8BD,GAA9B,EAAkC;AAC9B,wBAAIE,eAAe3B,GAAG4B,WAAH,CAAe,MAAKvB,cAApB,CAAnB;AACAsB,iCAAaE,YAAb,CAA0B,eAA1B,EAA2CC,OAA3C,CAAmDP,KAAKE,CAAL,CAAnD;AACA,0BAAKlB,SAAL,CAAewB,QAAf,CAAwBJ,YAAxB;AACH;AACJ,aAPD,MAOK;AACDT,uBAAOc,OAAP,CAAeC,WAAf,CAA2BZ,IAAIa,OAA/B;AACH;AACJ,SAXD;AAYH,KAhCI;AAkCLnB,eAlCK,uBAkCOoB,KAlCP,EAkCaC,UAlCb,EAkCwB;AAAA;;AACzB,aAAKzB,QAAL,CAAc0B,OAAd,CAAsB,aAAG;AACrBC,cAAEC,WAAF,GAAgB,IAAhB;AACH,SAFD;AAGAvC,WAAGwC,MAAH,CAAUC,OAAV,CAAkB,YAAlB,EAAgCzC,GAAG0C,WAAnC,EAAgD,UAACC,GAAD,EAAMC,EAAN,EAAW;AACvD,gBAAI,CAACD,GAAL,EAAS;AACL,uBAAKhC,QAAL,CAAckC,SAAST,UAAT,CAAd,EAAoCG,WAApC,GAAkDK,EAAlD;AACH;AACJ,SAJD;AAKA,gBAAQC,SAAST,UAAT,CAAR;AACI,iBAAK,CAAL;AACI,qBAAKU,qBAAL,CAA2B,IAA3B,EAAgC,CAAhC;AACA;AACJ,iBAAK,CAAL;AACI,qBAAKA,qBAAL,CAA2B,IAA3B,EAAgC,CAAhC;AACA,qBAAK9B,aAAL;AACA;AACJ;AACI;AATR;AAWH,KAtDI;;;AAwDL;AACA+B,sBAzDK,gCA0DL;AACI7B,eAAOc,OAAP,CAAeC,WAAf,CAA2B,gBAA3B,EAA4C,EAA5C;AACH,KA5DI;;;AA8DL;AACAa,yBA/DK,iCA+DiBX,KA/DjB,EA+DuBC,UA/DvB,EAgEL;AACI,YAAIY,QAAQH,SAAST,UAAT,CAAZ;AACA,aAAK3B,KAAL,CAAWwC,MAAX,GAAoBD,QAAQ,CAAR,GAAY,IAAZ,GAAiB,KAArC;AACA,aAAKtC,MAAL,CAAYuC,MAAZ,GAAqBD,SAAS,CAAT,GAAa,IAAb,GAAkB,KAAvC;AACA,YAAGA,SAAS,CAAZ,EACA;AACI,iBAAKhC,aAAL;AACH;AACJ;AAxEI,CAAT","file":"LuckyDrawPanel.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\LuckyDrawPanel","sourcesContent":["// let app = require('../../Util/appScript')\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        luckyDraw_item:cc.Prefab,\r\n        container:cc.Node,\r\n        Panle:cc.Node,\r\n        Panle2:cc.Node,\r\n        btn_item:[cc.Sprite]\r\n    },\r\n\r\n    onLoad () {\r\n    },\r\n\r\n    onEnable(){\r\n        this.getGameList(null,0);\r\n    },\r\n\r\n    goLuckyDrawUI(){\r\n        this.container.removeAllChildren();\r\n        Global.ProtocolMgr.queryLuckDrawList(100,1,(res)=>{\r\n            if(res.code==200){\r\n                let data = res.data.list;\r\n                for(let i = 0;i < data.length;i++){\r\n                    let gameItemNode = cc.instantiate(this.luckyDraw_item);\r\n                    gameItemNode.getComponent(\"LuckyDrawItem\").setData(data[i]);\r\n                    this.container.addChild(gameItemNode);\r\n                }\r\n            }else{\r\n                Global.PageMgr.showTipPage(res.message);\r\n            }\r\n        })\r\n    },\r\n\r\n    getGameList(event,customData){\r\n        this.btn_item.forEach(e=>{\r\n            e.spriteFrame = null;\r\n        })\r\n        cc.loader.loadRes(\"imgs/按钮bg2\", cc.SpriteFrame, (err, sf)=>{\r\n            if (!err){\r\n                this.btn_item[parseInt(customData)].spriteFrame = sf;\r\n            }\r\n        });\r\n        switch (parseInt(customData)) {\r\n            case 0:\r\n                this.onClickBeganTheDetail(null,1);\r\n                break;\r\n            case 1:\r\n                this.onClickBeganTheDetail(null,0);\r\n                this.goLuckyDrawUI();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n\r\n    //开始抽奖\r\n    onClickBeganToDraw()\r\n    {\r\n        Global.PageMgr.showTipPage(\"每周六下午5点,官方统一抽奖\",20); \r\n    },\r\n\r\n    //点击明显或者返回\r\n    onClickBeganTheDetail(event,customData)\r\n    {\r\n        var index = parseInt(customData);\r\n        this.Panle.active = index > 0 ? true:false;\r\n        this.Panle2.active = index <= 0 ? true:false;\r\n        if(index == 0)\r\n        {\r\n            this.goLuckyDrawUI();\r\n        }\r\n    },\r\n});\r\n"]}