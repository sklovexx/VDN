{"version":3,"sources":["HongBaoList.js"],"names":["cc","Class","extends","Component","properties","Item","Prefab","Content","Node","MaxCount","onLoad","director","GlobalEvent","on","onUpdateHongBaoListData","start","onEnable","clearContent","backPack","GameData","HongBaoList","i","node","instantiate","parent","getChildByName","getComponent","Label","string","nickname","amount","loader","load","url","headPortrait","type","err","res","spriteFrame","SpriteFrame","Sprite","length","children","destroy"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAAKL,GAAGM,MADA;AAERC,iBAAQP,GAAGQ,IAFH;AAGRC,kBAAS;AAHD,KAHP;;AASL;;AAEAC,UAXK,oBAWK;AACNV,WAAGW,QAAH,CAAYC,WAAZ,CAAwBC,EAAxB,CAA2B,iBAA3B,EAA6C,KAAKC,uBAAlD,EAA0E,IAA1E;AACH,KAbI;AAcLC,SAdK,mBAcI,CAER,CAhBI;AAiBLC,YAjBK,sBAiBK;AACN;AACA,aAAKF,uBAAL;AACH,KApBI;AAqBLA,2BArBK,qCAqBoB;AAAA;;AACrB,aAAKG,YAAL;AACA,YAAIC,WAAWC,SAASC,WAAxB;;AAFqB,mCAGbC,CAHa;AAIjB,gBAAIC,OAAOtB,GAAGuB,WAAH,CAAe,MAAKlB,IAApB,CAAX;AACAiB,iBAAKE,MAAL,GAAc,MAAKjB,OAAnB;AACAe,iBAAKG,cAAL,CAAoB,OAApB,EAA6BC,YAA7B,CAA0C1B,GAAG2B,KAA7C,EAAoDC,MAApD,GAA6DP,IAAE,CAA/D;AACAC,iBAAKG,cAAL,CAAoB,UAApB,EAAgCC,YAAhC,CAA6C1B,GAAG2B,KAAhD,EAAuDC,MAAvD,GAAgEV,SAASG,CAAT,EAAYQ,QAA5E;AACAP,iBAAKG,cAAL,CAAoB,OAApB,EAA6BC,YAA7B,CAA0C1B,GAAG2B,KAA7C,EAAoDC,MAApD,GAA6DV,SAASG,CAAT,EAAYS,MAAzE;AACA9B,eAAG+B,MAAH,CAAUC,IAAV,CAAe,EAACC,KAAIf,SAASG,CAAT,EAAYa,YAAjB,EAA8BC,MAAK,KAAnC,EAAf,EAAyD,UAACC,GAAD,EAAKC,GAAL,EAAW;AAChE,oBAAIC,cAAc,IAAItC,GAAGuC,WAAP,CAAmBF,GAAnB,CAAlB;AACAf,qBAAKG,cAAL,CAAoB,MAApB,EAA4BA,cAA5B,CAA2C,MAA3C,EAAmDC,YAAnD,CAAgE1B,GAAGwC,MAAnE,EAA2EF,WAA3E,GAAyFA,WAAzF;AACH,aAHD;AATiB;;AAGrB,aAAI,IAAIjB,IAAI,CAAZ,EAAcA,IAAEH,SAASuB,MAAzB,EAAgCpB,GAAhC,EAAoC;AAAA,kBAA5BA,CAA4B;AAUnC;AACJ,KAnCI;AAoCLJ,gBApCK,0BAoCS;AACV;AACA,YAAIyB,WAAW,KAAKnC,OAAL,CAAamC,QAA5B;AACA,aAAI,IAAIrB,IAAI,CAAZ,EAAcA,IAAEqB,SAASD,MAAzB,EAAgCpB,GAAhC,EAAoC;AAChCqB,qBAASrB,CAAT,EAAYsB,OAAZ;AACH;AACJ;AA1CI;AA2CL;AA3CJ","file":"HongBaoList.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\HongBao","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        Item:cc.Prefab,\r\n        Content:cc.Node,\r\n        MaxCount:200\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        cc.director.GlobalEvent.on(\"HongBaoListData\",this.onUpdateHongBaoListData,this)\r\n    },\r\n    start () {\r\n\r\n    },\r\n    onEnable(){\r\n        // Global.ProtocolMgr.queryHongBaoList();\r\n        this.onUpdateHongBaoListData()\r\n    },\r\n    onUpdateHongBaoListData(){\r\n        this.clearContent();\r\n        let backPack = GameData.HongBaoList;\r\n        for(let i = 0;i<backPack.length;i++){\r\n            let node = cc.instantiate(this.Item);\r\n            node.parent = this.Content;\r\n            node.getChildByName('Index').getComponent(cc.Label).string = i+1;\r\n            node.getChildByName('UserName').getComponent(cc.Label).string = backPack[i].nickname;\r\n            node.getChildByName('Count').getComponent(cc.Label).string = backPack[i].amount;\r\n            cc.loader.load({url:backPack[i].headPortrait,type:'png'},(err,res)=>{\r\n                let spriteFrame = new cc.SpriteFrame(res)\r\n                node.getChildByName('Mask').getChildByName('Icon').getComponent(cc.Sprite).spriteFrame = spriteFrame\r\n            })\r\n        }\r\n    },\r\n    clearContent(){\r\n        //清理列表\r\n        let children = this.Content.children;\r\n        for(let i = 0;i<children.length;i++){\r\n            children[i].destroy();\r\n        }\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}