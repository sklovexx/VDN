{"version":3,"sources":["FaHongBao.js"],"names":["cc","Class","extends","Component","properties","JinECount","LeiQuCount","JinE","Node","LeiQu","Tab","Prefab","LeiQuTab","onLoad","director","GlobalEvent","on","onUpdateFaHongBaoConfig","Global","ProtocolMgr","faHongBaoConfig","numText","node","getChildByName","getComponent","Label","curLeiQU","EventType","TOUCH_END","faHongBao","faHongBaos","GameData","FaHongBaoConfig","redPackAmounts","bombDigitals","i","instantiate","parent","string","length","onEnable","children","Toggle","isChecked","start","parseInt","data","code","PageMgr","closeLoadingPage","active","showTipPage2","message","showTipPage","JinEToggle","event","value","LeiQuToggle","console","log"],"mappings":"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","file":"FaHongBao.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\HongBao","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        JinECount:5,\n        LeiQuCount:10,\n        JinE:cc.Node,\n        LeiQu:cc.Node,\n        Tab:cc.Prefab,\n        LeiQuTab:cc.Prefab\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        cc.director.GlobalEvent.on(\"FaHongBaoConfig\",this.onUpdateFaHongBaoConfig,this);\n        Global.ProtocolMgr.faHongBaoConfig()\n        this.numText = this.node.getChildByName('Num').getComponent(cc.Label);\n        this.curLeiQU = 0;\n        this.node.getChildByName('发红包').on(cc.Node.EventType.TOUCH_END,this.faHongBao,this)\n        this.node.getChildByName('发5个红包').on(cc.Node.EventType.TOUCH_END,this.faHongBaos,this)\n    },\n    //更新发红包配置信息\n    onUpdateFaHongBaoConfig(){\n        let JinE = GameData.FaHongBaoConfig.redPackAmounts\n        let LeiQu = GameData.FaHongBaoConfig.bombDigitals\n        for(let i = 0;i<5;i++){\n            let node = cc.instantiate(this.Tab);\n            node.parent = this.JinE;\n            node.getChildByName('Label').getComponent(cc.Label).string = JinE[i];\n        }\n        for(let i = 0;i<LeiQu.length;i++){\n            let node = cc.instantiate(this.LeiQuTab);\n            node.parent = this.LeiQu;\n            node.getChildByName('Label').getComponent(cc.Label).string = LeiQu[i];\n        }\n    },\n    onEnable(){\n        if(this.JinE.children.length>0){\n            //初始化选项\n            this.JinE.children[0].getComponent(cc.Toggle).isChecked = true;\n            this.LeiQu.children[0].getComponent(cc.Toggle).isChecked = true;\n        }\n    },\n    start () {\n    },\n    //发送单个红包\n    faHongBao(){\n        Global.ProtocolMgr.faHongBao(this.curLeiQU,parseInt(this.numText.string),1,(data)=>{\n            if(data.code==200){\n                Global.PageMgr.closeLoadingPage();\n                this.node.active = false;\n            }else{\n                Global.PageMgr.closeLoadingPage();\n                Global.PageMgr.showTipPage2(data.message)\n            }\n        })\n    },\n    //发送五个红包\n    faHongBaos(){\n        Global.ProtocolMgr.faHongBao(this.curLeiQU,parseInt(this.numText.string),5,(data)=>{\n            if(data.code==200){\n                Global.PageMgr.closeLoadingPage();\n                this.node.active = false;\n            }else{\n                Global.PageMgr.closeLoadingPage();\n                Global.PageMgr.showTipPage(data.message)\n            }\n        })\n\n    },\n    //金额选择\n    JinEToggle(event){\n        let value = parseInt(event.node.getChildByName('Label').getComponent(cc.Label).string)\n        this.numText.string = value\n    },\n    //雷号选择\n    LeiQuToggle(event){\n        let value = parseInt(event.node.getChildByName('Label').getComponent(cc.Label).string)\n        console.log(value)\n        this.curLeiQU = value\n    },\n    // update (dt) {},\n});\n"]}