{"version":3,"sources":["SalePanel.js"],"names":["cc","Class","extends","Component","properties","item","Prefab","content","Node","start","onEnable","children","forEach","value","destroy","backPack","GameData","GuoShiData","sum","node","instantiate","parent","id","getChildByName","getComponent","Label","string","count","price","parseInt","dataFunc","queryValue","saleing","Global","ProtocolMgr","saleGuoShi","active","find","onPlayCoinAni","console","log","PageMgr","closeAllPages","showTipPage"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAAKL,GAAGM,MADA;AAERC,iBAAQP,GAAGQ;AAFH,KAHP;;AAQL;;AAEA;;AAEAC,SAZK,mBAYI,CAER,CAdI;AAeLC,YAfK,sBAeK;AAAA;;AACN,YAAIC,WAAW,KAAKJ,OAAL,CAAaI,QAA5B;AACAA,iBAASC,OAAT,CAAiB,iBAAQ;AACrBC,kBAAMC,OAAN;AACH,SAFD;AAGA,YAAIC,WAAWC,SAASC,UAAxB;AACA,YAAIC,MAAM,CAAV;AACAH,iBAASH,OAAT,CAAiB,iBAAS;AACtB,gBAAIO,OAAOnB,GAAGoB,WAAH,CAAe,MAAKf,IAApB,CAAX;AACAc,iBAAKE,MAAL,GAAc,MAAKd,OAAnB;AACA,gBAAIe,KAAKT,MAAMS,EAAN,GAAW,EAApB;AACAH,iBAAKI,cAAL,CAAoB,OAApB,EAA6BC,YAA7B,CAA0CxB,GAAGyB,KAA7C,EAAoDC,MAApD,GAA6Db,MAAMc,KAAnE;AACA,gBAAIC,QAAQC,SAASC,SAASC,UAAT,CAAoB,SAApB,EAA8B,OAA9B,EAAsCT,EAAtC,CAAT,IAAoDT,MAAMc,KAAtE;AACAT,mBAAKU,KAAL;AACAT,iBAAKI,cAAL,CAAoB,OAApB,EAA6BC,YAA7B,CAA0CxB,GAAGyB,KAA7C,EAAoDC,MAApD,GAA6D,OAAKE,KAAL,GAAW,KAAxE;AACH,SARD;AASA,aAAKT,IAAL,CAAUI,cAAV,CAAyB,YAAzB,EAAuCC,YAAvC,CAAoDxB,GAAGyB,KAAvD,EAA8DC,MAA9D,GAAuE,UAAQR,GAAR,GAAY,KAAnF;AACH,KAhCI;AAiCLc,WAjCK,qBAiCI;AAAA;;AACLC,eAAOC,WAAP,CAAmBC,UAAnB,CAA8B,YAAI;AAC9B,mBAAKhB,IAAL,CAAUiB,MAAV,GAAmB,KAAnB;AACApC,eAAGqC,IAAH,CAAQ,iBAAR,EAA2Bb,YAA3B,CAAwC,UAAxC,EAAoDc,aAApD,CAAkE,YAAI;AAClEC,wBAAQC,GAAR,CAAY,MAAZ;AACH,aAFD;AAGAD,oBAAQC,GAAR,CAAY,MAAZ;AACAP,mBAAOQ,OAAP,CAAeC,aAAf;AACAT,mBAAOQ,OAAP,CAAeE,WAAf,CAA2B,QAA3B;AACH,SARD;AASH;AACD;;AA5CK,CAAT","file":"SalePanel.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\NongChang","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        item:cc.Prefab,\n        content:cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n\n    },\n    onEnable(){\n        let children = this.content.children;\n        children.forEach(value =>{\n            value.destroy();\n        })\n        let backPack = GameData.GuoShiData;\n        let sum = 0;\n        backPack.forEach(value => {\n            let node = cc.instantiate(this.item);\n            node.parent = this.content;\n            let id = value.id + '';\n            node.getChildByName('Count').getComponent(cc.Label).string = value.count\n            let price = parseInt(dataFunc.queryValue('zhongzi',\"price\",id))*value.count\n            sum+=price;\n            node.getChildByName('Price').getComponent(cc.Label).string = '可售'+price+'ECC'\n        })\n        this.node.getChildByName('TotalPrice').getComponent(cc.Label).string = '当前可售出'+sum+'ECC'\n    },\n    saleing(){\n        Global.ProtocolMgr.saleGuoShi(()=>{\n            this.node.active = false;\n            cc.find('Canvas/GainGold').getComponent('GainGold').onPlayCoinAni(()=>{\n                console.log('获得金币')\n            })\n            console.log('卖出果实')\n            Global.PageMgr.closeAllPages()\n            Global.PageMgr.showTipPage('成功售出果实')\n        })\n    }\n    // update (dt) {},\n});\n"]}