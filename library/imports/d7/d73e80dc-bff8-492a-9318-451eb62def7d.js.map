{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\ddz\\scripts\\hallscene\\prefabs_script/assets\\ddz\\scripts\\hallscene\\prefabs_script\\quick_join.js"],"names":["cc","Class","extends","Component","properties","label","Label","start","myglobal","socket","requestConfig","err","result","console","log","TipsLabel","find","getComponent","string","setTimeout","JSON","stringify","bottom","onMatchresult","data","hallScene","emit","playerData","rate","director","loadScene","_quick_join","global","room_para","roomLevel","request_quickjoin","node","destroy","onButtonClick","event","customData"],"mappings":"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","file":"quick_join.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\ddz\\scripts\\hallscene\\prefabs_script","sourcesContent":["import myglobal from \"../../mygolbal.js\"\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        label:[cc.Label]\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n        myglobal.socket.requestConfig((err,result)=>{\r\n            if (err!=0){\r\n                console.log(\"requestConfig err:\"+err)\r\n                let TipsLabel = cc.find(\"ROOT_UI/container/TipsLabel\").getComponent(cc.Label)\r\n                TipsLabel.string = result\r\n                setTimeout(()=>{\r\n                    TipsLabel.string = ''\r\n                },2000)\r\n            }else{\r\n                console.log(\"requestConfig\" + JSON.stringify(result))\r\n                this.label[0].string = result['1'].bottom\r\n                this.label[1].string = result['2'].bottom\r\n                this.label[2].string = result['3'].bottom\r\n                this.label[3].string = result['4'].bottom\r\n            }\r\n        })\r\n        myglobal.socket.onMatchresult((data)=>{\r\n            console.log(\"onMatchresult\" + JSON.stringify(data))\r\n            let hallScene = cc.find(\"ROOT_UI\");\r\n            hallScene.emit('hideLoading')\r\n            //网络数据包\r\n            myglobal.playerData.bottom = data.bottom\r\n            myglobal.playerData.rate = data.rate\r\n            let TipsLabel = cc.find(\"ROOT_UI/container/TipsLabel\").getComponent(cc.Label)\r\n            TipsLabel.string = '正在加入房间。。。'\r\n            cc.director.loadScene(\"gameScene\",()=>{\r\n                TipsLabel.string = ''\r\n            }) \r\n        })\r\n    },\r\n\r\n    _quick_join(rate){\r\n        if(rate<0 || rate>4){\r\n            console.log(\"create room rate error\"+ rate)\r\n            return\r\n        }\r\n\r\n        var global = 0\r\n        if (rate==1){\r\n            global = 10\r\n        }else if(rate==2){\r\n            global = 20\r\n        }else if(rate==3){\r\n            global = 30\r\n        }else if(rate==4){\r\n            global = 40\r\n        }\r\n\r\n        var room_para = {\r\n            roomLevel:rate\r\n        }\r\n        myglobal.socket.request_quickjoin(room_para,(err,result)=>{\r\n            let hallScene = cc.find(\"ROOT_UI\");\r\n            if (err!=0){\r\n                console.log(\"quickjoin err:\"+err)\r\n                hallScene.emit('hideLoading') \r\n                let TipsLabel = cc.find(\"ROOT_UI/container/TipsLabel\").getComponent(cc.Label)\r\n                TipsLabel.string = result\r\n                setTimeout(()=>{\r\n                    TipsLabel.string = ''\r\n                },2000)\r\n                this.node.destroy() \r\n            }else{\r\n                console.log(\"quickjoin\" + JSON.stringify(result))\r\n                hallScene.emit('showLoading')\r\n                this.node.destroy()  \r\n            }\r\n        })\r\n    },\r\n\r\n    // update (dt) {},\r\n    onButtonClick(event,customData){\r\n        switch(customData){\r\n            case \"_quick_join_1\":\r\n                  this._quick_join(1)\r\n                  break\r\n            case \"_quick_join_2\":\r\n                  this._quick_join(2)\r\n                  break\r\n            case \"_quick_join_3\":\r\n                  this._quick_join(3)\r\n                  break\r\n            case \"_quick_join_4\":\r\n                  this._quick_join(4)\r\n                  break\r\n            case \"_quick_join_close\":\r\n                  this.node.destroy() \r\n                break       \r\n            default:\r\n                break\r\n        }\r\n\r\n    },\r\n});\r\n"]}