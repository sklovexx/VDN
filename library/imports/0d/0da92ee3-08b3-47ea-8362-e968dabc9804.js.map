{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\ddz\\scripts\\gameScene/assets\\ddz\\scripts\\gameScene\\winPanel.js"],"names":["cc","Class","extends","Component","properties","userList","Node","audio","default","type","AudioClip","onLoad","myglobal","playerData","accountID","housemanageid","node","getChildByName","active","audioEngine","play","initData","data","console","warn","forEach","v","i","allPlayerData","e","accountid","account","getComponent","Label","string","nick_name","rate","amount","change","master_accountid","loader","load","url","avatarUrl","err","tex","log","message","Sprite","spriteFrame","SpriteFrame","bind","start","close","destroy","quitRoom","socket","request_quit_room","JSON","stringify","director","loadScene","ready","requestReady","gamebeforeUI","parent","emit"],"mappings":"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","file":"winPanel.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\ddz\\scripts\\gameScene","sourcesContent":["import myglobal from \"../mygolbal.js\"\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        userList:[cc.Node],\n        audio:{\n            default:null,\n            type:cc.AudioClip\n        },\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        if(myglobal.playerData.accountID==myglobal.playerData.housemanageid){\n            this.node.getChildByName('准备').active = false\n        }\n        cc.audioEngine.play(this.audio)\n    },\n    initData(data){\n        console.warn(data)\n        data.forEach((v,i) => {\n            myglobal.allPlayerData.forEach(e=>{\n                if(e.accountid==v.account){\n                    if(e.accountid==myglobal.playerData.accountID){\n                        this.userList[i].getChildByName('me').active=true\n                    }\n                    this.userList[i].getChildByName('nickName').getComponent(cc.Label).string = e.nick_name;\n                    this.userList[i].getChildByName('beishu').getComponent(cc.Label).string = myglobal.playerData.rate;\n                    this.userList[i].getChildByName('score').getComponent(cc.Label).string = v.amount;\n                    this.userList[i].getChildByName('DSSC').getComponent(cc.Label).string = v.change;\n                    if(e.accountid==myglobal.playerData.master_accountid){\n                        this.userList[i].getChildByName('地主标志').active = true;\n                        this.userList[i].getChildByName('beishu').getComponent(cc.Label).string = myglobal.playerData.rate*2;\n                    }\n                    cc.loader.load({url: e.avatarUrl, type: 'jpg'},function(err,tex) {\n                    if (err) {\n                        console.log(err.message || err);\n                        return;\n                    }          \n                    this.userList[i].getChildByName('mask').getChildByName('icon').getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(tex);        \n                    }.bind(this));\n                }\n            })\n        });\n    },\n    start () {\n        \n    },\n    close(){\n        this.node.destroy()\n    },\n    quitRoom(){\n        myglobal.socket.request_quit_room({},function(err,data){\n            if(err!=0){\n                console.log(\"requestStart err\"+err)\n            }else{\n                console.log(\"requestStart data\"+ JSON.stringify(data))\n                this.node.destroy()\n                cc.director.loadScene(\"hallScene\")\n            }\n        }.bind(this))\n    },\n    ready(){\n        myglobal.socket.requestReady()\n        var gamebeforeUI = this.node.parent.getChildByName(\"gamebeforeUI\")\n        gamebeforeUI.emit('ready')\n        this.node.destroy()\n    }\n    // update (dt) {},\n});\n"]}