{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\LuckyDrawPanel/assets\\Script\\Ui\\LuckyDrawPanel\\LuckyDrawPanel.js"],"names":["cc","Class","extends","Component","properties","luckyDraw_item","Prefab","container","Node","Panle","Panle2","Panle3","pageSum","pageSum2","btn_item","Sprite","onLoad","onEnable","getGameList","goLuckyDrawUI","Global","ProtocolMgr","queryLuckDrawList","res","code","data","list","length","PageMgr","showTipPage","removeAllChildren","i","gameItemNode","instantiate","getComponent","setData","addChild","message","event","customData","forEach","e","spriteFrame","loader","loadRes","SpriteFrame","err","sf","parseInt","onClickBeganTheDetail","onClickBeganToDraw","onClickSweepstakesRules","active","index","onClickDown","onClickUp"],"mappings":"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","file":"LuckyDrawPanel.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\LuckyDrawPanel","sourcesContent":["// let app = require('../../Util/appScript')\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        luckyDraw_item:cc.Prefab,\r\n        container:cc.Node,\r\n        Panle:cc.Node,\r\n        Panle2:cc.Node,\r\n        Panle3:cc.Node,\r\n        pageSum:1,\r\n        pageSum2:1,\r\n        btn_item:[cc.Sprite]\r\n    },\r\n\r\n    onLoad () {\r\n    },\r\n\r\n    onEnable(){\r\n        this.pageSum = 1;\r\n        this.getGameList(null,0);\r\n    },\r\n\r\n    goLuckyDrawUI(){\r\n        Global.ProtocolMgr.queryLuckDrawList(20,this.pageSum,(res)=>{\r\n            if(res.code==200){\r\n                let data = res.data.list;\r\n\r\n                if(data.length == 0)\r\n                {\r\n                    if(this.pageSum != 1)\r\n                    {\r\n                        Global.PageMgr.showTipPage(\"已经是最后页了\"); \r\n                    }\r\n                    this.pageSum = this.pageSum2 + 1;\r\n                    return;\r\n                }\r\n                this.pageSum2 = this.pageSum;\r\n                if(this.pageSum != 1)\r\n                {\r\n                    Global.PageMgr.showTipPage(\"刷新成功！\"); \r\n                }\r\n                this.container.removeAllChildren();\r\n                for(let i = 0;i < data.length;i++){\r\n                    let gameItemNode = cc.instantiate(this.luckyDraw_item);\r\n                    gameItemNode.getComponent(\"LuckyDrawItem\").setData(data[i]);\r\n                    this.container.addChild(gameItemNode);\r\n                }\r\n            }else{\r\n                Global.PageMgr.showTipPage(res.message);\r\n            }\r\n        })\r\n    },\r\n\r\n    getGameList(event,customData){\r\n        this.btn_item.forEach(e=>{\r\n            e.spriteFrame = null;\r\n        })\r\n        cc.loader.loadRes(\"imgs/按钮bg2\", cc.SpriteFrame, (err, sf)=>{\r\n            if (!err){\r\n                this.btn_item[parseInt(customData)].spriteFrame = sf;\r\n            }\r\n        });\r\n        switch (parseInt(customData)) {\r\n            case 0:\r\n                this.onClickBeganTheDetail(null,1);\r\n                break;\r\n            case 1:\r\n                this.onClickBeganTheDetail(null,0);\r\n                this.goLuckyDrawUI();\r\n                break;\r\n            case 2:\r\n                this.onClickBeganTheDetail(null,2);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n\r\n    //开始抽奖\r\n    onClickBeganToDraw()\r\n    {\r\n        Global.PageMgr.showTipPage(\"每周六下午5点,官方统一抽奖\",20); \r\n    },\r\n    //点击抽奖规则\r\n    onClickSweepstakesRules()\r\n    {\r\n        this.onClickBeganTheDetail(null,2);\r\n        this.Panle3.active = true;\r\n    },\r\n    //点击明显或者返回\r\n    onClickBeganTheDetail(event,customData)\r\n    {\r\n        var index = parseInt(customData);\r\n        this.Panle.active = index == 1 ? true:false;\r\n        this.Panle2.active = index == 0 ? true:false;\r\n        this.Panle3.active = index == 2 ? true:false;\r\n        // if(index == 0)\r\n        // {\r\n        //     this.goLuckyDrawUI();\r\n        // }\r\n    },\r\n\r\n    onClickDown()\r\n    {\r\n        if(this.pageSum > 2)\r\n        {\r\n            this.pageSum -=1;\r\n        }\r\n        else\r\n        {\r\n            this.pageSum = 1;\r\n            Global.PageMgr.showTipPage(\"已经是首页了\"); \r\n        }\r\n        this.goLuckyDrawUI();\r\n    },\r\n\r\n    onClickUp()\r\n    {\r\n        this.pageSum +=1;\r\n        this.goLuckyDrawUI();\r\n    },\r\n});\r\n"]}