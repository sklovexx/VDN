{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\ddz\\scripts\\hallscene\\prefabs_script/assets\\ddz\\scripts\\hallscene\\prefabs_script\\creatRoom.js"],"names":["cc","Class","extends","Component","properties","label","Label","start","myglobal","socket","requestConfig","err","result","console","log","TipsLabel","find","getComponent","string","setTimeout","JSON","stringify","bottom","_createroom","rate","global","room_para","request_creatroom","playerData","director","loadScene","onButtonClick","event","customData","node","destroy"],"mappings":"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","file":"creatRoom.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\ddz\\scripts\\hallscene\\prefabs_script","sourcesContent":["import myglobal from \"../../mygolbal.js\"\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        label:[cc.Label]\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n        myglobal.socket.requestConfig((err,result)=>{\n            if (err!=0){\n                console.log(\"create_room err:\"+err)\n                let TipsLabel = cc.find(\"ROOT_UI/container/TipsLabel\").getComponent(cc.Label)\n                TipsLabel.string = result\n                setTimeout(()=>{\n                    TipsLabel.string = ''\n                },2000)\n            }else{\n                console.log(\"create_room\" + JSON.stringify(result))\n                this.label[0].string = result['1'].bottom\n                this.label[1].string = result['2'].bottom\n                this.label[2].string = result['3'].bottom\n                this.label[3].string = result['4'].bottom\n            }\n        })\n    },\n\n    _createroom(rate){\n        if(rate<0 || rate>4){\n            console.log(\"create room rate error\"+ rate)\n            return\n        }\n\n        var global = 0\n        if (rate==1){\n            global = 10\n        }else if(rate==2){\n            global = 20\n        }else if(rate==3){\n            global = 30\n        }else if(rate==4){\n            global = 40\n        }\n\n        var room_para = {\n            global:global,\n            rate:rate\n        }\n        //播放一个等待动画\n        myglobal.socket.request_creatroom(room_para,(err,result)=>{\n            if (err!=0){\n                console.log(\"create_room err:\"+err)\n                let TipsLabel = cc.find(\"ROOT_UI/container/TipsLabel\").getComponent(cc.Label)\n                TipsLabel.string = result\n                setTimeout(()=>{\n                    TipsLabel.string = ''\n                },2000)\n            }else{\n                console.log(\"create_room\" + JSON.stringify(result))\n                //网络数据包\n                myglobal.playerData.bottom = result.bottom\n                myglobal.playerData.rate = result.rate\n                cc.director.loadScene(\"gameScene\")\n            }\n        })\n    },\n\n    // update (dt) {},\n    onButtonClick(event,customData){\n        switch(customData){\n            case \"create_room_1\":\n                  this._createroom(1)\n                  break\n            case \"create_room_2\":\n                  this._createroom(2)\n                  break\n            case \"create_room_3\":\n                  this._createroom(3)\n                  break\n            case \"create_room_4\":\n                  this._createroom(4)\n                  break\n            case \"create_room_close\":\n                  this.node.destroy() \n                break       \n            default:\n                break\n        }\n        this.node.destroy() \n\n    }\n\n});\n"]}