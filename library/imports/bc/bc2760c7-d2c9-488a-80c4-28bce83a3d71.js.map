{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\views/assets\\NiuNiu\\script\\views\\AlertBindFBCtrl.js"],"names":["ViewBase","require","DataMgr","Utils","cc","Class","extends","properties","btnLogin","Button","btnCollect","btnClose","labelCoins","Label","_showType","showType","type","Integer","set","t","setType","get","act","node","active","onLoad","string","getThousandSeparatorString","GlobalNiuNiu","config","BIND_FB_COINS","onEnable","eventMgr","on","EVENT_BIND_FB_SUC","onBindFbSuc","onDisable","off","onBtnLoginFb","gameMgr","loginFb","onBtnCollect","uiUpdater","updateUserCoins","onBtnClose"],"mappings":";;;;AAAA;;;;AAIA;;AAEA,IAAIA,WAAWC,QAAQ,sBAAR,CAAf;AACA,IAAIC,UAAUD,QAAQ,qBAAR,CAAd;AACA,IAAIE,QAAQF,QAAQ,wBAAR,CAAZ;;AAEAG,GAAGC,KAAH,CAAS;AACLC,aAASN,QADJ;;AAGLO,gBAAY;AACRC,kBAAUJ,GAAGK,MADL;AAERC,oBAAYN,GAAGK,MAFP;AAGRE,kBAAUP,GAAGK,MAHL;AAIRG,oBAAYR,GAAGS,KAJP;;AAMRC,mBAAW,CANH;AAORC,kBAAS;AACLC,kBAAMZ,GAAGa,OADJ;AAELC,eAFK,eAEDC,CAFC,EAEC;AACF,qBAAKC,OAAL,CAAaD,CAAb;AACH,aAJI;AAKLE,eALK,iBAKA;AACD,uBAAO,KAAKP,SAAZ;AACH;AAPI;AAPD,KAHP;;AAqBL;;;;AAIAM,WAzBK,mBAyBGD,CAzBH,EAyBK;AACN,aAAKL,SAAL,GAAiBK,CAAjB;AACA,YAAIG,MAAM,KAAV;AACA,YAAIH,KAAK,CAAT,EAAW;AACPG,kBAAM,IAAN;AACH;AACD,aAAKd,QAAL,CAAce,IAAd,CAAmBC,MAAnB,GAA4BF,GAA5B;AACA,aAAKX,QAAL,CAAcY,IAAd,CAAmBC,MAAnB,GAA4BF,GAA5B;AACA,aAAKZ,UAAL,CAAgBa,IAAhB,CAAqBC,MAArB,GAA8B,CAACF,GAA/B;AACH,KAlCI;AAoCLG,UApCK,oBAoCG;AACJ,aAAKb,UAAL,CAAgBc,MAAhB,GAAyB,MAAMvB,MAAMwB,0BAAN,CAAiCC,aAAaC,MAAb,CAAoBC,aAArD,CAA/B;AACH,KAtCI;AAwCLC,YAxCK,sBAwCK;AACNH,qBAAaI,QAAb,CAAsBC,EAAtB,CAAyBL,aAAaC,MAAb,CAAoBK,iBAA7C,EAAgE,KAAKC,WAArE,EAAkF,IAAlF;AAEH,KA3CI;AA6CLC,aA7CK,uBA6CM;AACPR,qBAAaI,QAAb,CAAsBK,GAAtB,CAA0BT,aAAaC,MAAb,CAAoBK,iBAA9C,EAAiE,KAAKC,WAAtE,EAAmF,IAAnF;AACH,KA/CI;AAiDLA,eAjDK,yBAiDQ;AACT,aAAKf,OAAL,CAAa,CAAb;AACH,KAnDI;AAqDLkB,gBArDK,0BAqDS;AACVV,qBAAaW,OAAb,CAAqBC,OAArB,CAA6B,IAA7B;AACH,KAvDI;AAyDLC,gBAzDK,0BAyDS;AACVb,qBAAac,SAAb,CAAuBC,eAAvB;AACA,aAAKC,UAAL;AACH;AA5DI,CAAT","file":"AlertBindFBCtrl.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\views","sourcesContent":["/**\r\n * Created by skyxu on 2018/7/19.\r\n */\r\n\r\n\"use strict\";\r\n\r\nlet ViewBase = require(\"./../common/ViewBase\");\r\nlet DataMgr = require(\"./../common/DataMgr\");\r\nlet Utils = require(\"./../common/UtilsOther\");\r\n\r\ncc.Class({\r\n    extends: ViewBase,\r\n\r\n    properties: {\r\n        btnLogin: cc.Button,\r\n        btnCollect: cc.Button,\r\n        btnClose: cc.Button,\r\n        labelCoins: cc.Label,\r\n\r\n        _showType: 0,\r\n        showType:{\r\n            type: cc.Integer,\r\n            set(t){\r\n                this.setType(t);\r\n            },\r\n            get(){\r\n                return this._showType;\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param t{0:login 1:collect}\r\n     */\r\n    setType(t){\r\n        this._showType = t;\r\n        let act = false;\r\n        if (t <= 0){\r\n            act = true;\r\n        }\r\n        this.btnLogin.node.active = act;\r\n        this.btnClose.node.active = act;\r\n        this.btnCollect.node.active = !act;\r\n    },\r\n\r\n    onLoad(){\r\n        this.labelCoins.string = \"+\" + Utils.getThousandSeparatorString(GlobalNiuNiu.config.BIND_FB_COINS);\r\n    },\r\n\r\n    onEnable(){\r\n        GlobalNiuNiu.eventMgr.on(GlobalNiuNiu.config.EVENT_BIND_FB_SUC, this.onBindFbSuc, this);\r\n\r\n    },\r\n\r\n    onDisable(){\r\n        GlobalNiuNiu.eventMgr.off(GlobalNiuNiu.config.EVENT_BIND_FB_SUC, this.onBindFbSuc, this);\r\n    },\r\n\r\n    onBindFbSuc(){\r\n        this.setType(1);\r\n    },\r\n\r\n    onBtnLoginFb(){\r\n        GlobalNiuNiu.gameMgr.loginFb(true);\r\n    },\r\n\r\n    onBtnCollect(){\r\n        GlobalNiuNiu.uiUpdater.updateUserCoins();\r\n        this.onBtnClose();\r\n    }\r\n});\r\n"]}