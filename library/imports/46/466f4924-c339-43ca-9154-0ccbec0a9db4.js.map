{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\components/assets\\Script\\components\\GainGold.js"],"names":["cc","Class","extends","Component","properties","coinpre","Prefab","coinNode","Node","createcoin","random1","random2","createTime","standingTime","coinSpeed","onLoad","onPlayCoinAni","callback","tempPlayer","v2","i","pre","instantiate","parent","node","setPosition","rannumx","Math","floor","random","rannumy","runAction","moveBy","scheduleOnce","stopAllActions","finshend","callFunc","destroy","pos","getPosition","coinpos","playTime","sub","mag","sequence","moveTo","x","y","start"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACAC,iBAASL,GAAGM,MAFJ;AAGR;AACAC,kBAAUP,GAAGQ,IAJL;AAKR;AACAC,oBAAY,EANJ;AAOR;AACAC,iBAAQ,CAAC,GARD;AASRC,iBAAQ,GATA;AAUR;AACAC,oBAAY,IAXJ;AAYR;AACAC,sBAAc,GAbN;AAcR;AACAC,mBAAW;AAfH,KAHP;;AAqBL;;AAEAC,UAvBK,oBAuBK,CACT,CAxBI;AAyBLC,iBAzBK,yBAyBSC,QAzBT,EAyBmB;AAAA;;AACpB,YAAIC,aAAalB,GAAGmB,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAjB;;AADoB,mCAEXC,CAFW;AAGhB,gBAAIC,MAAMrB,GAAGsB,WAAH,CAAe,MAAKjB,OAApB,CAAV;AACAgB,gBAAIE,MAAJ,GAAa,MAAKC,IAAlB;AACAH,gBAAII,WAAJ,CAAgBP,UAAhB;AACA,gBAAIQ,UAAUC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,MAAiB,MAAKlB,OAAL,GAAe,MAAKD,OAApB,GAA8B,CAA/C,IAAoD,MAAKA,OAApE,CAAd;AACA,gBAAIoB,UAAUH,KAAKC,KAAL,CAAWD,KAAKE,MAAL,MAAiB,MAAKlB,OAAL,GAAe,MAAKD,OAApB,GAA8B,CAA/C,IAAoD,GAApD,GAA0D,MAAKA,OAAL,GAAe,GAApF,CAAd;AACAW,gBAAIU,SAAJ,CAAc/B,GAAGgC,MAAH,CAAU,MAAKpB,UAAf,EAA2Bc,OAA3B,EAAoCI,OAApC,CAAd;AACA,kBAAKG,YAAL,CAAkB,YAAM;AACpBZ,oBAAIa,cAAJ;AACA,oBAAIC,WAAWnC,GAAGoC,QAAH,CAAY,YAAY;AACnCf,wBAAIgB,OAAJ;AACA;AACA,wBAAIjB,KAAK,KAAKX,UAAL,GAAkB,CAA3B,EAA8B;AAC1B;AACA,6BAAKwB,YAAL,CAAkB,YAAM;AACpBhB;AACH,yBAFD,EAEG,GAFH;AAGH;AACJ,iBATc,QAAf;AAUA,oBAAIqB,MAAMjB,IAAIkB,WAAJ,EAAV;AACA,oBAAIC,UAAU,MAAKjC,QAAL,CAAcgC,WAAd,EAAd;AACA,oBAAIE,WAAWH,IAAII,GAAJ,CAAQF,OAAR,EAAiBG,GAAjB,KAAyB,MAAK7B,SAA7C;AACAO,oBAAIU,SAAJ,CAAc/B,GAAG4C,QAAH,CAAY5C,GAAG6C,MAAH,CAAUJ,QAAV,EAAoBD,QAAQM,CAA5B,EAA+BN,QAAQO,CAAvC,CAAZ,EAAuDZ,QAAvD,CAAd;AACH,aAhBD,EAgBG,MAAKtB,YAAL,GAAoB,MAAKD,UAhB5B;AATgB;;AAEpB,aAAK,IAAIQ,IAAI,CAAb,EAAgBA,IAAI,KAAKX,UAAzB,EAAqCW,GAArC,EAA0C;AAAA,kBAAjCA,CAAiC;AAyBzC;AACJ,KArDI;AAsDL4B,SAtDK,mBAsDI,CAER;AAxDI;;AA0DL;AA1DJ","file":"GainGold.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\components","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        //飞的金币预制\r\n        coinpre: cc.Prefab,\r\n        //目标节点\r\n        coinNode: cc.Node,\r\n        //生成金币个数\r\n        createcoin: 20,\r\n        //随机范围(random1~random2之间)\r\n        random1:-200,\r\n        random2:200,\r\n        //随机范围(random1~random2之间)\r\n        createTime: 0.15,\r\n        //停留时间\r\n        standingTime: 0.2,\r\n        //金币移动速度\r\n        coinSpeed: 1000\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n    },\r\n    onPlayCoinAni(callback) {\r\n        let tempPlayer = cc.v2(0,0)\r\n        for (let i = 0; i < this.createcoin; i++) {\r\n            let pre = cc.instantiate(this.coinpre)\r\n            pre.parent = this.node\r\n            pre.setPosition(tempPlayer)\r\n            let rannumx = Math.floor(Math.random() * (this.random2 - this.random1 + 1) + this.random1)\r\n            let rannumy = Math.floor(Math.random() * (this.random2 - this.random1 + 1) / 1.5 + this.random1 / 1.5)\r\n            pre.runAction(cc.moveBy(this.createTime, rannumx, rannumy))\r\n            this.scheduleOnce(() => {\r\n                pre.stopAllActions()\r\n                let finshend = cc.callFunc(function () {\r\n                    pre.destroy()\r\n                    // this.coinNode.getComponent(cc.Animation).play()\r\n                    if (i == this.createcoin - 1) {\r\n                        //结束\r\n                        this.scheduleOnce(() => {\r\n                            callback()\r\n                        }, 0.5)\r\n                    }\r\n                }, this);\r\n                let pos = pre.getPosition()\r\n                let coinpos = this.coinNode.getPosition()\r\n                let playTime = pos.sub(coinpos).mag() / this.coinSpeed\r\n                pre.runAction(cc.sequence(cc.moveTo(playTime, coinpos.x, coinpos.y), finshend))\r\n            }, this.standingTime + this.createTime);\r\n\r\n        }\r\n    },\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}