{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\common/assets\\NiuNiu\\script\\common\\GlobalNiuNiu.js"],"names":["window","GlobalNiuNiu","UiUpdater","require","GCONFIG","AudioMgr","IapMgr","DataMgr","ViewMgr","UtilsCross","NetProxy","connectState","eventMgr","cc","EventTarget","uiUpdater","gameMgr","assetMgr","effectMgr","config","audioMgr","tips","iapMgr","getInstance","dataMgr","viewMgr","utilsCross","netProxy","init","preloadScene","_This","sceneName","onLoaded","onProgress","director","info","_getSceneUuid","emit","Director","EVENT_BEFORE_SCENE_LOADING","loader","load","uuid","type","e","a","call","error","asset","errorID","message","Error","loadScene","callback","EVENT_CHANGE_SCENE"],"mappings":";;;;AAAA;;;;AAIA;;AAEAA,OAAOC,YAAP,GAAsBD,OAAOC,YAAP,IAAuB,EAA7C;;AAEA,IAAIC,YAAYC,QAAQ,aAAR,CAAhB;AACA,IAAIC,UAAUD,QAAQ,WAAR,CAAd;AACA,IAAIE,WAAWF,QAAQ,YAAR,CAAf;AACA,IAAIG,SAASH,QAAQ,UAAR,CAAb;AACA,IAAII,UAAUJ,QAAQ,WAAR,CAAd;AACA,IAAIK,UAAUL,QAAQ,WAAR,CAAd;AACA,IAAIM,aAAaN,QAAQ,cAAR,CAAjB;AACA,IAAIO,WAAWP,QAAQ,0BAAR,CAAf;AACAF,aAAaU,YAAb,GAA4B,KAA5B;AACI;;;;AAIJV,aAAaW,QAAb,GAAwB,IAAIC,GAAGC,WAAP,EAAxB;;AAEA;AACAb,aAAac,SAAb,GAAyB,IAAIb,SAAJ,EAAzB;;AAEA;AACAD,aAAae,OAAb,GAAuB,IAAvB;;AAEA;AACAf,aAAagB,QAAb,GAAwB,IAAxB;;AAEAhB,aAAaiB,SAAb,GAAyB,IAAzB;;AAEAjB,aAAakB,MAAb,GAAsBf,OAAtB;;AAEA;AACAH,aAAamB,QAAb,GAAwB,IAAxB;;AAEAnB,aAAaoB,IAAb,GAAoB,IAApB;;AAEApB,aAAaqB,MAAb,GAAsBhB,OAAOiB,WAAP,EAAtB;;AAEAtB,aAAauB,OAAb,GAAuBjB,QAAQgB,WAAR,EAAvB;;AAEAtB,aAAawB,OAAb,GAAuBjB,QAAQe,WAAR,EAAvB;;AAEAtB,aAAayB,UAAb,GAA0BjB,UAA1B;;AAEAR,aAAa0B,QAAb,GAAwB,IAAIjB,QAAJ,EAAxB;AACAT,aAAa0B,QAAb,CAAsBC,IAAtB;;AAEA;;;;;;;AAOA3B,aAAa4B,YAAb,GAA4B,UAASC,KAAT,EAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,UAArC,EAAiD;AACzE,QAAIC,WAAWrB,GAAGqB,QAAlB;AACA,QAAIC,OAAOD,SAASE,aAAT,CAAuBL,SAAvB,CAAX;AACA,QAAII,IAAJ,EAAU;AACND,iBAASG,IAAT,CAAcxB,GAAGyB,QAAH,CAAYC,0BAA1B,EAAqDR,SAArD;AACAlB,WAAG2B,MAAH,CAAUC,IAAV,CAAe;AACXC,kBAAMP,KAAKO,IADA;AAEXC,kBAAM;AAFK,SAAf,EAGG,QAAQV,UAAR,GAAqB,IAArB,GAA4B,UAASW,CAAT,EAAYC,CAAZ,EAAe;AAC1CZ,0BAAcA,WAAWa,IAAX,CAAgBhB,KAAhB,EAAuBc,CAAvB,EAA0BC,CAA1B,CAAd;AACH,SALD,EAKG,UAASE,KAAT,EAAgBC,KAAhB,EAAuB;AACtBD,qBAASlC,GAAGoC,OAAH,CAAW,IAAX,EAAiBlB,SAAjB,EAA4BgB,MAAMG,OAAlC,CAAT;AACAlB,wBAAYA,SAASe,KAAT,EAAgBC,KAAhB,CAAZ;AACH,SARD;AASH,KAXD,MAWO;AACH,YAAID,QAAQ,gCAAgChB,SAAhC,GAA4C,4CAAxD;AACAC,oBAAYA,SAAS,IAAImB,KAAJ,CAAUJ,KAAV,CAAT,CAAZ;AACAlC,WAAGkC,KAAH,CAAS,mBAAmBA,KAA5B;AACH;AACJ,CAnBD;;AAqBA9C,aAAamD,SAAb,GAAyB,UAASrB,SAAT,EAAmBsB,QAAnB,EAA4B;AACjDpD,iBAAaW,QAAb,CAAsByB,IAAtB,CAA2BpC,aAAakB,MAAb,CAAoBmC,kBAA/C;AACA,QAAGD,QAAH,EAAY;AACRxC,WAAGqB,QAAH,CAAYkB,SAAZ,CAAsBrB,SAAtB,EAAgCsB,QAAhC;AACH,KAFD,MAEK;AACDxC,WAAGqB,QAAH,CAAYkB,SAAZ,CAAsBrB,SAAtB;AACH;AACJ,CAPD","file":"GlobalNiuNiu.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\common","sourcesContent":["/**\n * Created by skyxu on 2018/3/13.\n */\n\n\"use strict\";\n\nwindow.GlobalNiuNiu = window.GlobalNiuNiu || {};\n\nlet UiUpdater = require(\"./UiUpdater\");\nlet GCONFIG = require(\"./GCONFIG\");\nlet AudioMgr = require(\"./AudioMgr\");\nlet IapMgr = require(\"./IAPMgr\");\nlet DataMgr = require(\"./DataMgr\");\nlet ViewMgr = require(\"./ViewMgr\");\nlet UtilsCross = require(\"./UtilsCross\");\nlet NetProxy = require(\"./../net/socket/NetProxy\");\nGlobalNiuNiu.connectState = false;\n    /**\n * 全局事件管理器, 收发事件统一使用\n * esp: GlobalNiuNiu.eventMgr.on(\"event\",function(){});\n */\nGlobalNiuNiu.eventMgr = new cc.EventTarget();\n\n// 用来刷新ui\nGlobalNiuNiu.uiUpdater = new UiUpdater();\n\n// 常驻节点，用来管理游戏流程\nGlobalNiuNiu.gameMgr = null;\n\n// 用来管理游戏assets（prefab etc.)\nGlobalNiuNiu.assetMgr = null;\n\nGlobalNiuNiu.effectMgr = null;\n\nGlobalNiuNiu.config = GCONFIG;\n\n// 用来管理游戏音频播放\nGlobalNiuNiu.audioMgr = null;\n\nGlobalNiuNiu.tips = null;\n\nGlobalNiuNiu.iapMgr = IapMgr.getInstance();\n\nGlobalNiuNiu.dataMgr = DataMgr.getInstance();\n\nGlobalNiuNiu.viewMgr = ViewMgr.getInstance();\n\nGlobalNiuNiu.utilsCross = UtilsCross;\n\nGlobalNiuNiu.netProxy = new NetProxy();\nGlobalNiuNiu.netProxy.init();\n\n/**\n * hack preloadScene for add progress callback\n * @param _This\n * @param sceneName\n * @param onLoaded\n * @param onProgress\n */\nGlobalNiuNiu.preloadScene = function(_This, sceneName, onLoaded, onProgress) {\n    let director = cc.director;\n    let info = director._getSceneUuid(sceneName);\n    if (info) {\n        director.emit(cc.Director.EVENT_BEFORE_SCENE_LOADING,sceneName);\n        cc.loader.load({\n            uuid: info.uuid,\n            type: \"uuid\"\n        }, null == onProgress ? null : function(e, a) {\n            onProgress && onProgress.call(_This, e, a);\n        }, function(error, asset) {\n            error && cc.errorID(1215, sceneName, error.message);\n            onLoaded && onLoaded(error, asset);\n        });\n    } else {\n        let error = 'Can not preload the scene \"' + sceneName + '\" because it is not in the build settings.';\n        onLoaded && onLoaded(new Error(error));\n        cc.error(\"preloadScene: \" + error);\n    }\n};\n\nGlobalNiuNiu.loadScene = function(sceneName,callback){\n    GlobalNiuNiu.eventMgr.emit(GlobalNiuNiu.config.EVENT_CHANGE_SCENE);\n    if(callback){\n        cc.director.loadScene(sceneName,callback);\n    }else{\n        cc.director.loadScene(sceneName);\n    }\n};\n"]}