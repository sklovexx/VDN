{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\Friend/assets\\Script\\Ui\\Friend\\Friend.js"],"names":["cc","Class","extends","Component","properties","item","Prefab","content","Node","onLoad","director","GlobalEvent","on","onUpdateFriendData","start","backPack","GameData","FriendData","forEach","node","instantiate","parent","loader","load","e","url","err","res","spriteFrame","SpriteFrame","getChildByName","getComponent","Sprite","Label","string","name","state","off","EventType","TOUCH_END","Global","ProtocolMgr","queryFriendNongChang","onEnable","queryFriend","onDisable","children","destroy"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAAKL,GAAGM,MADA;AAERC,iBAAQP,GAAGQ;AAFH,KAHP;;AAQL;;AAEAC,UAVK,oBAUK;AACNT,WAAGU,QAAH,CAAYC,WAAZ,CAAwBC,EAAxB,CAA2B,YAA3B,EAAwC,KAAKC,kBAA7C,EAAgE,IAAhE;AACH,KAZI;AAcLC,SAdK,mBAcI,CAER,CAhBI;AAiBLD,sBAjBK,gCAiBe;AAAA;;AAChB,YAAIE,WAAWC,SAASC,UAAxB;AACAF,iBAASG,OAAT,CAAiB,aAAI;AACjB,gBAAIC,OAAOnB,GAAGoB,WAAH,CAAe,MAAKf,IAApB,CAAX;AACAc,iBAAKE,MAAL,GAAc,MAAKd,OAAnB;AACAP,eAAGsB,MAAH,CAAUC,IAAV,CAAeC,EAAEC,GAAjB,EAAqB,UAACC,GAAD,EAAKC,GAAL,EAAW;AAC5B,oBAAIC,cAAc,IAAI5B,GAAG6B,WAAP,CAAmBF,GAAnB,CAAlB;AACAR,qBAAKW,cAAL,CAAoB,MAApB,EAA4BC,YAA5B,CAAyC/B,GAAGgC,MAA5C,EAAoDJ,WAApD,GAAkEA,WAAlE;AACH,aAHD;AAIAT,iBAAKW,cAAL,CAAoB,MAApB,EAA4BC,YAA5B,CAAyC/B,GAAGiC,KAA5C,EAAmDC,MAAnD,GAA4DV,EAAEW,IAA9D;AACAhB,iBAAKW,cAAL,CAAoB,OAApB,EAA6BC,YAA7B,CAA0C/B,GAAGiC,KAA7C,EAAoDC,MAApD,GAA6DV,EAAEY,KAAF,IAAW,CAAX,GAAe,KAAf,GAAqB,EAAlF;AACAjB,iBAAKkB,GAAL,CAASrC,GAAGQ,IAAH,CAAQ8B,SAAR,CAAkBC,SAA3B;AACApB,iBAAKP,EAAL,CAAQZ,GAAGQ,IAAH,CAAQ8B,SAAR,CAAkBC,SAA1B,EAAoC,YAAI;AACpCC,uBAAOC,WAAP,CAAmBC,oBAAnB;AACH,aAFD;AAGH,SAbD;AAcH,KAjCI;AAkCLC,YAlCK,sBAkCK;AACNH,eAAOC,WAAP,CAAmBG,WAAnB;AACH,KApCI;AAqCLC,aArCK,uBAqCM;AACP,YAAIC,WAAW,KAAKvC,OAAL,CAAauC,QAA5B;AACAA,iBAAS5B,OAAT,CAAiB,aAAI;AACjBM,cAAEuB,OAAF;AACH,SAFD;AAGH;AA1CI;AA2CL;AA3CJ","file":"Friend.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\Friend","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        item:cc.Prefab,\r\n        content:cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        cc.director.GlobalEvent.on('FriendData',this.onUpdateFriendData,this)\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n    onUpdateFriendData(){\r\n        let backPack = GameData.FriendData;\r\n        backPack.forEach(e =>{\r\n            let node = cc.instantiate(this.item);\r\n            node.parent = this.content;\r\n            cc.loader.load(e.url,(err,res)=>{\r\n                let spriteFrame = new cc.SpriteFrame(res);\r\n                node.getChildByName('Icon').getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n            })\r\n            node.getChildByName('Name').getComponent(cc.Label).string = e.name;\r\n            node.getChildByName('State').getComponent(cc.Label).string = e.state == 1 ? '可偷取':'';\r\n            node.off(cc.Node.EventType.TOUCH_END);\r\n            node.on(cc.Node.EventType.TOUCH_END,()=>{\r\n                Global.ProtocolMgr.queryFriendNongChang()\r\n            },this);\r\n        })\r\n    },\r\n    onEnable(){\r\n        Global.ProtocolMgr.queryFriend()\r\n    },\r\n    onDisable(){\r\n        let children = this.content.children;\r\n        children.forEach(e =>{\r\n            e.destroy()\r\n        })\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}