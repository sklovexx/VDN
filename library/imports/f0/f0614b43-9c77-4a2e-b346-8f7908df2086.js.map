{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\common/assets\\NiuNiu\\script\\common\\DataMgr.js"],"names":["DataObject","require","GCONFIG","DataMgr","cc","Class","ctor","playerObj","PlayerObject","iapObj","IapObject","settingObj","SettingObject","guideObj","GuideObject","chestObj","ChestObject","achieveObj","AchieveObject","statics","instance","getInstance","loadDataFromLocal","log","tmp","sys","localStorage","getItem","KEY_PLAYERDATA","parse","JSON","KEY_IAPDATA","KEY_SETTING","KEY_GAME_GUIDE_DATA","KEY_CHEST_DATA","KEY_ACHIEVE_DATA","saveDataToLocal","setItem","toString","module","exports"],"mappings":"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","file":"DataMgr.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\common","sourcesContent":["/**\n * Created by skyxu on 2018/3/13.\n */\n\n\"use strict\";\n\nlet DataObject = require(\"./DataObject\");\nlet GCONFIG = require(\"./GCONFIG\");\n\nlet DataMgr = cc.Class({\n\n    ctor(){\n        this.playerObj = new DataObject.PlayerObject();\n        this.iapObj = new DataObject.IapObject();\n        this.settingObj = new DataObject.SettingObject();\n        this.guideObj = new DataObject.GuideObject();\n        this.chestObj = new DataObject.ChestObject();\n        this.achieveObj = new DataObject.AchieveObject();\n    },\n\n    statics: {\n        instance: null,\n        getInstance: function () {\n            if (DataMgr.instance == null) {\n                DataMgr.instance = new DataMgr();\n            }\n            return DataMgr.instance;\n        }\n    },\n\n    /**\n     * 读取本地保存的数据\n     */\n    loadDataFromLocal() {\n\n        cc.log(\"...load local data start...\");\n\n        let tmp = cc.sys.localStorage.getItem(GCONFIG.KEY_PLAYERDATA);\n        if (tmp) {\n            this.playerObj.parse(JSON.parse(tmp));\n        }\n\n        tmp = cc.sys.localStorage.getItem(GCONFIG.KEY_IAPDATA);\n        if (tmp) {\n            this.iapObj.parse(JSON.parse(tmp));\n        }\n\n        tmp = cc.sys.localStorage.getItem(GCONFIG.KEY_SETTING);\n        if (tmp) {\n            this.settingObj.parse(JSON.parse(tmp));\n        }\n\n        tmp = cc.sys.localStorage.getItem(GCONFIG.KEY_GAME_GUIDE_DATA);\n        if (tmp) {\n            this.guideObj.parse(JSON.parse(tmp));\n        }\n\n        tmp = cc.sys.localStorage.getItem(GCONFIG.KEY_CHEST_DATA);\n        if (tmp){\n            this.chestObj.parse(JSON.parse(tmp));\n        }\n\n        tmp = cc.sys.localStorage.getItem(GCONFIG.KEY_ACHIEVE_DATA);\n        if (tmp){\n            this.achieveObj.parse(JSON.parse(tmp));\n        }\n\n        cc.log(\"...load local data finished...\");\n\n    },\n\n    /**\n     * 保存数据到本地\n     */\n    saveDataToLocal() {\n\n        cc.log(\"...save data to local start...\");\n\n        cc.sys.localStorage.setItem(GCONFIG.KEY_PLAYERDATA, this.playerObj.toString());\n        cc.sys.localStorage.setItem(GCONFIG.KEY_IAPDATA, this.iapObj.toString());\n        cc.sys.localStorage.setItem(GCONFIG.KEY_SETTING, this.settingObj.toString());\n        cc.sys.localStorage.setItem(GCONFIG.KEY_GAME_GUIDE_DATA, this.guideObj.toString());\n        cc.sys.localStorage.setItem(GCONFIG.KEY_CHEST_DATA, this.chestObj.toString());\n        cc.sys.localStorage.setItem(GCONFIG.KEY_ACHIEVE_DATA, this.achieveObj.toString());\n\n        cc.log(\"...save data to local finished...\");\n\n    }\n});\n\nmodule.exports = DataMgr;"]}