{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\宝宝游戏单页面/assets\\Script\\Ui\\宝宝游戏单页面\\TiXianPanel.js"],"names":["app","require","cc","Class","extends","Component","properties","label_Usdt","Label","label_daojishi","editBox_dizhi","EditBox","editBox_sum","editBox_code","toggle","Toggle","btn_code","Node","onEnable","string","active","reqData","Post","res","code","data","js","formatStr","parseFloat","totalUsdt","toFixed","username","isChecked","typeid","timeSum","_time","start","onClickWithdrawal","Global","PageMgr","showTipPage","address","number","type","ProtocolMgr","queryWithdrawApply","onClosePage","message","onClickWithdrawalList","onOpenPage","ToggleEvent","toggleSelf","customEventData","onClickcopyTextToClip","jsb","copyTextToClipboard","GetVerificationCode","account","verifyType","queryGetAuthCode","update","dt"],"mappings":"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","file":"TiXianPanel.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\宝宝游戏单页面","sourcesContent":["\r\nlet app = require('../../Util/appScript')\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        label_Usdt:cc.Label,\r\n        label_daojishi:cc.Label,\r\n        editBox_dizhi:cc.EditBox,\r\n        editBox_sum:cc.EditBox,\r\n        editBox_code:cc.EditBox,\r\n        toggle: cc.Toggle,\r\n        btn_code:cc.Node,\r\n    },\r\n    // onLoad () {},\r\n    onEnable(){\r\n        this.editBox_dizhi.string = \"\";//地址\r\n        this.editBox_sum.string = \"\";//数量\r\n        this.editBox_code.string = \"\";\r\n        this.label_daojishi.string = \"\";\r\n        this.btn_code.active = true;\r\n        let reqData = {};\r\n        app.Post('member/getMemberInfo',reqData,(res)=>{\r\n            if(res.code==200){\r\n                if(res.data){\r\n                    this.label_Usdt.string = cc.js.formatStr(\"%s\",parseFloat(res.data.totalUsdt).toFixed(4));\r\n                    this.username = res.data.username;\r\n                }\r\n            }\r\n        });\r\n        this.toggle.isChecked = true;\r\n        this.typeid = 1;\r\n        this.timeSum = 0;\r\n        this._time = -1;\r\n    },\r\n    start () {\r\n\r\n    },\r\n\r\n    //提现\r\n    onClickWithdrawal()\r\n    {\r\n        if(this.editBox_dizhi.string == \"\")\r\n        {\r\n            Global.PageMgr.showTipPage(\"请输入地址\"); \r\n            return;\r\n        }else if(this.editBox_sum.string == \"\")\r\n        {\r\n            Global.PageMgr.showTipPage(\"请输入数量\"); \r\n            return;\r\n        }else if(this.editBox_code.string == \"\")\r\n        {\r\n            Global.PageMgr.showTipPage(\"请输入验证码\"); \r\n            return;\r\n        }else if(parseFloat(this.editBox_sum.string) > parseFloat(this.label_Usdt.string))\r\n        {\r\n            Global.PageMgr.showTipPage(\"可用额度不够\"); \r\n            return;\r\n        }else if(this.typeid < 0)\r\n        {\r\n            Global.PageMgr.showTipPage(\"请选择提币类型\"); \r\n            return;\r\n        }\r\n        let reqData = {\r\n            address:this.editBox_dizhi.string,//地址\r\n            number:this.editBox_sum.string,//数量\r\n            type:this.typeid,//类型: 0->bep20 USDT; 1->TRC20 USDT;\r\n            code:this.editBox_code.string,\r\n        }\r\n\r\n        Global.ProtocolMgr.queryWithdrawApply(reqData,(res)=>{\r\n            if(res.code==200){\r\n                Global.PageMgr.onClosePage(12);\r\n            }else{\r\n                Global.PageMgr.showTipPage(res.message);\r\n            }\r\n        });\r\n    },\r\n    //提现列表\r\n    onClickWithdrawalList()\r\n    {\r\n        Global.PageMgr.onOpenPage(27);\r\n    },\r\n    //选择货币类型\r\n    ToggleEvent( toggleSelf, customEventData )\r\n    { \r\n        this.typeid = customEventData;\r\n    },\r\n    \r\n    //粘贴\r\n    onClickcopyTextToClip()\r\n    {\r\n        jsb.copyTextToClipboard\r\n    },\r\n    \r\n    //获取验证码\r\n    GetVerificationCode()\r\n    {\r\n        if(this._time > 0)\r\n        {\r\n            Global.PageMgr.showTipPage(\"请稍后再试\"); \r\n            return;\r\n        }\r\n        let reqData = {\r\n            account:this.username,\r\n            verifyType:1,\r\n        };\r\n        \r\n        Global.ProtocolMgr.queryGetAuthCode(reqData,(res)=>{\r\n            if(res.code==200){\r\n                this._time = 120;\r\n                this.label_daojishi.string = cc.js.formatStr(\"倒计时:%s\",this._time);\r\n                this.btn_code.active = false;\r\n                Global.PageMgr.showTipPage(\"已发送验证码到注册账号邮箱!\");\r\n            }\r\n            else\r\n            {\r\n                Global.PageMgr.showTipPage(res.message);\r\n            }\r\n        });\r\n        \r\n    },\r\n    update (dt) {\r\n        if(this._time > 0)\r\n        {\r\n            this.timeSum += dt;\r\n            if(this.timeSum >= 1)\r\n            {\r\n                this._time -= 1;\r\n                this.timeSum = 0;\r\n                this.label_daojishi.string = cc.js.formatStr(\"倒计时:%s\",this._time);\r\n            }\r\n        }else if(this._time == 0)\r\n        {\r\n            this.btn_code.active = true;\r\n            this.label_daojishi.string =\"\";\r\n            this._time = -1;\r\n        }\r\n\r\n    },\r\n});\r\n"]}