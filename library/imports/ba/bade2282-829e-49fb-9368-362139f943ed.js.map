{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\Main.js"],"names":["cc","Class","extends","Component","properties","content","Node","MainPage","Prefab","_thime","toggles","onLoad","OnOpenPage","event","customEventData","Global","PageMgr","onOpenPage","start","ResourceMgr","undefined","find","getComponent","ProtocolMgr","state","node","instantiate","parent","toggleChange","isChecked","GameData","audio","playBgAudio","target","Sprite","enabled","audioEngine","pauseAll","fanHui","active","queryNongChangUserData","filterClick","console","log","tabLanguager","curLanguage","i18n","init","updateSceneRenderers","logOut","sys","localStorage","removeItem","closeAllPages","onClickSubmitLogout","reqData","querySubmitLogout","res","code","SocketMgr","closeSocket","update","dt","command","username","window","DEFAULT_userID","send_data"],"mappings":"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","file":"Main.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["// let  i18n = require('LanguageData');\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        content:cc.Node,\r\n        MainPage:cc.Prefab,\r\n        _thime:0,\r\n        toggles:cc.Node\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    onLoad () {\r\n        // i18n.init(GameData.curLanguage);\r\n        // i18n.updateSceneRenderers()\r\n    },\r\n    OnOpenPage(event, customEventData){\r\n        Global.PageMgr.onOpenPage(customEventData)\r\n    },\r\n    start () {\r\n        if(Global.ResourceMgr!=undefined){\r\n        }else{\r\n            Global.ResourceMgr = cc.find(\"ResourceMgr\").getComponent(\"ResourceMgr\")\r\n            Global.ProtocolMgr = cc.find(\"ProtocolMgr\").getComponent(\"ProtocolMgr\")\r\n            Global.PageMgr = cc.find(\"PageMgr\").getComponent(\"PageMgr\")\r\n            Global.PageMgr.state = 1;\r\n            Global.PageMgr.onOpenPage(0);\r\n        }\r\n        // Global.ResourceMgr.playBgAudio();\r\n        let node = cc.instantiate(this.MainPage);\r\n        node.parent = this.content;\r\n        // cc.find('Canvas/KuangChi/UserData/Audio').getComponent(cc.Toggle).isChecked = GameData.audio;\r\n        // window.sdk = {\r\n        //\r\n        // }\r\n        // window.sdk.openAudio = function(){\r\n        //     Global.ResourceMgr.playBgAudio();\r\n        //     if(GameData.audio==false){\r\n        //         cc.audioEngine.pauseAll();\r\n        //     }\r\n        // }\r\n        // window.sdk.closeAudio = function(){\r\n        //     cc.audioEngine.pauseAll();\r\n        // }\r\n        // dsBridge.register('openAudio', function (data) {\r\n        //     Global.ResourceMgr.playBgAudio();\r\n        //     if(GameData.audio==false){\r\n        //         cc.audioEngine.pauseAll();\r\n        //     }\r\n        //     return \"success\"\r\n        // });\r\n        // dsBridge.register('closeAudio', function (data) {\r\n        //     cc.audioEngine.pauseAll();\r\n        //     return \"success\"\r\n        // });\r\n    },\r\n    //聲音開關\r\n    toggleChange(event){\r\n        if(event.isChecked){\r\n            GameData.audio = true;\r\n            Global.ResourceMgr.playBgAudio();\r\n            event.target.getComponent(cc.Sprite).enabled = false;\r\n        }else{\r\n            GameData.audio = false;\r\n            cc.audioEngine.pauseAll();\r\n            event.target.getComponent(cc.Sprite).enabled = true;\r\n        }\r\n    },\r\n    fanHui(){\r\n        cc.find('Canvas/Main/FanHui').active = false;\r\n        Global.ProtocolMgr.queryNongChangUserData()\r\n    },\r\n    filterClick(){\r\n        console.log('点击过滤')\r\n        return\r\n    },\r\n    tabLanguager(){\r\n        if(GameData.curLanguage == 'zh'){\r\n            GameData.curLanguage = 'en';\r\n            i18n.init('en');\r\n            i18n.updateSceneRenderers()\r\n        }else{\r\n            GameData.curLanguage = 'zh';\r\n            i18n.init('zh');\r\n            i18n.updateSceneRenderers()\r\n        }\r\n    },\r\n    logOut(){\r\n        cc.sys.localStorage.removeItem(\"com.game.vdn.token\");\r\n        Global.PageMgr.closeAllPages();\r\n        Global.PageMgr.onOpenPage(0);\r\n    },\r\n    \r\n    onClickSubmitLogout()\r\n    {\r\n        let reqData = {};\r\n        Global.ProtocolMgr.querySubmitLogout(reqData,(res)=>{\r\n            if(res.code==200){\r\n                Global.SocketMgr.closeSocket(()=>{\r\n                    Global.PageMgr.onOpenPage(21);\r\n                });\r\n            }\r\n        });\r\n    },\r\n\r\n    update (dt) {\r\n        this._thime += dt;\r\n        if(this._thime >= 10)\r\n        {\r\n            let reqData = {\r\n                command:\"ping\",\r\n                username:window.DEFAULT_userID\r\n            };\r\n            Global.SocketMgr.send_data(reqData);\r\n            this._thime = 0;\r\n        }\r\n    },\r\n});\r\n"]}