{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\Main.js"],"names":["cc","Class","extends","Component","properties","content","Node","MainPage","Prefab","_thime","toggles","onLoad","OnOpenPage","event","customEventData","Global","PageMgr","onOpenPage","start","ResourceMgr","undefined","find","getComponent","ProtocolMgr","state","node","instantiate","parent","toggleChange","isChecked","GameData","audio","playBgAudio","target","Sprite","enabled","audioEngine","pauseAll","fanHui","active","queryNongChangUserData","filterClick","console","log","tabLanguager","curLanguage","i18n","init","updateSceneRenderers","logOut","sys","localStorage","removeItem","closeAllPages","onClickSubmitLogout","reqData","querySubmitLogout","res","code","SocketMgr","closeSocket","update","dt","command","username","window","DEFAULT_userID","send_data"],"mappings":"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","file":"Main.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["// let  i18n = require('LanguageData');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        content:cc.Node,\n        MainPage:cc.Prefab,\n        _thime:0,\n        toggles:cc.Node\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n    onLoad () {\n        // i18n.init(GameData.curLanguage);\n        // i18n.updateSceneRenderers()\n    },\n    OnOpenPage(event, customEventData){\n        Global.PageMgr.onOpenPage(customEventData)\n    },\n    start () {\n        if(Global.ResourceMgr!=undefined){\n        }else{\n            Global.ResourceMgr = cc.find(\"ResourceMgr\").getComponent(\"ResourceMgr\")\n            Global.ProtocolMgr = cc.find(\"ProtocolMgr\").getComponent(\"ProtocolMgr\")\n            Global.PageMgr = cc.find(\"PageMgr\").getComponent(\"PageMgr\")\n            Global.PageMgr.state = 1;\n            Global.PageMgr.onOpenPage(0);\n        }\n        // Global.ResourceMgr.playBgAudio();\n        let node = cc.instantiate(this.MainPage);\n        node.parent = this.content;\n        // cc.find('Canvas/KuangChi/UserData/Audio').getComponent(cc.Toggle).isChecked = GameData.audio;\n        // window.sdk = {\n        //\n        // }\n        // window.sdk.openAudio = function(){\n        //     Global.ResourceMgr.playBgAudio();\n        //     if(GameData.audio==false){\n        //         cc.audioEngine.pauseAll();\n        //     }\n        // }\n        // window.sdk.closeAudio = function(){\n        //     cc.audioEngine.pauseAll();\n        // }\n        // dsBridge.register('openAudio', function (data) {\n        //     Global.ResourceMgr.playBgAudio();\n        //     if(GameData.audio==false){\n        //         cc.audioEngine.pauseAll();\n        //     }\n        //     return \"success\"\n        // });\n        // dsBridge.register('closeAudio', function (data) {\n        //     cc.audioEngine.pauseAll();\n        //     return \"success\"\n        // });\n    },\n    //聲音開關\n    toggleChange(event){\n        if(event.isChecked){\n            GameData.audio = true;\n            Global.ResourceMgr.playBgAudio();\n            event.target.getComponent(cc.Sprite).enabled = false;\n        }else{\n            GameData.audio = false;\n            cc.audioEngine.pauseAll();\n            event.target.getComponent(cc.Sprite).enabled = true;\n        }\n    },\n    fanHui(){\n        cc.find('Canvas/Main/FanHui').active = false;\n        Global.ProtocolMgr.queryNongChangUserData()\n    },\n    filterClick(){\n        console.log('点击过滤')\n        return\n    },\n    tabLanguager(){\n        if(GameData.curLanguage == 'zh'){\n            GameData.curLanguage = 'en';\n            i18n.init('en');\n            i18n.updateSceneRenderers()\n        }else{\n            GameData.curLanguage = 'zh';\n            i18n.init('zh');\n            i18n.updateSceneRenderers()\n        }\n    },\n    logOut(){\n        cc.sys.localStorage.removeItem(\"com.game.vdn.token\");\n        Global.PageMgr.closeAllPages();\n        Global.PageMgr.onOpenPage(0);\n    },\n    \n    onClickSubmitLogout()\n    {\n        let reqData = {};\n        Global.ProtocolMgr.querySubmitLogout(reqData,(res)=>{\n            if(res.code==200){\n                Global.SocketMgr.closeSocket(()=>{\n                    Global.PageMgr.onOpenPage(21);\n                });\n            }\n        });\n    },\n\n    update (dt) {\n        this._thime += dt;\n        if(this._thime >= 10)\n        {\n            let reqData = {\n                command:\"ping\",\n                username:window.DEFAULT_userID\n            };\n            Global.SocketMgr.send_data(reqData);\n            this._thime = 0;\n        }\n    },\n});\n"]}