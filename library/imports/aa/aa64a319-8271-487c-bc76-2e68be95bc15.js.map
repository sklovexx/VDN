{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\ddz\\scripts\\gameScene\\prefabs/assets\\ddz\\scripts\\gameScene\\prefabs\\player_node.js"],"names":["cc","Class","extends","Component","properties","account_label","Label","nickname_label","room_touxiang","Sprite","globalcount_label","headimage","readyimage","Node","offlineimage","card_node","card_count","card_prefab","Prefab","clockimage","qiangdidzhu_node","time_label","robimage_sp","SpriteFrame","robnoimage_sp","robIconSp","robIcon_Sp","robnoIcon_Sp","bu_chu","masterIcon","baojin1","default","type","AudioClip","baojin2","baojin","onLoad","active","node","on","event","bind","console","log","accountid","myglobal","playerData","accountID","pushCard","detail","state","qian_state","qian","buqiang","data","destoryCard","destoryAllCard","clearCard","error","warn","string","time","forEach","e","account","amount","master_accountid","i","card","instantiate","scale","parent","height","y","x","cardlist_node","push","start","init_data","index","JSON","stringify","nick_name","goldcount","seat_index","isready","str","avatarUrl","loader","load","url","err","tex","message","spriteFrame","getComponent","gameScene_script","outCard_node","getUserOutCardPosByAccount","children","length","destroy","removeAllChildren","tag","cards","parseInt","removeFromParent","splice","audioEngine","play","onDestroy"],"mappings":"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","file":"player_node.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\ddz\\scripts\\gameScene\\prefabs","sourcesContent":["import myglobal from \"../../mygolbal.js\"\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        account_label:cc.Label,\r\n        nickname_label:cc.Label,\r\n        room_touxiang:cc.Sprite,\r\n        globalcount_label:cc.Label,\r\n        headimage:cc.Sprite,\r\n        readyimage:cc.Node,\r\n        offlineimage:cc.Node,\r\n        card_node:cc.Node,\r\n        card_count:cc.Node,\r\n        card_prefab:cc.Prefab,\r\n        //tips_label:cc.Label,\r\n        clockimage:cc.Node,\r\n        qiangdidzhu_node:cc.Node, //抢地主的父节点\r\n        time_label:cc.Label,\r\n        robimage_sp:cc.SpriteFrame,\r\n        robnoimage_sp:cc.SpriteFrame,\r\n        robIconSp: cc.Sprite,\r\n        robIcon_Sp:cc.Node,\r\n        robnoIcon_Sp:cc.Node,\r\n        bu_chu:cc.Node,\r\n        masterIcon:cc.Node,\r\n        baojin1:{\r\n          default:null,\r\n          type:cc.AudioClip\r\n        },\r\n        baojin2:{\r\n            default:null,\r\n            type:cc.AudioClip\r\n        },\r\n        baojin:{\r\n          default:null,\r\n          type:cc.AudioClip\r\n      },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n      this.readyimage.active = false\r\n      this.offlineimage.active = false\r\n      \r\n      //监听开始游戏事件(客户端发给客户端)\r\n      this.node.on(\"gamestart_event\",function(event){\r\n        this.readyimage.active = false\r\n      }.bind(this))\r\n\r\n      //给其他玩家发牌事件\r\n      this.node.on(\"push_card_event\",function(event){\r\n        console.log(\"on push_card_event\")\r\n        //自己不再发牌\r\n        if(this.accountid==myglobal.playerData.accountID){\r\n            return\r\n        }\r\n        this.pushCard()\r\n      }.bind(this))\r\n\r\n      this.node.on(\"playernode_rob_state_event\",function(event){\r\n          //{\"accountid\":\"2162866\",\"state\":1}\r\n          var detail = event\r\n      \r\n          //如果是自己在抢，需要隐藏qiangdidzhu_node节点\r\n          //this.accountid表示这个节点挂接的accountid\r\n          if(detail.accountid==this.accountid){\r\n            //console.log(\"detail.accountid\"+detail.accountid)\r\n            this.qiangdidzhu_node.active = false\r\n              \r\n          }\r\n\r\n          if(this.accountid == detail.accountid){\r\n            if(detail.state==qian_state.qian){\r\n             \r\n              console.log(\"this.robIcon_Sp.active = true\")\r\n              this.robIcon_Sp.active = true\r\n\r\n            }else if(detail.state==qian_state.buqiang){\r\n              this.robnoIcon_Sp.active = true\r\n             \r\n            }else{\r\n              console.log(\"get rob value :\"+detail.state)\r\n            }\r\n          }\r\n         \r\n      }.bind(this))\r\n\r\n      this.node.on(\"playernode_changemaster_event\",function(event){\r\n         var detail = event \r\n         this.robIcon_Sp.active = false\r\n         this.robnoIcon_Sp.active = false\r\n         if(detail==this.accountid){\r\n            this.masterIcon.active = true\r\n          }\r\n      }.bind(this))\r\n      // this.node.on(\"playernode_add_three_card\",function(event){\r\n      //   var detail = event //地主的accountid\r\n      //   if(detail==this.accountid){\r\n      //     //给地主发三张排\r\n\r\n      //   }\r\n      // }.bind(this))\r\n      //监听服务器：其他玩家出牌消息\r\n      // myglobal.socket.onOtherPlayerChuCard(function(data){\r\n      //   //{\"accountid\":\"2357540\",\"cards\":[{\"cardid\":4,\"card_data\":{\"index\":4,\"value\":1,\"shape\":1}}]}\r\n      //     if(this.accountid==data.accountid){\r\n      //       console.log('该玩家出牌')\r\n      //     }\r\n      // }.bind(this))\r\n      this.node.on(\"onOtherPlayerChuCard\",(data)=>{\r\n        if(this.accountid==data.accountid){\r\n          this.bu_chu.active = false;\r\n          if(data.accountid!=myglobal.playerData.accountID){\r\n            this.destoryCard(data)\r\n          }\r\n        }\r\n      },this)\r\n      this.node.on(\"onBuChu\",(data)=>{\r\n        if(this.accountid==data.accountid){\r\n          this.bu_chu.active = true;\r\n        }\r\n      })\r\n      this.node.on(\"room_waitready\",()=>{\r\n        // if(this.accountid!=myglobal.playerData.accountID)\r\n          try {\r\n            this.destoryAllCard()\r\n            this.masterIcon.active = false;\r\n            this.robnoIcon_Sp.active = false;\r\n            this.bu_chu.active = false;\r\n            this.clearCard()\r\n          } catch (error) {\r\n            console.warn(error)\r\n          }\r\n      })\r\n      this.node.on(\"onCanChuCard\",(data)=>{\r\n        if(data.accountid==this.accountid){\r\n          this.bu_chu.active = false;\r\n        }\r\n      })\r\n      this.node.on(\"interval\",(data)=>{\r\n        if(data.accountid==this.accountid&&this.accountid!=myglobal.playerData.accountID){\r\n          this.qiangdidzhu_node.active = true;\r\n          this.time_label.string = data.time;\r\n        }\r\n      })\r\n      this.node.on(\"endInterval\",(data)=>{\r\n        if(data.accountid==this.accountid&&this.accountid!=myglobal.playerData.accountID){\r\n          this.qiangdidzhu_node.active = false;\r\n        }\r\n      })\r\n      this.node.on(\"onGameResult\",(data)=>{\r\n        data.forEach(e=>{\r\n          if(e.account==this.accountid){\r\n            this.globalcount_label.string = e.amount\r\n          }\r\n        })\r\n      })\r\n      this.node.on(\"onChangeHouseManage\",()=>{\r\n        console.log(this.accountid)\r\n        if(this.accountid==myglobal.playerData.master_accountid){\r\n          this.readyimage.active = false\r\n        }\r\n      })\r\n      this.node.on(\"show_bottom_card_event\",()=>{\r\n        if(this.accountid==myglobal.playerData.master_accountid){\r\n          for(var i=17;i<20;i++){\r\n            var card = cc.instantiate(this.card_prefab)\r\n            card.scale=0.6\r\n            // console.log(\" this.card_node.parent.parent\"+ this.card_node.parent.parent.name)\r\n            card.parent = this.card_node\r\n            //card.parent = this.node\r\n            // card.opacity = 100;\r\n            var height = card.height\r\n            card.y = (17 - 1) * 0.5 * height * 0.4 * 0.3 - height * 0.4 * 0.3 * i;\r\n            card.x = 0\r\n           \r\n            //console.log(\"call pushCard x:\"+card.x+\" y:\"+card.y)\r\n            this.cardlist_node.push(card)\r\n        }\r\n        }\r\n      })\r\n      this.node.on(\"disconnect\",(data)=>{\r\n        if(data.accountid==this.accountid){\r\n          this.offlineimage.active = true;\r\n        }\r\n      })\r\n    },\r\n\r\n    start () {\r\n        \r\n    },\r\n\r\n    //这里初始化房间内位置节点信息(自己和其他玩家)\r\n    //data玩家节点数据\r\n    //index玩家在房间的位置索引\r\n    init_data(data,index){\r\n      console.log(\"init_data:\"+JSON.stringify(data))  \r\n      //data:{\"accountid\":\"2117836\",\"nick_name\":\"tiny543\",\"avatarUrl\":\"http://xxx\",\"goldcount\":1000}\r\n      this.accountid = data.accountid\r\n      this.account_label.string = data.accountid\r\n      this.nickname_label.string = data.nick_name\r\n      this.globalcount_label.string = data.goldcount\r\n      this.cardlist_node = []\r\n      this.seat_index = index\r\n      if(data.isready==true){\r\n        this.readyimage.active = true\r\n      }\r\n\r\n      // 网络图片加载\r\n    //     cc.loader.load({url: data.avatarUrl, type: 'jpg'},  (err, tex)=> {\r\n    //     //cc.log('Should load a texture from RESTful API by specify the type: ' + (tex instanceof cc.Texture2D));\r\n    //     let oldWidth = this.headImage.node.width;\r\n    //     //console.log('old withd' + oldWidth);\r\n    //     this.room_touxiang.spriteFrame = new cc.SpriteFrame(tex);\r\n    //     let newWidth = this.headImage.node.width;\r\n    //     //console.log('old withd' + newWidth);\r\n    //     this.headImage.node.scale = oldWidth / newWidth;\r\n    // });\r\n    //这里根据传入的avarter来获取本地图像\r\n    var str = data.avatarUrl\r\n    cc.loader.load({url: data.avatarUrl, type: 'jpg'},function(err,tex) {\r\n      if (err) {\r\n          console.log(err.message || err);\r\n          return;\r\n      }          \r\n       this.headimage.spriteFrame = new cc.SpriteFrame(tex);        \r\n    }.bind(this));\r\n    //注册一个player_ready消息\r\n    this.node.on(\"player_ready_notify\",function(event){\r\n        console.log(\"player_ready_notify event\",event)\r\n            var detail = event\r\n            console.log(\"------player_ready_notify detail:\"+detail)\r\n            if(detail==this.accountid){\r\n                this.readyimage.active = true\r\n            }\r\n        }.bind(this))\r\n\r\n        //监听内部随可以抢地主消息,这个消息会发给每个playernode节点\r\n        this.node.on(\"playernode_canrob_event\",function(event){\r\n            var detail = event\r\n            console.log(\"------playernode_canrob_event detail:\"+detail)\r\n            if(detail==this.accountid){\r\n              this.qiangdidzhu_node.active=true\r\n              //this.tips_label.string =\"正在抢地主\" \r\n              // this.time_label.string=\"10\"\r\n              //开启一个定时器\r\n\r\n            }\r\n        }.bind(this))\r\n        //?\r\n        if(index==1){\r\n          this.card_node.x = -this.card_node.x - 30;\r\n          this.readyimage.x = -this.readyimage.x - 30;\r\n          this.robIcon_Sp.x = -this.robIcon_Sp.x - 30;\r\n          this.robnoIcon_Sp.x = -this.robnoIcon_Sp.x -30;\r\n          this.bu_chu.x = -this.bu_chu.x - 30;\r\n        }\r\n        if(this.accountid==myglobal.playerData.accountID){\r\n          this.readyimage.x = 505;\r\n          this.robIcon_Sp.x = 505;\r\n          this.robnoIcon_Sp.x = 505;\r\n          this.bu_chu.x = 505;\r\n          this.readyimage.y = 158;\r\n          this.robIcon_Sp.y = 158;\r\n          this.robnoIcon_Sp.y = 158;\r\n          this.bu_chu.y = 208;\r\n        }\r\n    },\r\n\r\n    // update (dt) {},\r\n    pushCard(){\r\n        \r\n        this.card_node.active = true\r\n        // this.card_count.active = true; \r\n        for(var i=0;i<17;i++){\r\n            var card = cc.instantiate(this.card_prefab)\r\n            card.scale=0.6\r\n            // console.log(\" this.card_node.parent.parent\"+ this.card_node.parent.parent.name)\r\n            card.parent = this.card_node\r\n            //card.parent = this.node\r\n            // card.opacity = 100;\r\n            var height = card.height\r\n            card.y = (17 - 1) * 0.5 * height * 0.4 * 0.3 - height * 0.4 * 0.3 * i;\r\n            card.x = 0\r\n           \r\n            //console.log(\"call pushCard x:\"+card.x+\" y:\"+card.y)\r\n            this.cardlist_node.push(card)\r\n        }\r\n        this.card_count.y = 152.64 - 19.08 * 20;\r\n        this.card_count.getComponent(cc.Label).string = '剩17张'\r\n    },\r\n    clearCard(){\r\n      var gameScene_script = this.node.parent.parent.getComponent(\"gameScene\")\r\n      var outCard_node = gameScene_script.getUserOutCardPosByAccount(this.accountid)\r\n      var children = outCard_node.children;\r\n      for(var i=0;i<children.length;i++){\r\n          var card = children[i]; \r\n          card.destroy()\r\n      }\r\n      outCard_node.removeAllChildren(true);\r\n    },\r\n    destoryCard(data){\r\n      let tag = 0\r\n      for(let i=0;i<data.cards.length;i++){\r\n          //删除牌组中的牌，一次去头，一次去尾\r\n          if(tag==0){\r\n            tag = 1\r\n            let index = parseInt(this.cardlist_node.length-1);\r\n            this.cardlist_node[index].removeFromParent(true);\r\n            this.cardlist_node.splice(index,1)\r\n            this.card_count.y+=19.08;\r\n          }else{\r\n            tag = 0;\r\n            this.cardlist_node[0].removeFromParent(true);\r\n            this.cardlist_node.splice(0,1)\r\n          }\r\n      }\r\n      this.card_count.getComponent(cc.Label).string = '剩'+this.cardlist_node.length+'张'\r\n      if(this.cardlist_node.length==1){\r\n        cc.audioEngine.play(this.baojin1)\r\n        cc.audioEngine.play(this.baojin)\r\n      }\r\n      if(this.cardlist_node.length==2){\r\n          cc.audioEngine.play(this.baojin2)\r\n          cc.audioEngine.play(this.baojin)\r\n      }\r\n    },\r\n    destoryAllCard(){\r\n      console.warn(this.cardlist_node)\r\n      for(let i = 0;i<this.cardlist_node.length;i++){\r\n        this.cardlist_node[i].removeFromParent(true)\r\n      }\r\n      this.cardlist_node=[]\r\n      this.card_count.active = false;\r\n    },\r\n    onDestroy(){\r\n      console.warn(123)\r\n  }\r\n});\r\n"]}