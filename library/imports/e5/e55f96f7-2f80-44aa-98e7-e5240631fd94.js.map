{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\HongBao/assets\\Script\\Ui\\HongBao\\HongBao.js"],"names":["cc","Class","extends","Component","properties","PlayerCount","QiangButton","Node","CloseButton","StatusNode","SubPanel","ZhaDanClip","type","AudioClip","default","Texture","Texture2D","Automatic","NextHongBao","HongBaoTab","onLoad","Global","ResourceMgr","undefined","find","getComponent","ProtocolMgr","SocketMgr","PageMgr","GameData","ReadParkSinl","director","GlobalEvent","on","onUpdateCurHongBaoData","onUpdateHongBaoUserData","onUpdateCurHongBaoCountData","OnUpdateKaiJiangList","OnUpdateKaiJiang","onUpdateCountDown","openSocket","PlayerList","node","getChildByName","pageMgr","dataList","listChildren","children","forEach","initItem","e","push","off","EventType","TOUCH_END","qiangHongBao","item","text","Label","count","icon","Sprite","icon2","me","userName","string","HongBaoUserData","nickname","amount","loader","load","url","headPortrait","err","res","spriteFrame","SpriteFrame","hb","element","active","anim","Animation","play","PlayerListFadeOutAnim","ClearPlayerList","setTimeout","PlayerListFadeInAnim","zd","CurHongBao","bombDigital","CurHongBaoCount","CountDown","toggleAutomatic","event","isChecked","backPack","KaiJiangList","length","i","reward","status","memberId","audioEngine","pauseAll","winAudioClip","scheduleOnce","playHongBaoAudio","sign","HongBaoJieGuo","failAudioClip","audio","ani","start","onEnable","list","index1","timer1","setInterval","clearInterval","x","width","action","spawn","moveBy","v2","fadeIn","runAction","index2","timer2","fadeOut","showSubPanel","index","closeSubPanel","closeGames","closeSocket","destroy","QiangHongBao","data","code","closeLoadingPage","showTipPage2","message","update","dt","onDestroy","playTransitionIn","loadScene","console","log"],"mappings":"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","file":"HongBao.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\HongBao","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        PlayerCount:10,\n        QiangButton:cc.Node,\n        CloseButton:cc.Node,\n        StatusNode:[cc.Node],\n        SubPanel:[cc.Node],\n        ZhaDanClip:{\n            type: cc.AudioClip, \n            default: null,     \n        },\n        Texture: {\n            type: cc.Texture2D, // use 'type:' to define an array of Texture2D objects\n            default: []\n        },\n        Automatic: false,\n        NextHongBao:cc.Node,\n        HongBaoTab:cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        if(Global.ResourceMgr==undefined){\n            Global.ResourceMgr = cc.find(\"ResourceMgr\").getComponent(\"ResourceMgr\")\n            Global.ProtocolMgr = cc.find(\"ProtocolMgr\").getComponent(\"ProtocolMgr\")\n            Global.SocketMgr = cc.find(\"SocketMgr\").getComponent(\"SocketMgr\")\n            Global.PageMgr = cc.find(\"PageMgr\").getComponent(\"PageMgr\")\n        }\n        GameData.ReadParkSinl = 0;\n        cc.director.GlobalEvent.on(\"CurHongBaoData\",this.onUpdateCurHongBaoData,this);\n        cc.director.GlobalEvent.on(\"HongBaoUserData\",this.onUpdateHongBaoUserData,this)\n        cc.director.GlobalEvent.on(\"CurHongBaoCountData\",this.onUpdateCurHongBaoCountData,this);\n        cc.director.GlobalEvent.on(\"KaiJiangList\",this.OnUpdateKaiJiangList,this);\n        cc.director.GlobalEvent.on(\"KaiJiang\",this.OnUpdateKaiJiang,this);\n        cc.director.GlobalEvent.on(\"CountDown\",this.onUpdateCountDown,this);\n        Global.SocketMgr.openSocket()\n        this.PlayerList = this.node.getChildByName('PlayerList');\n        this.pageMgr = cc.find(\"PageMgr\").getComponent(\"PageMgr\");\n        this.dataList = [];\n        let listChildren = this.PlayerList.children;\n        listChildren.forEach(e=>{\n            this.initItem(e);\n            this.dataList.push(e)\n        })\n        //抢红包按钮监听\n        this.QiangButton.off(cc.Node.EventType.TOUCH_END);\n        this.QiangButton.on(cc.Node.EventType.TOUCH_END,()=>{\n            this.qiangHongBao();\n        })\n    },\n    //玩家列表item属性初始化\n    initItem(item){\n        item.text = item.getChildByName('Text').getComponent(cc.Label);\n        item.count = item.getChildByName('Count').getComponent(cc.Label);\n        item.icon = item.getChildByName('Mask').getChildByName('Icon').getComponent(cc.Sprite);\n        item.icon2 = item.getChildByName('Icon2').getComponent(cc.Sprite);\n    },\n    //用户信息更新\n    onUpdateHongBaoUserData(){\n        let me = this.node.getChildByName('Me');\n        let icon = me.getChildByName('Mask').getChildByName('Icon').getComponent(cc.Sprite);\n        let userName = me.getChildByName('Text').getComponent(cc.Label);\n        let count = me.getChildByName('Count').getComponent(cc.Label);\n        userName.string = GameData.HongBaoUserData.nickname;\n        count.string = GameData.HongBaoUserData.amount;\n        cc.loader.load({url:GameData.HongBaoUserData.headPortrait,type:'png'},(err,res)=>{\n            let spriteFrame = new cc.SpriteFrame(res)\n            icon.spriteFrame = spriteFrame;\n        })\n    },\n    //当前主红包信息更新\n    onUpdateCurHongBaoData(){\n        let hb = this.node.getChildByName('State').getChildByName('HB').getChildByName('Text').getComponent(cc.Label);\n        hb.string = '剩余：'+10;\n        this.StatusNode.forEach(element => {\n            element.active = false\n        })\n        this.StatusNode[0].active = true;\n        this.HongBaoTab.active = true;\n        let anim = this.HongBaoTab.getComponent(cc.Animation);\n        anim.play();\n        this.PlayerListFadeOutAnim();\n        this.ClearPlayerList()\n        setTimeout(()=>{\n            this.PlayerListFadeInAnim()\n        },300)\n        setTimeout(()=>{\n            this.HongBaoTab.active = false;\n            this.StatusNode[0].getChildByName('抢').active = true;\n            this.StatusNode[0].getChildByName('JieSuanZhong').active = false;\n            GameData.ReadParkSinl = 1;\n            let icon = this.node.getChildByName('Mask').getChildByName('Icon').getComponent(cc.Sprite);\n            let userName = this.node.getChildByName('UserName').getComponent(cc.Label);\n            let zd = this.node.getChildByName('State').getChildByName('ZD').getChildByName('Text').getComponent(cc.Label);\n            let text = this.node.getChildByName('State').getChildByName('Timer').getChildByName('Text').getComponent(cc.Label);\n            text.string = GameData.CurHongBao.amount;\n            userName.string = GameData.CurHongBao.nickname;\n            zd.string = '雷号：'+GameData.CurHongBao.bombDigital;\n            cc.loader.load({url:GameData.CurHongBao.headPortrait,type:'png'},(err,res)=>{\n                let spriteFrame = new cc.SpriteFrame(res)\n                icon.spriteFrame = spriteFrame\n            })\n        },180)\n    },\n    onUpdateCurHongBaoCountData(){\n        let hb = this.node.getChildByName('State').getChildByName('HB').getChildByName('Text').getComponent(cc.Label);\n        hb.string = '剩余：'+GameData.CurHongBaoCount;\n    },\n    //倒计时更新\n    onUpdateCountDown(){\n        let text = this.node.getChildByName('Clock').getChildByName('Text').getComponent(cc.Label);\n        text.string = GameData.CountDown;\n    },\n    //自动抢按钮\n    toggleAutomatic(event){\n        this.Automatic = event.isChecked;\n        // if(this.Automatic){\n        //     event.node.getChildByName('Text').getComponent(cc.Label).string = '已自动'\n        // }else{\n        //     event.node.getChildByName('Text').getComponent(cc.Label).string = '自动抢'\n        // }\n    },\n    //监听开奖列表更新\n    OnUpdateKaiJiangList(){\n        let backPack = GameData.KaiJiangList\n        let hb = this.node.getChildByName('State').getChildByName('HB').getChildByName('Text').getComponent(cc.Label);\n        hb.string = '剩余：'+(10-backPack.length);\n        for(let i = 0;i<10;i++){\n            if(backPack[i]!=undefined){\n                this.dataList[i].text.string = backPack[i].nickname;\n                this.dataList[i].count.string = backPack[i].reward;\n                if(backPack[i].status == 0){\n                    this.dataList[i].count.string = '未开奖';\n                }else if(backPack[i].status == 2){\n                    let spriteFrame = new cc.SpriteFrame(this.Texture[1])\n                    this.dataList[i].icon2.spriteFrame = spriteFrame\n                }\n                cc.loader.load({url:backPack[i].headPortrait,type:'png'},(err,res)=>{\n                    let spriteFrame = new cc.SpriteFrame(res)\n                    this.dataList[i].icon.spriteFrame = spriteFrame\n                })\n            }else{\n                this.dataList[i].text.string = '';\n                this.dataList[i].count.string = '';\n                this.dataList[i].icon.spriteFrame = null;\n                this.dataList[i].icon2.spriteFrame = null;\n            }\n        }\n    },\n    //开奖\n    OnUpdateKaiJiang(){\n        let backPack = GameData.KaiJiangList;\n        for(let i = 0;i<backPack.length;i++){\n            if(backPack[i].memberId&&backPack[i].memberId==GameData.HongBaoUserData.memberId&&backPack[i].status == 1){\n                this.StatusNode.forEach(element => {\n                    element.active = false\n                })\n                cc.audioEngine.pauseAll();\n                cc.audioEngine.play(Global.ResourceMgr.winAudioClip, false, 0.1);\n                this.scheduleOnce(()=>{\n                    Global.ResourceMgr.playHongBaoAudio()\n                },12)\n                this.StatusNode[1].active = true;\n                this.StatusNode[1].getChildByName('LeiHao').getComponent(cc.Label).string = '雷号：'+GameData.CurHongBao.bombDigital\n                let sign = GameData.HongBaoJieGuo>0 ? '+':''\n                this.StatusNode[1].getChildByName('Num').getComponent(cc.Label).string = '庄家：'+sign+GameData.HongBaoJieGuo\n                this.StatusNode[1].getChildByName('JinE').getComponent(cc.Label).string = '+' + backPack[i].reward;\n                return;\n            }else if((backPack[i].memberId&&backPack[i].memberId==GameData.HongBaoUserData.memberId&&backPack[i].status == 2)){\n                this.StatusNode.forEach(element => {\n                    element.active = false\n                })\n                cc.audioEngine.pauseAll();\n                cc.audioEngine.play(Global.ResourceMgr.failAudioClip, false, 0.3);\n                cc.audioEngine.play(this.ZhaDanClip,false,(GameData.audio+0))\n                this.scheduleOnce(()=>{\n                    Global.ResourceMgr.playHongBaoAudio()\n                },3)\n                this.StatusNode[3].active = true;\n                this.StatusNode[3].getChildByName('LeiHao').getComponent(cc.Label).string = '雷号：'+GameData.CurHongBao.bombDigital\n                let sign = GameData.HongBaoJieGuo>0 ? '+':''\n                this.StatusNode[3].getChildByName('Num').getComponent(cc.Label).string = '庄家：'+sign+GameData.HongBaoJieGuo\n                this.StatusNode[3].getChildByName('Gain').getComponent(cc.Label).string = '已中奖:' + backPack[i].reward;\n                this.StatusNode[3].getChildByName('Paid').getComponent(cc.Label).string = '已赔付:' + GameData.CurHongBao.amount;\n                let ani = this.StatusNode[3].getComponent(cc.Animation);\n                ani.play();\n                return;\n            }\n        }\n        this.StatusNode.forEach(element => {\n            element.active = false\n        })\n        this.StatusNode[2].active = true;\n        this.StatusNode[2].getChildByName('LeiHao').getComponent(cc.Label).string = '雷号：'+GameData.CurHongBao.bombDigital\n        let sign = GameData.HongBaoJieGuo>0 ? '+':''\n        this.StatusNode[2].getChildByName('Num').getComponent(cc.Label).string = '庄家：'+sign+GameData.HongBaoJieGuo\n    },\n    start () {\n        Global.ResourceMgr.playHongBaoAudio()\n        // window.sdk = {\n        // }\n        // sdk.openAudio = ()=>{\n        //     cc.audioEngine.pauseAll();\n        //     Global.ResourceMgr.playHongBaoAudio();\n        //     if(GameData.audio==false){\n        //         cc.audioEngine.pauseAll();\n        //     }\n        // }\n        // sdk.closeAudio = ()=>{\n        //     cc.audioEngine.pauseAll();\n        // }\n    },\n    onEnable(){\n    },\n    ClearPlayerList(){\n        for(let i = 0;i<10;i++){\n            this.dataList[i].text.string = '';\n            this.dataList[i].count.string = '';\n            this.dataList[i].icon.spriteFrame = null;\n            this.dataList[i].icon2.spriteFrame = null;\n        }\n    },\n    //玩家列表出现动画\n    PlayerListFadeInAnim(){\n        let list = this.PlayerList.children;\n        let index1 = 0;\n        let timer1 = setInterval(()=>{\n            if(index1>=10){\n                clearInterval(timer1)\n                return\n            }\n            list[index1].x +=list[index1].width;\n            let action = cc.spawn(cc.moveBy(0.5,cc.v2(-list[index1].width,0)),cc.fadeIn(0.5));\n            list[index1].runAction(action);\n            index1+=2;\n        },200)\n        let index2 = 1;\n        let timer2 = setInterval(()=>{\n            if(index2>=10){\n                clearInterval(timer2)\n                return\n            }\n            list[index2].x -=list[index2].width;\n            let action = cc.spawn(cc.moveBy(0.3,cc.v2(list[index2].width,0)),cc.fadeIn(0.3));\n            list[index2].runAction(action);\n            index2+=2;\n        },200)\n    },\n    //玩家列表消失动画\n    PlayerListFadeOutAnim(){\n        let list = this.PlayerList.children;\n        list.forEach(e=>{\n            let action = cc.fadeOut(0.3);\n            e.runAction(action);\n        })\n        // let list = this.PlayerList.children;\n        // let index1 = 0;\n        // let timer1 = setInterval(()=>{\n        //     if(index1>=10){\n        //         clearInterval(timer1)\n        //         return\n        //     }\n        //     let finish = ()=>{\n        //         list[index1].x +=list[index1].width;\n        //     }\n        //     let action = cc.sequence(cc.moveBy(0.5,cc.v2(-list[index1].width,0)),cc.fadeOut(0.1),cc.callFunc(finish));\n        //     list[index1].runAction(action);\n        //     index1+=2;\n        // },200)\n        // let index2 = 1;\n        // let timer2 = setInterval(()=>{\n        //     if(index2>=10){\n        //         clearInterval(timer2)\n        //         return\n        //     }\n        //     let finish = ()=>{\n        //         list[index1].x -=list[index1].width;\n        //     }\n        //     let action = cc.sequence(cc.moveBy(0.5,cc.v2(list[index2].width,0)),cc.fadeOut(0.1),cc.callFunc(finish));\n        //     list[index2].runAction(action);\n        //     index2+=2;\n        // },200)\n    },\n    showSubPanel(event,index){\n        this.SubPanel[index].active = true;\n    },\n    closeSubPanel(event,index){\n        this.SubPanel[index].active = false;\n    },\n    closeGames(){\n        Global.SocketMgr.closeSocket(()=>{\n            this.node.destroy()\n        })\n    },\n    //抢红包\n    qiangHongBao(){\n        if(GameData.ReadParkSinl==1) {\n            GameData.ReadParkSinl = 0;\n            Global.ProtocolMgr.QiangHongBao((data)=>{\n                if(data.code==200&&data.data=='true'){\n                    this.StatusNode[0].getChildByName('抢').active = false;\n                    this.StatusNode[0].getChildByName('JieSuanZhong').active = true;\n                    Global.PageMgr.closeLoadingPage();\n                }else{\n                    Global.PageMgr.closeLoadingPage();\n                    Global.PageMgr.showTipPage2(data.message)\n                    GameData.ReadParkSinl=1\n                }\n            })\n        }else{\n            // Global.PageMgr.showTipPage('当前没有红包')\n        }\n    },\n    update (dt) {\n        //当前有红包时自动抢红包\n        if(this.Automatic&&this.StatusNode[0].active){\n            this.qiangHongBao();\n        }\n    },\n    onDestroy(){\n        cc.director.GlobalEvent.off(\"CurHongBaoData\");\n        cc.director.GlobalEvent.off(\"HongBaoUserData\")\n        cc.director.GlobalEvent.off(\"CurHongBaoCountData\");\n        cc.director.GlobalEvent.off(\"KaiJiangList\");\n        cc.director.GlobalEvent.off(\"KaiJiang\");\n        cc.director.GlobalEvent.off(\"CountDown\");\n        cc.audioEngine.pauseAll();\n        Global.ResourceMgr.playTransitionIn()\n        cc.director.loadScene('Dssc',()=>{\n            // Global.ResourceMgr.playBgAudio()\n            console.log('切换场景')\n        })\n    },\n});"]}