{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\common/assets\\NiuNiu\\script\\common\\IAP.js"],"names":["IAPListener","onInitialized","res","cc","log","onSuccess","product","onFailure","msg","onCanceled","onRestored","onProductRequestSuccess","products","obj","i","length","onProductRequestFailure","IAP","Class","init","listener","isDebug","sdkbox","setListener","setDebug","enableUserSideVerification","refresh","pay","name","purchase","restore","module","exports"],"mappings":";;;;AAAA;;;;AAIA;;AAEA;;AAEA,IAAIA,cAAc;AACdC,mBAAe,uBAAUC,GAAV,EAAe;AAC1BC,WAAGC,GAAH,CAAO,sBAAsBF,GAA7B;AACH,KAHa;AAIdG,eAAY,mBAAUC,OAAV,EAAmB;AAC3B;AACH,KANa;AAOdC,eAAY,mBAAUD,OAAV,EAAmBE,GAAnB,EAAwB;AAChC;AACA;AACH,KAVa;AAWdC,gBAAa,oBAAUH,OAAV,EAAmB;AAC5B;AACH,KAba;AAcdI,gBAAa,oBAAUJ,OAAV,EAAmB;AAC5B;AACH,KAhBa;AAiBdK,6BAA0B,iCAAUC,QAAV,EAAoB;AAC1C;AACA;AACA;AACA,YAAIC,MAAM;AACN,oBAAO,cADD;AAEN,kBAAK,0BAFC;AAGN,qBAAQ,EAHF;AAIN,2BAAc,EAJR;AAKN,qBAAQ,EALF,EAKK,gBAAe,EALpB;AAMN,uBAAU,EANJ;AAON,sCAAyB;AAPnB,SAAV;;AAUA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,SAASG,MAA7B,EAAqCD,GAArC,EAA0C;AACtC;AACH;AACJ,KAlCa;AAmCdE,6BAA0B,iCAAUR,GAAV,EAAe;AACrC;AACH;AArCa,CAAlB;;AAwCA,IAAIS,MAAMd,GAAGe,KAAH,CAAS;;AAEf;;;;;AAKA;;;;;AAKAC,UAAM,cAAUC,QAAV,EAAoBC,OAApB,EAA6B;AAC/B,YAAG,OAAOC,MAAP,KAAkB,WAArB,EAAiC;AAC7BnB,eAAGC,GAAH,CAAO,kBAAP;AACA,mBAAO,KAAP;AACH;;AAEDkB,eAAOL,GAAP,CAAWM,WAAX,CAAuBH,QAAvB;AACAE,eAAOL,GAAP,CAAWE,IAAX;AACAG,eAAOL,GAAP,CAAWO,QAAX,CAAoBH,OAApB;AACAC,eAAOL,GAAP,CAAWQ,0BAAX,CAAsC,KAAtC;AACAH,eAAOL,GAAP,CAAWS,OAAX;;AAGA,eAAO,IAAP;AACH,KA1Bc;;AA4Bf;;;AAGAC,SAAK,aAAUC,IAAV,EAAgB;AACjB,YAAGN,OAAOL,GAAV,EAAc;AACVK,mBAAOL,GAAP,CAAWY,QAAX,CAAoBD,IAApB;AACH;AACJ,KAnCc;;AAqCfE,aAAS,mBAAY;AACjB,YAAGR,OAAOL,GAAV,EAAc;AACVK,mBAAOL,GAAP,CAAWa,OAAX;AACH;AACJ,KAzCc;;AA2CfJ,aAAS,mBAAY;AACjB,YAAGJ,OAAOL,GAAV,EAAc;AACVK,mBAAOL,GAAP,CAAWS,OAAX;AACH;AACJ;AA/Cc,CAAT,CAAV;;AAkDAK,OAAOC,OAAP,GAAiBf,GAAjB","file":"IAP.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\common","sourcesContent":["/**\n * Created by skyxu on 2018/3/13.\n */\n\n//sdk 配置说明 http://docs.sdkbox.com/en/plugins/iap/v3-js/\n\n\"use strict\";\n\nlet IAPListener = {\n    onInitialized: function (res) {\n        cc.log(\"sdkbox iap init: \" + res);\n    },\n    onSuccess : function (product) {\n        //Purchase success\n    },\n    onFailure : function (product, msg) {\n        //Purchase failed\n        //msg is the error message\n    },\n    onCanceled : function (product) {\n        //Purchase was canceled by user\n    },\n    onRestored : function (product) {\n        //Purchase restored\n    },\n    onProductRequestSuccess : function (products) {\n        //Returns you the data for all the iap products\n        //You can get each item using following method\n        //products\n        let obj = {\n            \"name\":\"coin_package\",\n            \"id\":\"com.cocos2dx.plugintest2\",\n            \"title\":\"\",\n            \"description\":\"\",\n            \"price\":\"\",\"currencyCode\":\"\",\n            \"receipt\":\"\",\n            \"receiptCipheredPayload\":\"\"\n        };\n\n        for (let i = 0; i < products.length; i++) {\n            // loop\n        }\n    },\n    onProductRequestFailure : function (msg) {\n        //When product refresh request fails.\n    }\n};\n\nlet IAP = cc.Class({\n\n    /**\n     *SDKBOX 安装器会自动在您的工程中添加一个样例配置文件sdkbox_config.json.\n     * 在您编译工程前,请修改里面的参数,用您自己的应用信息\n     */\n\n    /**\n     * @param {Object} listener\n     * @param {boolean} isDebug\n     * @returns {boolean}\n     */\n    init: function (listener, isDebug) {\n        if(typeof sdkbox === \"undefined\"){\n            cc.log(\"sdkbox undefined\");\n            return false;\n        }\n\n        sdkbox.IAP.setListener(listener);\n        sdkbox.IAP.init();\n        sdkbox.IAP.setDebug(isDebug);\n        sdkbox.IAP.enableUserSideVerification(false);\n        sdkbox.IAP.refresh();\n\n\n        return true;\n    },\n\n    /**\n     * @param {string} name sdkbox_config.json对应的key\n     */\n    pay: function (name) {\n        if(sdkbox.IAP){\n            sdkbox.IAP.purchase(name);\n        }\n    },\n\n    restore: function () {\n        if(sdkbox.IAP){\n            sdkbox.IAP.restore();\n        }\n    },\n\n    refresh: function () {\n        if(sdkbox.IAP){\n            sdkbox.IAP.refresh();\n        }\n    }\n});\n\nmodule.exports = IAP;\n"]}