{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\NongChang/assets\\Script\\Ui\\NongChang\\SalePanel.js"],"names":["cc","Class","extends","Component","properties","item","Prefab","content","Node","start","onEnable","children","forEach","value","destroy","backPack","GameData","GuoShiData","sum","node","instantiate","parent","id","getChildByName","getComponent","Label","string","count","price","parseInt","dataFunc","queryValue","saleing","Global","ProtocolMgr","saleGuoShi","active","find","onPlayCoinAni","console","log","PageMgr","closeAllPages","showTipPage"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAAKL,GAAGM,MADA;AAERC,iBAAQP,GAAGQ;AAFH,KAHP;;AAQL;;AAEA;;AAEAC,SAZK,mBAYI,CAER,CAdI;AAeLC,YAfK,sBAeK;AAAA;;AACN,YAAIC,WAAW,KAAKJ,OAAL,CAAaI,QAA5B;AACAA,iBAASC,OAAT,CAAiB,iBAAQ;AACrBC,kBAAMC,OAAN;AACH,SAFD;AAGA,YAAIC,WAAWC,SAASC,UAAxB;AACA,YAAIC,MAAM,CAAV;AACAH,iBAASH,OAAT,CAAiB,iBAAS;AACtB,gBAAIO,OAAOnB,GAAGoB,WAAH,CAAe,MAAKf,IAApB,CAAX;AACAc,iBAAKE,MAAL,GAAc,MAAKd,OAAnB;AACA,gBAAIe,KAAKT,MAAMS,EAAN,GAAW,EAApB;AACAH,iBAAKI,cAAL,CAAoB,OAApB,EAA6BC,YAA7B,CAA0CxB,GAAGyB,KAA7C,EAAoDC,MAApD,GAA6Db,MAAMc,KAAnE;AACA,gBAAIC,QAAQC,SAASC,SAASC,UAAT,CAAoB,SAApB,EAA8B,OAA9B,EAAsCT,EAAtC,CAAT,IAAoDT,MAAMc,KAAtE;AACAT,mBAAKU,KAAL;AACAT,iBAAKI,cAAL,CAAoB,OAApB,EAA6BC,YAA7B,CAA0CxB,GAAGyB,KAA7C,EAAoDC,MAApD,GAA6D,OAAKE,KAAL,GAAW,KAAxE;AACH,SARD;AASA,aAAKT,IAAL,CAAUI,cAAV,CAAyB,YAAzB,EAAuCC,YAAvC,CAAoDxB,GAAGyB,KAAvD,EAA8DC,MAA9D,GAAuE,UAAQR,GAAR,GAAY,KAAnF;AACH,KAhCI;AAiCLc,WAjCK,qBAiCI;AAAA;;AACLC,eAAOC,WAAP,CAAmBC,UAAnB,CAA8B,YAAI;AAC9B,mBAAKhB,IAAL,CAAUiB,MAAV,GAAmB,KAAnB;AACApC,eAAGqC,IAAH,CAAQ,iBAAR,EAA2Bb,YAA3B,CAAwC,UAAxC,EAAoDc,aAApD,CAAkE,YAAI;AAClEC,wBAAQC,GAAR,CAAY,MAAZ;AACH,aAFD;AAGAD,oBAAQC,GAAR,CAAY,MAAZ;AACAP,mBAAOQ,OAAP,CAAeC,aAAf;AACAT,mBAAOQ,OAAP,CAAeE,WAAf,CAA2B,QAA3B;AACH,SARD;AASH;AACD;;AA5CK,CAAT","file":"SalePanel.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\NongChang","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        item:cc.Prefab,\r\n        content:cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n\r\n    },\r\n    onEnable(){\r\n        let children = this.content.children;\r\n        children.forEach(value =>{\r\n            value.destroy();\r\n        })\r\n        let backPack = GameData.GuoShiData;\r\n        let sum = 0;\r\n        backPack.forEach(value => {\r\n            let node = cc.instantiate(this.item);\r\n            node.parent = this.content;\r\n            let id = value.id + '';\r\n            node.getChildByName('Count').getComponent(cc.Label).string = value.count\r\n            let price = parseInt(dataFunc.queryValue('zhongzi',\"price\",id))*value.count\r\n            sum+=price;\r\n            node.getChildByName('Price').getComponent(cc.Label).string = '可售'+price+'ECC'\r\n        })\r\n        this.node.getChildByName('TotalPrice').getComponent(cc.Label).string = '当前可售出'+sum+'ECC'\r\n    },\r\n    saleing(){\r\n        Global.ProtocolMgr.saleGuoShi(()=>{\r\n            this.node.active = false;\r\n            cc.find('Canvas/GainGold').getComponent('GainGold').onPlayCoinAni(()=>{\r\n                console.log('获得金币')\r\n            })\r\n            console.log('卖出果实')\r\n            Global.PageMgr.closeAllPages()\r\n            Global.PageMgr.showTipPage('成功售出果实')\r\n        })\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}