{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\common/assets\\NiuNiu\\script\\common\\ProgressBarExt.js"],"names":["ProcessType","cc","Enum","NULL","INCREASE","DECREASE","ProgressBarExt","Class","extends","ProgressBar","properties","_processType","_targetProgress","_progressDiff","targetProgress","tooltip","min","max","get","set","value","progress","_onProgressComplete","_changeTime","changeTime","range","Number","MAX_VALUE","start","update","dt","delta","runProgressComplete","_updateBarStatus","setTargetProgress","onProgressComplete","isImmediate","module","exports"],"mappings":"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","file":"ProgressBarExt.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\common","sourcesContent":["/**\r\n * Created by edisonjiang on 2018/4/4.\r\n * 扩展系统的ProgressBar组件，支持设置进度值时的过度动画，\r\n * 并支持达到某进度值时回调函数的设置\r\n */\r\n\r\n\"use strict\";\r\n\r\n// 改变进度值的过度方式(为无时不需要添加过度动画)\r\nlet ProcessType = cc.Enum({\r\n    NULL: 0,           // 无\r\n    INCREASE: 1,       // 增加\r\n    DECREASE: 2,       // 减少\r\n});\r\n\r\nlet ProgressBarExt = cc.Class({\r\n    extends: cc.ProgressBar,\r\n\r\n    properties: {\r\n        _processType: ProcessType.NULL, // 是否在改变进度值的过度中\r\n\r\n        _targetProgress: 0,\r\n        _progressDiff: 0,\r\n        targetProgress: {\r\n            tooltip: '目标进度值',\r\n            min: 0,\r\n            max: 1,\r\n            get () {\r\n                return this._targetProgress;\r\n            },\r\n            set (value) {\r\n                this._targetProgress = value;\r\n\r\n                this._progressDiff = (this._targetProgress - this.progress);\r\n                if (this._progressDiff > 0) {\r\n                    this._processType = ProcessType.INCREASE;\r\n                } else if (this._progressDiff < 0) {\r\n                    this._processType = ProcessType.DECREASE;\r\n                } else {\r\n                    this._processType = ProcessType.NULL;\r\n                }\r\n            }\r\n        },\r\n        _onProgressComplete: null, //进度达到目标进度值时执行的回调函数\r\n\r\n        _changeTime: 0,\r\n        changeTime: {\r\n            tooltip: '过度动画执行的时间(单位秒)',\r\n            range: [0, Number.MAX_VALUE],\r\n            get () {\r\n                return this._changeTime;\r\n            },\r\n            set (value) {\r\n                this._changeTime = value;\r\n            }\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n    },\r\n\r\n    update (dt) {\r\n        if (this._processType == ProcessType.NULL) {\r\n            return;\r\n        }\r\n\r\n        let delta = this._progressDiff;\r\n        if (this._changeTime > 0) {\r\n            delta = (this._progressDiff / this._changeTime);\r\n            delta *= dt;\r\n        }\r\n        if (this._processType == ProcessType.INCREASE) {\r\n            if (this._targetProgress > this.progress) {\r\n                this.progress += delta;\r\n            } else {\r\n                this.progress = this._targetProgress;\r\n                this.runProgressComplete();\r\n\r\n                this._processType = ProcessType.NULL;\r\n            }\r\n            this._updateBarStatus();\r\n        } else if (this._processType == ProcessType.DECREASE) {\r\n            if (this._targetProgress < this.progress) {\r\n                this.progress += delta;\r\n            } else {\r\n                this.progress = this._targetProgress;\r\n                this.runProgressComplete();\r\n\r\n                this._processType = ProcessType.NULL;\r\n            }\r\n            this._updateBarStatus();\r\n        }\r\n    },\r\n\r\n    setTargetProgress (progress, onProgressComplete, isImmediate) {\r\n        this.targetProgress = progress;\r\n        this._onProgressComplete = onProgressComplete;\r\n\r\n        if (isImmediate) {\r\n            this._processType = ProcessType.NULL;\r\n\r\n            this.progress = this._targetProgress;\r\n            this.runProgressComplete();\r\n            this._updateBarStatus();\r\n        }\r\n    },\r\n\r\n    runProgressComplete () {\r\n        if (this._onProgressComplete) {\r\n            this._onProgressComplete();\r\n            this._onProgressComplete = null;\r\n        }\r\n    }\r\n});\r\n\r\nmodule.exports = ProgressBarExt;\r\n"]}