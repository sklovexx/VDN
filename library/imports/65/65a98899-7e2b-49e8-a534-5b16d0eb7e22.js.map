{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\宝宝游戏单页面/assets\\Script\\Ui\\宝宝游戏单页面\\BuyPanel.js"],"names":["cc","Class","extends","Component","properties","password","EditBox","number","label_name","Label","label_Value","propId","type","start","onEnable","console","log","Global","ProtocolMgr","queryUserData","director","GlobalEvent","on","UpdateUserData","string","buy","reqData","id","queryBuyConsumable","res","code","PageMgr","showTipPage","onClosePage","message","mc_id","queryUseConsumable","pages","getComponent","getShopList","showData","data","onDestroy","off"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAASL,GAAGM,OADJ;AAERC,gBAAOP,GAAGM,OAFF;AAGRE,oBAAWR,GAAGS,KAHN;AAIRC,qBAAYV,GAAGS,KAJP;AAKRE,gBAAO,CALC;AAMRC,cAAK;AANG,KAHP;;AAYL;;AAEA;;AAEAC,SAhBK,mBAgBI,CAER,CAlBI;AAmBLC,YAnBK,sBAmBK;AACNC,gBAAQC,GAAR,CAAY,KAAKL,MAAjB;AACAI,gBAAQC,GAAR,CAAY,KAAKJ,IAAjB;AACAK,eAAOC,WAAP,CAAmBC,aAAnB;AACAnB,WAAGoB,QAAH,CAAYC,WAAZ,CAAwBC,EAAxB,CAA2B,gBAA3B,EAA4C,KAAKC,cAAjD,EAAgE,IAAhE;AACA,YAAG,KAAKX,IAAL,IAAa,CAAhB,EACA;AACI,iBAAKJ,UAAL,CAAgBgB,MAAhB,GAAyB,IAAzB;AACA,iBAAKd,WAAL,CAAiBc,MAAjB,GAA0B,IAA1B;AACH,SAJD,MAKA;AACI,iBAAKhB,UAAL,CAAgBgB,MAAhB,GAAyB,IAAzB;AACA,iBAAKd,WAAL,CAAiBc,MAAjB,GAA0B,IAA1B;AACH;AACD,aAAKjB,MAAL,CAAYiB,MAAZ,GAAqB,EAArB;AACH,KAlCI;AAoCLC,OApCK,iBAoCA;AACD,YAAIC,gBAAJ;AACA,gBAAO,KAAKd,IAAZ;AAEI,iBAAK,CAAL;AAAQ;AACJc,0BAAU;AACNC,wBAAG,KAAKhB,MADF;AAENJ,4BAAO,KAAKA,MAAL,CAAYiB;AAFb,iBAAV;AAIAP,uBAAOC,WAAP,CAAmBU,kBAAnB,CAAsCF,OAAtC,EAA8C,UAACG,GAAD,EAAO;AACjD,wBAAGA,IAAIC,IAAJ,IAAU,GAAb,EAAiB;AACbb,+BAAOc,OAAP,CAAeC,WAAf,CAA2B,MAA3B;AACAf,+BAAOc,OAAP,CAAeE,WAAf,CAA2B,EAA3B;AACH,qBAHD,MAGK;AACDhB,+BAAOc,OAAP,CAAeC,WAAf,CAA2BH,IAAIK,OAA/B;AACH;AACJ,iBAPD;AAQA;AACJ,iBAAK,CAAL;AAAO;AACHR,0BAAU;AACNS,2BAAM,KAAKxB,MADL;AAENJ,4BAAO,KAAKA,MAAL,CAAYiB;AAFb,iBAAV;AAIAP,uBAAOC,WAAP,CAAmBkB,kBAAnB,CAAsCV,OAAtC,EAA8C,UAACG,GAAD,EAAO;AACjD,wBAAGA,IAAIC,IAAJ,IAAU,GAAb,EAAiB;AACbb,+BAAOc,OAAP,CAAeC,WAAf,CAA2B,MAA3B;AACAf,+BAAOc,OAAP,CAAeM,KAAf,CAAqB,EAArB,EAAyBC,YAAzB,CAAsC,eAAtC,EAAuDC,WAAvD,CAAmE,IAAnE,EAAwE,CAAxE;AACAtB,+BAAOc,OAAP,CAAeM,KAAf,CAAqB,EAArB,EAAyBC,YAAzB,CAAsC,cAAtC,EAAsDE,QAAtD;AACAvB,+BAAOc,OAAP,CAAeE,WAAf,CAA2B,EAA3B;AACH,qBALD,MAKK;AACDhB,+BAAOc,OAAP,CAAeC,WAAf,CAA2BH,IAAIK,OAA/B;AACH;AACJ,iBATD;AAUA;AACA,iBAAK,CAAL;AAAO;AACP;AAjCR;AAmCH,KAzEI;AA2ELX,kBA3EK,0BA2EUkB,IA3EV,EA2Ee;AAChB;AACA;AACH,KA9EI;AAgFLC,aAhFK,uBAgFM;AACP1C,WAAGoB,QAAH,CAAYC,WAAZ,CAAwBsB,GAAxB,CAA4B,gBAA5B;AACH;AACD;;AAnFK,CAAT","file":"BuyPanel.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\宝宝游戏单页面","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        password:cc.EditBox,\n        number:cc.EditBox,\n        label_name:cc.Label,\n        label_Value:cc.Label,\n        propId:1,\n        type:0,\n    },\n    \n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n\n    },\n    onEnable(){\n        console.log(this.propId)\n        console.log(this.type)\n        Global.ProtocolMgr.queryUserData();\n        cc.director.GlobalEvent.on(\"UpdateUserData\",this.UpdateUserData,this);\n        if(this.type == 1)\n        {\n            this.label_name.string = \"使用\";\n            this.label_Value.string = \"使用\";\n        }else\n        {\n            this.label_name.string = \"购买\";\n            this.label_Value.string = \"购买\";\n        }\n        this.number.string = \"\";\n    },\n\n    buy(){\n        let reqData;\n        switch(this.type)\n        {\n            case 0: //购买消耗品\n                reqData = {\n                    id:this.propId,\n                    number:this.number.string\n                }\n                Global.ProtocolMgr.queryBuyConsumable(reqData,(res)=>{\n                    if(res.code==200){\n                        Global.PageMgr.showTipPage(\"购买成功\");\n                        Global.PageMgr.onClosePage(15);\n                    }else{\n                        Global.PageMgr.showTipPage(res.message);\n                    }\n                })\n                break; \n            case 1://使用消耗品\n                reqData = {\n                    mc_id:this.propId,\n                    number:this.number.string,\n                }\n                Global.ProtocolMgr.queryUseConsumable(reqData,(res)=>{\n                    if(res.code==200){\n                        Global.PageMgr.showTipPage(\"使用成功\");\n                        Global.PageMgr.pages[10].getComponent(\"KnapsackPanel\").getShopList(null,1);\n                        Global.PageMgr.pages[11].getComponent(\"ChongWuPanel\").showData();\n                        Global.PageMgr.onClosePage(15);\n                    }else{\n                        Global.PageMgr.showTipPage(res.message);\n                    }\n                });\n                break;\n                case 2://使用消耗品\n                break;\n        }\n    },\n\n    UpdateUserData(data){\n        // console.log(\"---------availableUsdt-------------\"+data.availableUsdt);\n        // console.log(\"---------------username-------\"+data.username);\n    },\n    \n    onDestroy(){\n        cc.director.GlobalEvent.off(\"UpdateUserData\");\n    }\n    // update (dt) {},\n});\n"]}