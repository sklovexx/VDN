{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\宝宝游戏单页面/assets\\Script\\Ui\\宝宝游戏单页面\\BuyPanel.js"],"names":["cc","Class","extends","Component","properties","password","EditBox","number","label_name","Label","label_Value","propId","type","start","onEnable","console","log","Global","ProtocolMgr","queryUserData","director","GlobalEvent","on","UpdateUserData","string","buy","reqData","id","queryBuyConsumable","res","code","PageMgr","showTipPage","onClosePage","message","mc_id","queryUseConsumable","pages","getComponent","getShopList","showData","data","onDestroy","off"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAASL,GAAGM,OADJ;AAERC,gBAAOP,GAAGM,OAFF;AAGRE,oBAAWR,GAAGS,KAHN;AAIRC,qBAAYV,GAAGS,KAJP;AAKRE,gBAAO,CALC;AAMRC,cAAK;AANG,KAHP;;AAYL;;AAEA;;AAEAC,SAhBK,mBAgBI,CAER,CAlBI;AAmBLC,YAnBK,sBAmBK;AACNC,gBAAQC,GAAR,CAAY,KAAKL,MAAjB;AACAI,gBAAQC,GAAR,CAAY,KAAKJ,IAAjB;AACAK,eAAOC,WAAP,CAAmBC,aAAnB;AACAnB,WAAGoB,QAAH,CAAYC,WAAZ,CAAwBC,EAAxB,CAA2B,gBAA3B,EAA4C,KAAKC,cAAjD,EAAgE,IAAhE;AACA,YAAG,KAAKX,IAAL,IAAa,CAAhB,EACA;AACI,iBAAKJ,UAAL,CAAgBgB,MAAhB,GAAyB,IAAzB;AACA,iBAAKd,WAAL,CAAiBc,MAAjB,GAA0B,IAA1B;AACH,SAJD,MAKA;AACI,iBAAKhB,UAAL,CAAgBgB,MAAhB,GAAyB,IAAzB;AACA,iBAAKd,WAAL,CAAiBc,MAAjB,GAA0B,IAA1B;AACH;AACD,aAAKjB,MAAL,CAAYiB,MAAZ,GAAqB,EAArB;AACH,KAlCI;AAoCLC,OApCK,iBAoCA;AACD,YAAIC,gBAAJ;AACA,gBAAO,KAAKd,IAAZ;AAEI,iBAAK,CAAL;AAAQ;AACJc,0BAAU;AACNC,wBAAG,KAAKhB,MADF;AAENJ,4BAAO,KAAKA,MAAL,CAAYiB;AAFb,iBAAV;AAIAP,uBAAOC,WAAP,CAAmBU,kBAAnB,CAAsCF,OAAtC,EAA8C,UAACG,GAAD,EAAO;AACjD,wBAAGA,IAAIC,IAAJ,IAAU,GAAb,EAAiB;AACbb,+BAAOc,OAAP,CAAeC,WAAf,CAA2B,MAA3B;AACAf,+BAAOc,OAAP,CAAeE,WAAf,CAA2B,EAA3B;AACH,qBAHD,MAGK;AACDhB,+BAAOc,OAAP,CAAeC,WAAf,CAA2BH,IAAIK,OAA/B;AACH;AACJ,iBAPD;AAQA;AACJ,iBAAK,CAAL;AAAO;AACHR,0BAAU;AACNS,2BAAM,KAAKxB,MADL;AAENJ,4BAAO,KAAKA,MAAL,CAAYiB;AAFb,iBAAV;AAIAP,uBAAOC,WAAP,CAAmBkB,kBAAnB,CAAsCV,OAAtC,EAA8C,UAACG,GAAD,EAAO;AACjD,wBAAGA,IAAIC,IAAJ,IAAU,GAAb,EAAiB;AACbb,+BAAOc,OAAP,CAAeC,WAAf,CAA2B,MAA3B;AACAf,+BAAOc,OAAP,CAAeM,KAAf,CAAqB,EAArB,EAAyBC,YAAzB,CAAsC,eAAtC,EAAuDC,WAAvD,CAAmE,IAAnE,EAAwE,CAAxE;AACAtB,+BAAOc,OAAP,CAAeM,KAAf,CAAqB,EAArB,EAAyBC,YAAzB,CAAsC,cAAtC,EAAsDE,QAAtD;AACAvB,+BAAOc,OAAP,CAAeE,WAAf,CAA2B,EAA3B;AACH,qBALD,MAKK;AACDhB,+BAAOc,OAAP,CAAeC,WAAf,CAA2BH,IAAIK,OAA/B;AACH;AACJ,iBATD;AAUA;AACA,iBAAK,CAAL;AAAO;AACP;AAjCR;AAmCH,KAzEI;AA2ELX,kBA3EK,0BA2EUkB,IA3EV,EA2Ee;AAChB;AACA;AACH,KA9EI;AAgFLC,aAhFK,uBAgFM;AACP1C,WAAGoB,QAAH,CAAYC,WAAZ,CAAwBsB,GAAxB,CAA4B,gBAA5B;AACH;AACD;;AAnFK,CAAT","file":"BuyPanel.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Ui\\宝宝游戏单页面","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        password:cc.EditBox,\r\n        number:cc.EditBox,\r\n        label_name:cc.Label,\r\n        label_Value:cc.Label,\r\n        propId:1,\r\n        type:0,\r\n    },\r\n    \r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n\r\n    },\r\n    onEnable(){\r\n        console.log(this.propId)\r\n        console.log(this.type)\r\n        Global.ProtocolMgr.queryUserData();\r\n        cc.director.GlobalEvent.on(\"UpdateUserData\",this.UpdateUserData,this);\r\n        if(this.type == 1)\r\n        {\r\n            this.label_name.string = \"使用\";\r\n            this.label_Value.string = \"使用\";\r\n        }else\r\n        {\r\n            this.label_name.string = \"购买\";\r\n            this.label_Value.string = \"购买\";\r\n        }\r\n        this.number.string = \"\";\r\n    },\r\n\r\n    buy(){\r\n        let reqData;\r\n        switch(this.type)\r\n        {\r\n            case 0: //购买消耗品\r\n                reqData = {\r\n                    id:this.propId,\r\n                    number:this.number.string\r\n                }\r\n                Global.ProtocolMgr.queryBuyConsumable(reqData,(res)=>{\r\n                    if(res.code==200){\r\n                        Global.PageMgr.showTipPage(\"购买成功\");\r\n                        Global.PageMgr.onClosePage(15);\r\n                    }else{\r\n                        Global.PageMgr.showTipPage(res.message);\r\n                    }\r\n                })\r\n                break; \r\n            case 1://使用消耗品\r\n                reqData = {\r\n                    mc_id:this.propId,\r\n                    number:this.number.string,\r\n                }\r\n                Global.ProtocolMgr.queryUseConsumable(reqData,(res)=>{\r\n                    if(res.code==200){\r\n                        Global.PageMgr.showTipPage(\"使用成功\");\r\n                        Global.PageMgr.pages[10].getComponent(\"KnapsackPanel\").getShopList(null,1);\r\n                        Global.PageMgr.pages[11].getComponent(\"ChongWuPanel\").showData();\r\n                        Global.PageMgr.onClosePage(15);\r\n                    }else{\r\n                        Global.PageMgr.showTipPage(res.message);\r\n                    }\r\n                });\r\n                break;\r\n                case 2://使用消耗品\r\n                break;\r\n        }\r\n    },\r\n\r\n    UpdateUserData(data){\r\n        // console.log(\"---------availableUsdt-------------\"+data.availableUsdt);\r\n        // console.log(\"---------------username-------\"+data.username);\r\n    },\r\n    \r\n    onDestroy(){\r\n        cc.director.GlobalEvent.off(\"UpdateUserData\");\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}