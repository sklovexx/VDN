{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\common/assets\\NiuNiu\\script\\common\\Facebook.js"],"names":["Facebook","cc","Class","init","listener","facebookId","sdkbox","log","_facebookId","PluginFacebook","setListener","isLoggedIn","login","arr","logout","test","requestReadPermissions","requestPublishPermissions","getUserID","getPermissionList","getAccessToken","shareLink","link","title","text","image","info","Object","type","share","dialogLink","dialog","inviteFriends","imageUrl","inviteFriendsWithInviteIds","fetchFriends","requestInvitableFriends","params","fields","limit","api","requestUserPicture","redirect","requestUserName","path","method","tag","getInstallFriends","getFriends","module","exports"],"mappings":"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","file":"Facebook.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\NiuNiu\\script\\common","sourcesContent":["/**\r\n * Created by skyxu on 2018/3/13.\r\n */\r\n\r\n\"use strict\";\r\n\r\n//sdk 配置说明 http://docs.sdkbox.com/zh/plugins/facebook/v3-js/\r\n\r\n/**\r\n * info.plist 添加\r\n * <key>FacebookAppID</key>\r\n <array>\r\n <string>2312312312</string>\r\n </array>\r\n\r\n <key>LSApplicationQueriesSchemes</key>\r\n <array>\r\n <string>fbauth2</string>\r\n </array>\r\n\r\n <key>URL types</key>\r\n <array>\r\n <dictionary>\r\n <array>URL Schemes\r\n <string>fb2312312312</string>\r\n </array>\r\n </dictionary>\r\n </array>\r\n */\r\n\r\nlet Facebook = cc.Class({\r\n\r\n    /**\r\n     * @param {object} listener\r\n     * @param {string} facebookId\r\n     * @returns {boolean}\r\n     */\r\n    init: function (listener, facebookId) {\r\n        if(typeof sdkbox === \"undefined\"){\r\n            cc.log(\"sdkbox: undefined\");\r\n            return false;\r\n        }\r\n\r\n        this._facebookId = facebookId;\r\n        sdkbox.PluginFacebook.setListener(listener);\r\n        sdkbox.PluginFacebook.init();\r\n        cc.log(\"sdkbox: init\");\r\n\r\n        return true;\r\n    },\r\n\r\n    isLoggedIn: function () {\r\n        return (sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn());\r\n    },\r\n\r\n    login: function (arr) {\r\n        if(sdkbox.PluginFacebook && !sdkbox.PluginFacebook.isLoggedIn()){\r\n            sdkbox.PluginFacebook.login(arr);\r\n        }\r\n    },\r\n\r\n    logout: function () {\r\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\r\n            sdkbox.PluginFacebook.logout();\r\n        }\r\n    },\r\n\r\n    test: function () {\r\n        sdkbox.PluginFacebook.requestReadPermissions([\"public_profile\", \"email\", \"user_friends\", \"publish_actions\"]);\r\n        sdkbox.PluginFacebook.requestPublishPermissions([\"publish_actions\"]);\r\n    },\r\n\r\n    /**\r\n     * @returns {string}\r\n     */\r\n    getUserID: function () {\r\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\r\n            return sdkbox.PluginFacebook.getUserID();\r\n        }\r\n        return \"\";\r\n    },\r\n\r\n    /**\r\n     * @returns {Array}\r\n     */\r\n    getPermissionList: function () {\r\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\r\n            return sdkbox.PluginFacebook.getPermissionList();\r\n        }\r\n        return null;\r\n    },\r\n\r\n    getAccessToken: function () {\r\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\r\n            return sdkbox.PluginFacebook.getAccessToken();\r\n        }\r\n        return null;\r\n    },\r\n\r\n    /**\r\n     * @param {string} link\r\n     * @param {string} title\r\n     * @param {string} text\r\n     * @param {string} image\r\n     */\r\n    shareLink: function (link, title, text, image) {\r\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\r\n            let info = new Object();\r\n            info.type  = \"link\";\r\n            info.link  = link;\r\n            info.title = title;\r\n            info.text  = text;\r\n            info.image = image;\r\n            sdkbox.PluginFacebook.share(info);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * @param {string} link\r\n     * @param {string} title\r\n     * @param {string} text\r\n     * @param {string} image\r\n     */\r\n    dialogLink: function (link, title, text, image) {\r\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\r\n            let info = new Object();\r\n            info.type  = \"link\";\r\n            info.link  = link;\r\n            info.title = title;\r\n            info.text  = text;\r\n            info.image = image;\r\n            sdkbox.PluginFacebook.dialog(info);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * @param {string} imageUrl\r\n     */\r\n    inviteFriends: function (imageUrl) {\r\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\r\n            sdkbox.PluginFacebook.inviteFriends(\"https://fb.me/\" + this._facebookId, imageUrl);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * @param {Array} arr\r\n     * @param {string} title\r\n     * @param {string} text\r\n     */\r\n    inviteFriendsWithInviteIds: function (arr, title, text) {\r\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\r\n            sdkbox.PluginFacebook.inviteFriendsWithInviteIds(arr, title, text);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 获取安装游戏的好友，数据在Listener onFetchFriends方法返回\r\n     */\r\n    fetchFriends: function () {\r\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\r\n            sdkbox.PluginFacebook.fetchFriends();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 获取邀请安装好友，数据在Listener onRequestInvitableFriends方法返回\r\n     */\r\n    requestInvitableFriends: function () {\r\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\r\n            let params = new Object();\r\n            params.fields = \"id,name\";\r\n            params.limit = 100;\r\n            //sdkbox.PluginFacebook.requestInvitableFriends(params);\r\n            sdkbox.PluginFacebook.api(\"/me/invitable_friends\", \"GET\", params, \"invitable_friends\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 获取头像\r\n     */\r\n    requestUserPicture: function () {\r\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\r\n            let params = new Object();\r\n            params.redirect = \"false\";\r\n            params.type = \"large\";\r\n            // cache_key 可以用作缓存图片使用，头像改变时会变化\r\n            sdkbox.PluginFacebook.api(\"/me/picture?fields=cache_key,url\", \"GET\", params, \"request_picture\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     *  获取name\r\n     */\r\n    requestUserName: function () {\r\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\r\n            let params = new Object();\r\n            params.fields = \"name\";\r\n            sdkbox.PluginFacebook.api(\"/me\", \"GET\", params, \"request_name\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * @param {string} path\r\n     * @param {string} method\r\n     * @param {object} params\r\n     * @param {string} tag\r\n     * 数据在Listener onAPI\r\n     */\r\n    api: function (path, method, params, tag) {\r\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\r\n            sdkbox.PluginFacebook.api(path, tag, params, tag);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * @returns {Array}\r\n     */\r\n    getInstallFriends: function () {\r\n        return sdkbox.PluginFacebook.getFriends();\r\n    },\r\n\r\n    requestReadPermissions: function (arr) {\r\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\r\n            sdkbox.PluginFacebook.requestReadPermissions(arr);\r\n        }\r\n    },\r\n\r\n    requestPublishPermissions: function () {\r\n        if(sdkbox.PluginFacebook && sdkbox.PluginFacebook.isLoggedIn()){\r\n            sdkbox.PluginFacebook.requestPublishPermissions(arr);\r\n        }\r\n    }\r\n});\r\n\r\nmodule.exports = Facebook;"]}